<html>
<head>
<title>dep-98d07f71.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6a8759;}
.s3 { color: #6897bb;}
.s4 { color: #808080;}
.s5 { color: #629755; font-style: italic;}
.s6 { color: #629755; font-weight: bold; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
dep-98d07f71.js</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">{ fileURLToPath as __cjs_fileURLToPath } from </span><span class="s2">'node:url'</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">{ dirname as __cjs_dirname } from </span><span class="s2">'node:path'</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">{ createRequire as __cjs_createRequire } from </span><span class="s2">'node:module'</span><span class="s0">;</span>

<span class="s0">const </span><span class="s1">__filename = __cjs_fileURLToPath(</span><span class="s0">import</span><span class="s1">.meta.url)</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">__dirname = __cjs_dirname(__filename)</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">require = __cjs_createRequire(</span><span class="s0">import</span><span class="s1">.meta.url)</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">__require = require</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">UNDEFINED_CODE_POINTS = </span><span class="s0">new </span><span class="s1">Set([</span>
    <span class="s3">65534</span><span class="s0">, </span><span class="s3">65535</span><span class="s0">, </span><span class="s3">131070</span><span class="s0">, </span><span class="s3">131071</span><span class="s0">, </span><span class="s3">196606</span><span class="s0">, </span><span class="s3">196607</span><span class="s0">, </span><span class="s3">262142</span><span class="s0">, </span><span class="s3">262143</span><span class="s0">, </span><span class="s3">327678</span><span class="s0">, </span><span class="s3">327679</span><span class="s0">, </span><span class="s3">393214</span><span class="s0">,</span>
    <span class="s3">393215</span><span class="s0">, </span><span class="s3">458750</span><span class="s0">, </span><span class="s3">458751</span><span class="s0">, </span><span class="s3">524286</span><span class="s0">, </span><span class="s3">524287</span><span class="s0">, </span><span class="s3">589822</span><span class="s0">, </span><span class="s3">589823</span><span class="s0">, </span><span class="s3">655358</span><span class="s0">, </span><span class="s3">655359</span><span class="s0">, </span><span class="s3">720894</span><span class="s0">,</span>
    <span class="s3">720895</span><span class="s0">, </span><span class="s3">786430</span><span class="s0">, </span><span class="s3">786431</span><span class="s0">, </span><span class="s3">851966</span><span class="s0">, </span><span class="s3">851967</span><span class="s0">, </span><span class="s3">917502</span><span class="s0">, </span><span class="s3">917503</span><span class="s0">, </span><span class="s3">983038</span><span class="s0">, </span><span class="s3">983039</span><span class="s0">, </span><span class="s3">1048574</span><span class="s0">,</span>
    <span class="s3">1048575</span><span class="s0">, </span><span class="s3">1114110</span><span class="s0">, </span><span class="s3">1114111</span><span class="s0">,</span>
<span class="s1">])</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">REPLACEMENT_CHARACTER = </span><span class="s2">'</span><span class="s0">\uFFFD</span><span class="s2">'</span><span class="s0">;</span>
<span class="s0">var </span><span class="s1">CODE_POINTS</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(CODE_POINTS) {</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;EOF&quot;</span><span class="s1">] = -</span><span class="s3">1</span><span class="s1">] = </span><span class="s2">&quot;EOF&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;NULL&quot;</span><span class="s1">] = </span><span class="s3">0</span><span class="s1">] = </span><span class="s2">&quot;NULL&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;TABULATION&quot;</span><span class="s1">] = </span><span class="s3">9</span><span class="s1">] = </span><span class="s2">&quot;TABULATION&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;CARRIAGE_RETURN&quot;</span><span class="s1">] = </span><span class="s3">13</span><span class="s1">] = </span><span class="s2">&quot;CARRIAGE_RETURN&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;LINE_FEED&quot;</span><span class="s1">] = </span><span class="s3">10</span><span class="s1">] = </span><span class="s2">&quot;LINE_FEED&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;FORM_FEED&quot;</span><span class="s1">] = </span><span class="s3">12</span><span class="s1">] = </span><span class="s2">&quot;FORM_FEED&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;SPACE&quot;</span><span class="s1">] = </span><span class="s3">32</span><span class="s1">] = </span><span class="s2">&quot;SPACE&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;EXCLAMATION_MARK&quot;</span><span class="s1">] = </span><span class="s3">33</span><span class="s1">] = </span><span class="s2">&quot;EXCLAMATION_MARK&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;QUOTATION_MARK&quot;</span><span class="s1">] = </span><span class="s3">34</span><span class="s1">] = </span><span class="s2">&quot;QUOTATION_MARK&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;NUMBER_SIGN&quot;</span><span class="s1">] = </span><span class="s3">35</span><span class="s1">] = </span><span class="s2">&quot;NUMBER_SIGN&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;AMPERSAND&quot;</span><span class="s1">] = </span><span class="s3">38</span><span class="s1">] = </span><span class="s2">&quot;AMPERSAND&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;APOSTROPHE&quot;</span><span class="s1">] = </span><span class="s3">39</span><span class="s1">] = </span><span class="s2">&quot;APOSTROPHE&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;HYPHEN_MINUS&quot;</span><span class="s1">] = </span><span class="s3">45</span><span class="s1">] = </span><span class="s2">&quot;HYPHEN_MINUS&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;SOLIDUS&quot;</span><span class="s1">] = </span><span class="s3">47</span><span class="s1">] = </span><span class="s2">&quot;SOLIDUS&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;DIGIT_0&quot;</span><span class="s1">] = </span><span class="s3">48</span><span class="s1">] = </span><span class="s2">&quot;DIGIT_0&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;DIGIT_9&quot;</span><span class="s1">] = </span><span class="s3">57</span><span class="s1">] = </span><span class="s2">&quot;DIGIT_9&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;SEMICOLON&quot;</span><span class="s1">] = </span><span class="s3">59</span><span class="s1">] = </span><span class="s2">&quot;SEMICOLON&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;LESS_THAN_SIGN&quot;</span><span class="s1">] = </span><span class="s3">60</span><span class="s1">] = </span><span class="s2">&quot;LESS_THAN_SIGN&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;EQUALS_SIGN&quot;</span><span class="s1">] = </span><span class="s3">61</span><span class="s1">] = </span><span class="s2">&quot;EQUALS_SIGN&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;GREATER_THAN_SIGN&quot;</span><span class="s1">] = </span><span class="s3">62</span><span class="s1">] = </span><span class="s2">&quot;GREATER_THAN_SIGN&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;QUESTION_MARK&quot;</span><span class="s1">] = </span><span class="s3">63</span><span class="s1">] = </span><span class="s2">&quot;QUESTION_MARK&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;LATIN_CAPITAL_A&quot;</span><span class="s1">] = </span><span class="s3">65</span><span class="s1">] = </span><span class="s2">&quot;LATIN_CAPITAL_A&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;LATIN_CAPITAL_F&quot;</span><span class="s1">] = </span><span class="s3">70</span><span class="s1">] = </span><span class="s2">&quot;LATIN_CAPITAL_F&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;LATIN_CAPITAL_X&quot;</span><span class="s1">] = </span><span class="s3">88</span><span class="s1">] = </span><span class="s2">&quot;LATIN_CAPITAL_X&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;LATIN_CAPITAL_Z&quot;</span><span class="s1">] = </span><span class="s3">90</span><span class="s1">] = </span><span class="s2">&quot;LATIN_CAPITAL_Z&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;RIGHT_SQUARE_BRACKET&quot;</span><span class="s1">] = </span><span class="s3">93</span><span class="s1">] = </span><span class="s2">&quot;RIGHT_SQUARE_BRACKET&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;GRAVE_ACCENT&quot;</span><span class="s1">] = </span><span class="s3">96</span><span class="s1">] = </span><span class="s2">&quot;GRAVE_ACCENT&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;LATIN_SMALL_A&quot;</span><span class="s1">] = </span><span class="s3">97</span><span class="s1">] = </span><span class="s2">&quot;LATIN_SMALL_A&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;LATIN_SMALL_F&quot;</span><span class="s1">] = </span><span class="s3">102</span><span class="s1">] = </span><span class="s2">&quot;LATIN_SMALL_F&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;LATIN_SMALL_X&quot;</span><span class="s1">] = </span><span class="s3">120</span><span class="s1">] = </span><span class="s2">&quot;LATIN_SMALL_X&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;LATIN_SMALL_Z&quot;</span><span class="s1">] = </span><span class="s3">122</span><span class="s1">] = </span><span class="s2">&quot;LATIN_SMALL_Z&quot;</span><span class="s0">;</span>
    <span class="s1">CODE_POINTS[CODE_POINTS[</span><span class="s2">&quot;REPLACEMENT_CHARACTER&quot;</span><span class="s1">] = </span><span class="s3">65533</span><span class="s1">] = </span><span class="s2">&quot;REPLACEMENT_CHARACTER&quot;</span><span class="s0">;</span>
<span class="s1">})(CODE_POINTS = CODE_POINTS || (CODE_POINTS = {}))</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">SEQUENCES = {</span>
    <span class="s1">DASH_DASH: </span><span class="s2">'--'</span><span class="s0">,</span>
    <span class="s1">CDATA_START: </span><span class="s2">'[CDATA['</span><span class="s0">,</span>
    <span class="s1">DOCTYPE: </span><span class="s2">'doctype'</span><span class="s0">,</span>
    <span class="s1">SCRIPT: </span><span class="s2">'script'</span><span class="s0">,</span>
    <span class="s1">PUBLIC: </span><span class="s2">'public'</span><span class="s0">,</span>
    <span class="s1">SYSTEM: </span><span class="s2">'system'</span><span class="s0">,</span>
<span class="s1">}</span><span class="s0">;</span>
<span class="s4">//Surrogates</span>
<span class="s0">function </span><span class="s1">isSurrogate(cp) {</span>
    <span class="s0">return </span><span class="s1">cp &gt;= </span><span class="s3">55296 </span><span class="s1">&amp;&amp; cp &lt;= </span><span class="s3">57343</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isSurrogatePair(cp) {</span>
    <span class="s0">return </span><span class="s1">cp &gt;= </span><span class="s3">56320 </span><span class="s1">&amp;&amp; cp &lt;= </span><span class="s3">57343</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">getSurrogatePairCodePoint(cp1</span><span class="s0">, </span><span class="s1">cp2) {</span>
    <span class="s0">return </span><span class="s1">(cp1 - </span><span class="s3">55296</span><span class="s1">) * </span><span class="s3">1024 </span><span class="s1">+ </span><span class="s3">9216 </span><span class="s1">+ cp2</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">//NOTE: excluding NULL and ASCII whitespace</span>
<span class="s0">function </span><span class="s1">isControlCodePoint(cp) {</span>
    <span class="s0">return </span><span class="s1">((cp !== </span><span class="s3">0x20 </span><span class="s1">&amp;&amp; cp !== </span><span class="s3">0x0a </span><span class="s1">&amp;&amp; cp !== </span><span class="s3">0x0d </span><span class="s1">&amp;&amp; cp !== </span><span class="s3">0x09 </span><span class="s1">&amp;&amp; cp !== </span><span class="s3">0x0c </span><span class="s1">&amp;&amp; cp &gt;= </span><span class="s3">0x01 </span><span class="s1">&amp;&amp; cp &lt;= </span><span class="s3">0x1f</span><span class="s1">) ||</span>
        <span class="s1">(cp &gt;= </span><span class="s3">0x7f </span><span class="s1">&amp;&amp; cp &lt;= </span><span class="s3">0x9f</span><span class="s1">))</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isUndefinedCodePoint(cp) {</span>
    <span class="s0">return </span><span class="s1">(cp &gt;= </span><span class="s3">64976 </span><span class="s1">&amp;&amp; cp &lt;= </span><span class="s3">65007</span><span class="s1">) || UNDEFINED_CODE_POINTS.has(cp)</span><span class="s0">;</span>
<span class="s1">}</span>

<span class="s0">var </span><span class="s1">ERR</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(ERR) {</span>
    <span class="s1">ERR[</span><span class="s2">&quot;controlCharacterInInputStream&quot;</span><span class="s1">] = </span><span class="s2">&quot;control-character-in-input-stream&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;noncharacterInInputStream&quot;</span><span class="s1">] = </span><span class="s2">&quot;noncharacter-in-input-stream&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;surrogateInInputStream&quot;</span><span class="s1">] = </span><span class="s2">&quot;surrogate-in-input-stream&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;nonVoidHtmlElementStartTagWithTrailingSolidus&quot;</span><span class="s1">] = </span><span class="s2">&quot;non-void-html-element-start-tag-with-trailing-solidus&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;endTagWithAttributes&quot;</span><span class="s1">] = </span><span class="s2">&quot;end-tag-with-attributes&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;endTagWithTrailingSolidus&quot;</span><span class="s1">] = </span><span class="s2">&quot;end-tag-with-trailing-solidus&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;unexpectedSolidusInTag&quot;</span><span class="s1">] = </span><span class="s2">&quot;unexpected-solidus-in-tag&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;unexpectedNullCharacter&quot;</span><span class="s1">] = </span><span class="s2">&quot;unexpected-null-character&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;unexpectedQuestionMarkInsteadOfTagName&quot;</span><span class="s1">] = </span><span class="s2">&quot;unexpected-question-mark-instead-of-tag-name&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;invalidFirstCharacterOfTagName&quot;</span><span class="s1">] = </span><span class="s2">&quot;invalid-first-character-of-tag-name&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;unexpectedEqualsSignBeforeAttributeName&quot;</span><span class="s1">] = </span><span class="s2">&quot;unexpected-equals-sign-before-attribute-name&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingEndTagName&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-end-tag-name&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;unexpectedCharacterInAttributeName&quot;</span><span class="s1">] = </span><span class="s2">&quot;unexpected-character-in-attribute-name&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;unknownNamedCharacterReference&quot;</span><span class="s1">] = </span><span class="s2">&quot;unknown-named-character-reference&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingSemicolonAfterCharacterReference&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-semicolon-after-character-reference&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;unexpectedCharacterAfterDoctypeSystemIdentifier&quot;</span><span class="s1">] = </span><span class="s2">&quot;unexpected-character-after-doctype-system-identifier&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;unexpectedCharacterInUnquotedAttributeValue&quot;</span><span class="s1">] = </span><span class="s2">&quot;unexpected-character-in-unquoted-attribute-value&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;eofBeforeTagName&quot;</span><span class="s1">] = </span><span class="s2">&quot;eof-before-tag-name&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;eofInTag&quot;</span><span class="s1">] = </span><span class="s2">&quot;eof-in-tag&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingAttributeValue&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-attribute-value&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingWhitespaceBetweenAttributes&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-whitespace-between-attributes&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingWhitespaceAfterDoctypePublicKeyword&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-whitespace-after-doctype-public-keyword&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-whitespace-between-doctype-public-and-system-identifiers&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingWhitespaceAfterDoctypeSystemKeyword&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-whitespace-after-doctype-system-keyword&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingQuoteBeforeDoctypePublicIdentifier&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-quote-before-doctype-public-identifier&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingQuoteBeforeDoctypeSystemIdentifier&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-quote-before-doctype-system-identifier&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingDoctypePublicIdentifier&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-doctype-public-identifier&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingDoctypeSystemIdentifier&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-doctype-system-identifier&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;abruptDoctypePublicIdentifier&quot;</span><span class="s1">] = </span><span class="s2">&quot;abrupt-doctype-public-identifier&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;abruptDoctypeSystemIdentifier&quot;</span><span class="s1">] = </span><span class="s2">&quot;abrupt-doctype-system-identifier&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;cdataInHtmlContent&quot;</span><span class="s1">] = </span><span class="s2">&quot;cdata-in-html-content&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;incorrectlyOpenedComment&quot;</span><span class="s1">] = </span><span class="s2">&quot;incorrectly-opened-comment&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;eofInScriptHtmlCommentLikeText&quot;</span><span class="s1">] = </span><span class="s2">&quot;eof-in-script-html-comment-like-text&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;eofInDoctype&quot;</span><span class="s1">] = </span><span class="s2">&quot;eof-in-doctype&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;nestedComment&quot;</span><span class="s1">] = </span><span class="s2">&quot;nested-comment&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;abruptClosingOfEmptyComment&quot;</span><span class="s1">] = </span><span class="s2">&quot;abrupt-closing-of-empty-comment&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;eofInComment&quot;</span><span class="s1">] = </span><span class="s2">&quot;eof-in-comment&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;incorrectlyClosedComment&quot;</span><span class="s1">] = </span><span class="s2">&quot;incorrectly-closed-comment&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;eofInCdata&quot;</span><span class="s1">] = </span><span class="s2">&quot;eof-in-cdata&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;absenceOfDigitsInNumericCharacterReference&quot;</span><span class="s1">] = </span><span class="s2">&quot;absence-of-digits-in-numeric-character-reference&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;nullCharacterReference&quot;</span><span class="s1">] = </span><span class="s2">&quot;null-character-reference&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;surrogateCharacterReference&quot;</span><span class="s1">] = </span><span class="s2">&quot;surrogate-character-reference&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;characterReferenceOutsideUnicodeRange&quot;</span><span class="s1">] = </span><span class="s2">&quot;character-reference-outside-unicode-range&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;controlCharacterReference&quot;</span><span class="s1">] = </span><span class="s2">&quot;control-character-reference&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;noncharacterCharacterReference&quot;</span><span class="s1">] = </span><span class="s2">&quot;noncharacter-character-reference&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingWhitespaceBeforeDoctypeName&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-whitespace-before-doctype-name&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingDoctypeName&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-doctype-name&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;invalidCharacterSequenceAfterDoctypeName&quot;</span><span class="s1">] = </span><span class="s2">&quot;invalid-character-sequence-after-doctype-name&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;duplicateAttribute&quot;</span><span class="s1">] = </span><span class="s2">&quot;duplicate-attribute&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;nonConformingDoctype&quot;</span><span class="s1">] = </span><span class="s2">&quot;non-conforming-doctype&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;missingDoctype&quot;</span><span class="s1">] = </span><span class="s2">&quot;missing-doctype&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;misplacedDoctype&quot;</span><span class="s1">] = </span><span class="s2">&quot;misplaced-doctype&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;endTagWithoutMatchingOpenElement&quot;</span><span class="s1">] = </span><span class="s2">&quot;end-tag-without-matching-open-element&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;closingOfElementWithOpenChildElements&quot;</span><span class="s1">] = </span><span class="s2">&quot;closing-of-element-with-open-child-elements&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;disallowedContentInNoscriptInHead&quot;</span><span class="s1">] = </span><span class="s2">&quot;disallowed-content-in-noscript-in-head&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;openElementsLeftAfterEof&quot;</span><span class="s1">] = </span><span class="s2">&quot;open-elements-left-after-eof&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;abandonedHeadElementChild&quot;</span><span class="s1">] = </span><span class="s2">&quot;abandoned-head-element-child&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;misplacedStartTagForHeadElement&quot;</span><span class="s1">] = </span><span class="s2">&quot;misplaced-start-tag-for-head-element&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;nestedNoscriptInHead&quot;</span><span class="s1">] = </span><span class="s2">&quot;nested-noscript-in-head&quot;</span><span class="s0">;</span>
    <span class="s1">ERR[</span><span class="s2">&quot;eofInElementThatCanContainOnlyText&quot;</span><span class="s1">] = </span><span class="s2">&quot;eof-in-element-that-can-contain-only-text&quot;</span><span class="s0">;</span>
<span class="s1">})(ERR = ERR || (ERR = {}))</span><span class="s0">;</span>

<span class="s4">//Const</span>
<span class="s0">const </span><span class="s1">DEFAULT_BUFFER_WATERLINE = </span><span class="s3">1 </span><span class="s1">&lt;&lt; </span><span class="s3">16</span><span class="s0">;</span>
<span class="s4">//Preprocessor</span>
<span class="s4">//NOTE: HTML input preprocessing</span>
<span class="s4">//(see: http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html#preprocessing-the-input-stream)</span>
<span class="s0">class </span><span class="s1">Preprocessor {</span>
    <span class="s1">constructor(handler) {</span>
        <span class="s0">this</span><span class="s1">.handler = handler</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.html = </span><span class="s2">''</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.pos = -</span><span class="s3">1</span><span class="s0">;</span>
        <span class="s4">// NOTE: Initial `lastGapPos` is -2, to ensure `col` on initialisation is 0</span>
        <span class="s0">this</span><span class="s1">.lastGapPos = -</span><span class="s3">2</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.gapStack = []</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.lastChunkWritten = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.endOfChunkHit = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.bufferWaterline = DEFAULT_BUFFER_WATERLINE</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.isEol = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.lineStartPos = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.droppedBufferSize = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.line = </span><span class="s3">1</span><span class="s0">;</span>
        <span class="s4">//NOTE: avoid reporting errors twice on advance/retreat</span>
        <span class="s0">this</span><span class="s1">.lastErrOffset = -</span><span class="s3">1</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s5">/** The column on the current line. If we just saw a gap (eg. a surrogate pair), return the index before. */</span>
    <span class="s1">get col() {</span>
        <span class="s0">return this</span><span class="s1">.pos - </span><span class="s0">this</span><span class="s1">.lineStartPos + Number(</span><span class="s0">this</span><span class="s1">.lastGapPos !== </span><span class="s0">this</span><span class="s1">.pos)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">get offset() {</span>
        <span class="s0">return this</span><span class="s1">.droppedBufferSize + </span><span class="s0">this</span><span class="s1">.pos</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">getError(code) {</span>
        <span class="s0">const </span><span class="s1">{ line</span><span class="s0">, </span><span class="s1">col</span><span class="s0">, </span><span class="s1">offset } = </span><span class="s0">this;</span>
        <span class="s0">return </span><span class="s1">{</span>
            <span class="s1">code</span><span class="s0">,</span>
            <span class="s1">startLine: line</span><span class="s0">,</span>
            <span class="s1">endLine: line</span><span class="s0">,</span>
            <span class="s1">startCol: col</span><span class="s0">,</span>
            <span class="s1">endCol: col</span><span class="s0">,</span>
            <span class="s1">startOffset: offset</span><span class="s0">,</span>
            <span class="s1">endOffset: offset</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_err(code) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.handler.onParseError &amp;&amp; </span><span class="s0">this</span><span class="s1">.lastErrOffset !== </span><span class="s0">this</span><span class="s1">.offset) {</span>
            <span class="s0">this</span><span class="s1">.lastErrOffset = </span><span class="s0">this</span><span class="s1">.offset</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.handler.onParseError(</span><span class="s0">this</span><span class="s1">.getError(code))</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_addGap() {</span>
        <span class="s0">this</span><span class="s1">.gapStack.push(</span><span class="s0">this</span><span class="s1">.lastGapPos)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.lastGapPos = </span><span class="s0">this</span><span class="s1">.pos</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_processSurrogate(cp) {</span>
        <span class="s4">//NOTE: try to peek a surrogate pair</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.pos !== </span><span class="s0">this</span><span class="s1">.html.length - </span><span class="s3">1</span><span class="s1">) {</span>
            <span class="s0">const </span><span class="s1">nextCp = </span><span class="s0">this</span><span class="s1">.html.charCodeAt(</span><span class="s0">this</span><span class="s1">.pos + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(isSurrogatePair(nextCp)) {</span>
                <span class="s4">//NOTE: we have a surrogate pair. Peek pair character and recalculate code point.</span>
                <span class="s0">this</span><span class="s1">.pos++</span><span class="s0">;</span>
                <span class="s4">//NOTE: add a gap that should be avoided during retreat</span>
                <span class="s0">this</span><span class="s1">._addGap()</span><span class="s0">;</span>
                <span class="s0">return </span><span class="s1">getSurrogatePairCodePoint(cp</span><span class="s0">, </span><span class="s1">nextCp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s4">//NOTE: we are at the end of a chunk, therefore we can't infer the surrogate pair yet.</span>
        <span class="s0">else if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">.lastChunkWritten) {</span>
            <span class="s0">this</span><span class="s1">.endOfChunkHit = </span><span class="s0">true;</span>
            <span class="s0">return </span><span class="s1">CODE_POINTS.EOF</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s4">//NOTE: isolated surrogate</span>
        <span class="s0">this</span><span class="s1">._err(ERR.surrogateInInputStream)</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">cp</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">willDropParsedChunk() {</span>
        <span class="s0">return this</span><span class="s1">.pos &gt; </span><span class="s0">this</span><span class="s1">.bufferWaterline</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">dropParsedChunk() {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.willDropParsedChunk()) {</span>
            <span class="s0">this</span><span class="s1">.html = </span><span class="s0">this</span><span class="s1">.html.substring(</span><span class="s0">this</span><span class="s1">.pos)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.lineStartPos -= </span><span class="s0">this</span><span class="s1">.pos</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.droppedBufferSize += </span><span class="s0">this</span><span class="s1">.pos</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.pos = </span><span class="s3">0</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.lastGapPos = -</span><span class="s3">2</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.gapStack.length = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">write(chunk</span><span class="s0">, </span><span class="s1">isLastChunk) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.html.length &gt; </span><span class="s3">0</span><span class="s1">) {</span>
            <span class="s0">this</span><span class="s1">.html += chunk</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">.html = chunk</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.endOfChunkHit = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.lastChunkWritten = isLastChunk</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">insertHtmlAtCurrentPos(chunk) {</span>
        <span class="s0">this</span><span class="s1">.html = </span><span class="s0">this</span><span class="s1">.html.substring(</span><span class="s3">0</span><span class="s0">, this</span><span class="s1">.pos + </span><span class="s3">1</span><span class="s1">) + chunk + </span><span class="s0">this</span><span class="s1">.html.substring(</span><span class="s0">this</span><span class="s1">.pos + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.endOfChunkHit = </span><span class="s0">false;</span>
    <span class="s1">}</span>
    <span class="s1">startsWith(pattern</span><span class="s0">, </span><span class="s1">caseSensitive) {</span>
        <span class="s4">// Check if our buffer has enough characters</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.pos + pattern.length &gt; </span><span class="s0">this</span><span class="s1">.html.length) {</span>
            <span class="s0">this</span><span class="s1">.endOfChunkHit = !</span><span class="s0">this</span><span class="s1">.lastChunkWritten</span><span class="s0">;</span>
            <span class="s0">return false;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(caseSensitive) {</span>
            <span class="s0">return this</span><span class="s1">.html.startsWith(pattern</span><span class="s0">, this</span><span class="s1">.pos)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; pattern.length</span><span class="s0">; </span><span class="s1">i++) {</span>
            <span class="s0">const </span><span class="s1">cp = </span><span class="s0">this</span><span class="s1">.html.charCodeAt(</span><span class="s0">this</span><span class="s1">.pos + i) | </span><span class="s3">0x20</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(cp !== pattern.charCodeAt(i)) {</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return true;</span>
    <span class="s1">}</span>
    <span class="s1">peek(offset) {</span>
        <span class="s0">const </span><span class="s1">pos = </span><span class="s0">this</span><span class="s1">.pos + offset</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(pos &gt;= </span><span class="s0">this</span><span class="s1">.html.length) {</span>
            <span class="s0">this</span><span class="s1">.endOfChunkHit = !</span><span class="s0">this</span><span class="s1">.lastChunkWritten</span><span class="s0">;</span>
            <span class="s0">return </span><span class="s1">CODE_POINTS.EOF</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">const </span><span class="s1">code = </span><span class="s0">this</span><span class="s1">.html.charCodeAt(pos)</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">code === CODE_POINTS.CARRIAGE_RETURN ? CODE_POINTS.LINE_FEED : code</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">advance() {</span>
        <span class="s0">this</span><span class="s1">.pos++</span><span class="s0">;</span>
        <span class="s4">//NOTE: LF should be in the last column of the line</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.isEol) {</span>
            <span class="s0">this</span><span class="s1">.isEol = </span><span class="s0">false;</span>
            <span class="s0">this</span><span class="s1">.line++</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.lineStartPos = </span><span class="s0">this</span><span class="s1">.pos</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.pos &gt;= </span><span class="s0">this</span><span class="s1">.html.length) {</span>
            <span class="s0">this</span><span class="s1">.endOfChunkHit = !</span><span class="s0">this</span><span class="s1">.lastChunkWritten</span><span class="s0">;</span>
            <span class="s0">return </span><span class="s1">CODE_POINTS.EOF</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">let </span><span class="s1">cp = </span><span class="s0">this</span><span class="s1">.html.charCodeAt(</span><span class="s0">this</span><span class="s1">.pos)</span><span class="s0">;</span>
        <span class="s4">//NOTE: all U+000D CARRIAGE RETURN (CR) characters must be converted to U+000A LINE FEED (LF) characters</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.CARRIAGE_RETURN) {</span>
            <span class="s0">this</span><span class="s1">.isEol = </span><span class="s0">true;</span>
            <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">true;</span>
            <span class="s0">return </span><span class="s1">CODE_POINTS.LINE_FEED</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s4">//NOTE: any U+000A LINE FEED (LF) characters that immediately follow a U+000D CARRIAGE RETURN (CR) character</span>
        <span class="s4">//must be ignored.</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.LINE_FEED) {</span>
            <span class="s0">this</span><span class="s1">.isEol = </span><span class="s0">true;</span>
            <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.skipNextNewLine) {</span>
                <span class="s4">// `line` will be bumped again in the recursive call.</span>
                <span class="s0">this</span><span class="s1">.line--</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
                <span class="s0">this</span><span class="s1">._addGap()</span><span class="s0">;</span>
                <span class="s0">return this</span><span class="s1">.advance()</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
        <span class="s0">if </span><span class="s1">(isSurrogate(cp)) {</span>
            <span class="s1">cp = </span><span class="s0">this</span><span class="s1">._processSurrogate(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s4">//OPTIMIZATION: first check if code point is in the common allowed</span>
        <span class="s4">//range (ASCII alphanumeric, whitespaces, big chunk of BMP)</span>
        <span class="s4">//before going into detailed performance cost validation.</span>
        <span class="s0">const </span><span class="s1">isCommonValidRange = </span><span class="s0">this</span><span class="s1">.handler.onParseError === </span><span class="s0">null </span><span class="s1">||</span>
            <span class="s1">(cp &gt; </span><span class="s3">0x1f </span><span class="s1">&amp;&amp; cp &lt; </span><span class="s3">0x7f</span><span class="s1">) ||</span>
            <span class="s1">cp === CODE_POINTS.LINE_FEED ||</span>
            <span class="s1">cp === CODE_POINTS.CARRIAGE_RETURN ||</span>
            <span class="s1">(cp &gt; </span><span class="s3">0x9f </span><span class="s1">&amp;&amp; cp &lt; </span><span class="s3">64976</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(!isCommonValidRange) {</span>
            <span class="s0">this</span><span class="s1">._checkForProblematicCharacters(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">return </span><span class="s1">cp</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_checkForProblematicCharacters(cp) {</span>
        <span class="s0">if </span><span class="s1">(isControlCodePoint(cp)) {</span>
            <span class="s0">this</span><span class="s1">._err(ERR.controlCharacterInInputStream)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(isUndefinedCodePoint(cp)) {</span>
            <span class="s0">this</span><span class="s1">._err(ERR.noncharacterInInputStream)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">retreat(count) {</span>
        <span class="s0">this</span><span class="s1">.pos -= count</span><span class="s0">;</span>
        <span class="s0">while </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.pos &lt; </span><span class="s0">this</span><span class="s1">.lastGapPos) {</span>
            <span class="s0">this</span><span class="s1">.lastGapPos = </span><span class="s0">this</span><span class="s1">.gapStack.pop()</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.pos--</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.isEol = </span><span class="s0">false;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s0">var </span><span class="s1">TokenType</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(TokenType) {</span>
    <span class="s1">TokenType[TokenType[</span><span class="s2">&quot;CHARACTER&quot;</span><span class="s1">] = </span><span class="s3">0</span><span class="s1">] = </span><span class="s2">&quot;CHARACTER&quot;</span><span class="s0">;</span>
    <span class="s1">TokenType[TokenType[</span><span class="s2">&quot;NULL_CHARACTER&quot;</span><span class="s1">] = </span><span class="s3">1</span><span class="s1">] = </span><span class="s2">&quot;NULL_CHARACTER&quot;</span><span class="s0">;</span>
    <span class="s1">TokenType[TokenType[</span><span class="s2">&quot;WHITESPACE_CHARACTER&quot;</span><span class="s1">] = </span><span class="s3">2</span><span class="s1">] = </span><span class="s2">&quot;WHITESPACE_CHARACTER&quot;</span><span class="s0">;</span>
    <span class="s1">TokenType[TokenType[</span><span class="s2">&quot;START_TAG&quot;</span><span class="s1">] = </span><span class="s3">3</span><span class="s1">] = </span><span class="s2">&quot;START_TAG&quot;</span><span class="s0">;</span>
    <span class="s1">TokenType[TokenType[</span><span class="s2">&quot;END_TAG&quot;</span><span class="s1">] = </span><span class="s3">4</span><span class="s1">] = </span><span class="s2">&quot;END_TAG&quot;</span><span class="s0">;</span>
    <span class="s1">TokenType[TokenType[</span><span class="s2">&quot;COMMENT&quot;</span><span class="s1">] = </span><span class="s3">5</span><span class="s1">] = </span><span class="s2">&quot;COMMENT&quot;</span><span class="s0">;</span>
    <span class="s1">TokenType[TokenType[</span><span class="s2">&quot;DOCTYPE&quot;</span><span class="s1">] = </span><span class="s3">6</span><span class="s1">] = </span><span class="s2">&quot;DOCTYPE&quot;</span><span class="s0">;</span>
    <span class="s1">TokenType[TokenType[</span><span class="s2">&quot;EOF&quot;</span><span class="s1">] = </span><span class="s3">7</span><span class="s1">] = </span><span class="s2">&quot;EOF&quot;</span><span class="s0">;</span>
    <span class="s1">TokenType[TokenType[</span><span class="s2">&quot;HIBERNATION&quot;</span><span class="s1">] = </span><span class="s3">8</span><span class="s1">] = </span><span class="s2">&quot;HIBERNATION&quot;</span><span class="s0">;</span>
<span class="s1">})(TokenType = TokenType || (TokenType = {}))</span><span class="s0">;</span>
<span class="s0">function </span><span class="s1">getTokenAttr(token</span><span class="s0">, </span><span class="s1">attrName) {</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = token.attrs.length - </span><span class="s3">1</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
        <span class="s0">if </span><span class="s1">(token.attrs[i].name === attrName) {</span>
            <span class="s0">return </span><span class="s1">token.attrs[i].value</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">return null;</span>
<span class="s1">}</span>

<span class="s0">var </span><span class="s1">token = {</span>
    <span class="s1">__proto__: </span><span class="s0">null,</span>
    <span class="s1">get TokenType () { </span><span class="s0">return </span><span class="s1">TokenType</span><span class="s0">; </span><span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getTokenAttr: getTokenAttr</span>
<span class="s1">}</span><span class="s0">;</span>

<span class="s4">// Generated using scripts/write-decode-map.ts</span>
<span class="s0">var </span><span class="s1">htmlDecodeTree = </span><span class="s0">new </span><span class="s1">Uint16Array(</span>
<span class="s4">// prettier-ignore</span>
<span class="s2">&quot;</span><span class="s0">\u1d41</span><span class="s2">&lt;</span><span class="s0">\xd5\u0131\u028a\u049d\u057b\u05d0\u0675\u06de\u07a2\u07d6\u080f\u0a4a\u0a91\u0da1\u0e6d\u0f09\u0f26\u10ca\u1228\u12e1\u1415\u149d\u14c3\u14df\u1525\0\0\0\0\0\0\u156b\u16cd\u198d\u1c12\u1ddd\u1f7e\u2060\u21b0\u228d\u23c0\u23fb\u2442\u2824\u2912\u2d08\u2e48\u2fce\u3016\u32ba\u3639\u37ac\u38fe\u3a28\u3a71\u3ae0\u3b2e\u0800</span><span class="s2">EMabcfglmnoprstu</span><span class="s0">\\</span><span class="s2">bfms</span><span class="s0">\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcf</span><span class="s2">lig</span><span class="s0">\u803b\xc6\u40c6</span><span class="s2">P</span><span class="s0">\u803b</span><span class="s2">&amp;</span><span class="s0">\u4026</span><span class="s2">cute</span><span class="s0">\u803b\xc1\u40c1</span><span class="s2">reve;</span><span class="s0">\u4102\u0100</span><span class="s2">iyx}rc</span><span class="s0">\u803b\xc2\u40c2</span><span class="s2">;</span><span class="s0">\u4410</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd04</span><span class="s2">rave</span><span class="s0">\u803b\xc0\u40c0</span><span class="s2">pha;</span><span class="s0">\u4391</span><span class="s2">acr;</span><span class="s0">\u4100</span><span class="s2">d;</span><span class="s0">\u6a53\u0100</span><span class="s2">gp</span><span class="s0">\x9d\xa1</span><span class="s2">on;</span><span class="s0">\u4104</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd38</span><span class="s2">plyFunction;</span><span class="s0">\u6061</span><span class="s2">ing</span><span class="s0">\u803b\xc5\u40c5\u0100</span><span class="s2">cs</span><span class="s0">\xbe\xc3</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udc9c</span><span class="s2">ign;</span><span class="s0">\u6254</span><span class="s2">ilde</span><span class="s0">\u803b\xc3\u40c3</span><span class="s2">ml</span><span class="s0">\u803b\xc4\u40c4\u0400</span><span class="s2">aceforsu</span><span class="s0">\xe5\xfb\xfe\u0117\u011c\u0122\u0127\u012a\u0100</span><span class="s2">cr</span><span class="s0">\xea\xf2</span><span class="s2">kslash;</span><span class="s0">\u6216\u0176\xf6\xf8</span><span class="s2">;</span><span class="s0">\u6ae7</span><span class="s2">ed;</span><span class="s0">\u6306</span><span class="s2">y;</span><span class="s0">\u4411\u0180</span><span class="s2">crt</span><span class="s0">\u0105\u010b\u0114</span><span class="s2">ause;</span><span class="s0">\u6235</span><span class="s2">noullis;</span><span class="s0">\u612c</span><span class="s2">a;</span><span class="s0">\u4392</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd05</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd39</span><span class="s2">eve;</span><span class="s0">\u42d8</span><span class="s2">c</span><span class="s0">\xf2\u0113</span><span class="s2">mpeq;</span><span class="s0">\u624e\u0700</span><span class="s2">HOacdefhilorsu</span><span class="s0">\u014d\u0151\u0156\u0180\u019e\u01a2\u01b5\u01b7\u01ba\u01dc\u0215\u0273\u0278\u027e</span><span class="s2">cy;</span><span class="s0">\u4427</span><span class="s2">PY</span><span class="s0">\u803b\xa9\u40a9\u0180</span><span class="s2">cpy</span><span class="s0">\u015d\u0162\u017a</span><span class="s2">ute;</span><span class="s0">\u4106\u0100</span><span class="s2">;i</span><span class="s0">\u0167\u0168\u62d2</span><span class="s2">talDifferentialD;</span><span class="s0">\u6145</span><span class="s2">leys;</span><span class="s0">\u612d\u0200</span><span class="s2">aeio</span><span class="s0">\u0189\u018e\u0194\u0198</span><span class="s2">ron;</span><span class="s0">\u410c</span><span class="s2">dil</span><span class="s0">\u803b\xc7\u40c7</span><span class="s2">rc;</span><span class="s0">\u4108</span><span class="s2">nint;</span><span class="s0">\u6230</span><span class="s2">ot;</span><span class="s0">\u410a\u0100</span><span class="s2">dn</span><span class="s0">\u01a7\u01ad</span><span class="s2">illa;</span><span class="s0">\u40b8</span><span class="s2">terDot;</span><span class="s0">\u40b7\xf2\u017f</span><span class="s2">i;</span><span class="s0">\u43a7</span><span class="s2">rcle</span><span class="s0">\u0200</span><span class="s2">DMPT</span><span class="s0">\u01c7\u01cb\u01d1\u01d6</span><span class="s2">ot;</span><span class="s0">\u6299</span><span class="s2">inus;</span><span class="s0">\u6296</span><span class="s2">lus;</span><span class="s0">\u6295</span><span class="s2">imes;</span><span class="s0">\u6297</span><span class="s2">o</span><span class="s0">\u0100</span><span class="s2">cs</span><span class="s0">\u01e2\u01f8</span><span class="s2">kwiseContourIntegral;</span><span class="s0">\u6232</span><span class="s2">eCurly</span><span class="s0">\u0100</span><span class="s2">DQ</span><span class="s0">\u0203\u020f</span><span class="s2">oubleQuote;</span><span class="s0">\u601d</span><span class="s2">uote;</span><span class="s0">\u6019\u0200</span><span class="s2">lnpu</span><span class="s0">\u021e\u0228\u0247\u0255</span><span class="s2">on</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u0225\u0226\u6237</span><span class="s2">;</span><span class="s0">\u6a74\u0180</span><span class="s2">git</span><span class="s0">\u022f\u0236\u023a</span><span class="s2">ruent;</span><span class="s0">\u6261</span><span class="s2">nt;</span><span class="s0">\u622f</span><span class="s2">ourIntegral;</span><span class="s0">\u622e\u0100</span><span class="s2">fr</span><span class="s0">\u024c\u024e</span><span class="s2">;</span><span class="s0">\u6102</span><span class="s2">oduct;</span><span class="s0">\u6210</span><span class="s2">nterClockwiseContourIntegral;</span><span class="s0">\u6233</span><span class="s2">oss;</span><span class="s0">\u6a2f</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udc9e</span><span class="s2">p</span><span class="s0">\u0100</span><span class="s2">;C</span><span class="s0">\u0284\u0285\u62d3</span><span class="s2">ap;</span><span class="s0">\u624d\u0580</span><span class="s2">DJSZacefios</span><span class="s0">\u02a0\u02ac\u02b0\u02b4\u02b8\u02cb\u02d7\u02e1\u02e6\u0333\u048d\u0100</span><span class="s2">;o</span><span class="s0">\u0179\u02a5</span><span class="s2">trahd;</span><span class="s0">\u6911</span><span class="s2">cy;</span><span class="s0">\u4402</span><span class="s2">cy;</span><span class="s0">\u4405</span><span class="s2">cy;</span><span class="s0">\u440f\u0180</span><span class="s2">grs</span><span class="s0">\u02bf\u02c4\u02c7</span><span class="s2">ger;</span><span class="s0">\u6021</span><span class="s2">r;</span><span class="s0">\u61a1</span><span class="s2">hv;</span><span class="s0">\u6ae4\u0100</span><span class="s2">ay</span><span class="s0">\u02d0\u02d5</span><span class="s2">ron;</span><span class="s0">\u410e</span><span class="s2">;</span><span class="s0">\u4414</span><span class="s2">l</span><span class="s0">\u0100</span><span class="s2">;t</span><span class="s0">\u02dd\u02de\u6207</span><span class="s2">a;</span><span class="s0">\u4394</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd07\u0100</span><span class="s2">af</span><span class="s0">\u02eb\u0327\u0100</span><span class="s2">cm</span><span class="s0">\u02f0\u0322</span><span class="s2">ritical</span><span class="s0">\u0200</span><span class="s2">ADGT</span><span class="s0">\u0300\u0306\u0316\u031c</span><span class="s2">cute;</span><span class="s0">\u40b4</span><span class="s2">o</span><span class="s0">\u0174\u030b\u030d</span><span class="s2">;</span><span class="s0">\u42d9</span><span class="s2">bleAcute;</span><span class="s0">\u42dd</span><span class="s2">rave;</span><span class="s0">\u4060</span><span class="s2">ilde;</span><span class="s0">\u42dc</span><span class="s2">ond;</span><span class="s0">\u62c4</span><span class="s2">ferentialD;</span><span class="s0">\u6146\u0470\u033d\0\0\0\u0342\u0354\0\u0405</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd3b\u0180</span><span class="s2">;DE</span><span class="s0">\u0348\u0349\u034d\u40a8</span><span class="s2">ot;</span><span class="s0">\u60dc</span><span class="s2">qual;</span><span class="s0">\u6250</span><span class="s2">ble</span><span class="s0">\u0300</span><span class="s2">CDLRUV</span><span class="s0">\u0363\u0372\u0382\u03cf\u03e2\u03f8</span><span class="s2">ontourIntegra</span><span class="s0">\xec\u0239</span><span class="s2">o</span><span class="s0">\u0274\u0379\0\0\u037b\xbb\u0349</span><span class="s2">nArrow;</span><span class="s0">\u61d3\u0100</span><span class="s2">eo</span><span class="s0">\u0387\u03a4</span><span class="s2">ft</span><span class="s0">\u0180</span><span class="s2">ART</span><span class="s0">\u0390\u0396\u03a1</span><span class="s2">rrow;</span><span class="s0">\u61d0</span><span class="s2">ightArrow;</span><span class="s0">\u61d4</span><span class="s2">e</span><span class="s0">\xe5\u02ca</span><span class="s2">ng</span><span class="s0">\u0100</span><span class="s2">LR</span><span class="s0">\u03ab\u03c4</span><span class="s2">eft</span><span class="s0">\u0100</span><span class="s2">AR</span><span class="s0">\u03b3\u03b9</span><span class="s2">rrow;</span><span class="s0">\u67f8</span><span class="s2">ightArrow;</span><span class="s0">\u67fa</span><span class="s2">ightArrow;</span><span class="s0">\u67f9</span><span class="s2">ight</span><span class="s0">\u0100</span><span class="s2">AT</span><span class="s0">\u03d8\u03de</span><span class="s2">rrow;</span><span class="s0">\u61d2</span><span class="s2">ee;</span><span class="s0">\u62a8</span><span class="s2">p</span><span class="s0">\u0241\u03e9\0\0\u03ef</span><span class="s2">rrow;</span><span class="s0">\u61d1</span><span class="s2">ownArrow;</span><span class="s0">\u61d5</span><span class="s2">erticalBar;</span><span class="s0">\u6225</span><span class="s2">n</span><span class="s0">\u0300</span><span class="s2">ABLRTa</span><span class="s0">\u0412\u042a\u0430\u045e\u047f\u037c</span><span class="s2">rrow</span><span class="s0">\u0180</span><span class="s2">;BU</span><span class="s0">\u041d\u041e\u0422\u6193</span><span class="s2">ar;</span><span class="s0">\u6913</span><span class="s2">pArrow;</span><span class="s0">\u61f5</span><span class="s2">reve;</span><span class="s0">\u4311</span><span class="s2">eft</span><span class="s0">\u02d2\u043a\0\u0446\0\u0450</span><span class="s2">ightVector;</span><span class="s0">\u6950</span><span class="s2">eeVector;</span><span class="s0">\u695e</span><span class="s2">ector</span><span class="s0">\u0100</span><span class="s2">;B</span><span class="s0">\u0459\u045a\u61bd</span><span class="s2">ar;</span><span class="s0">\u6956</span><span class="s2">ight</span><span class="s0">\u01d4\u0467\0\u0471</span><span class="s2">eeVector;</span><span class="s0">\u695f</span><span class="s2">ector</span><span class="s0">\u0100</span><span class="s2">;B</span><span class="s0">\u047a\u047b\u61c1</span><span class="s2">ar;</span><span class="s0">\u6957</span><span class="s2">ee</span><span class="s0">\u0100</span><span class="s2">;A</span><span class="s0">\u0486\u0487\u62a4</span><span class="s2">rrow;</span><span class="s0">\u61a7\u0100</span><span class="s2">ct</span><span class="s0">\u0492\u0497</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udc9f</span><span class="s2">rok;</span><span class="s0">\u4110\u0800</span><span class="s2">NTacdfglmopqstux</span><span class="s0">\u04bd\u04c0\u04c4\u04cb\u04de\u04e2\u04e7\u04ee\u04f5\u0521\u052f\u0536\u0552\u055d\u0560\u0565</span><span class="s2">G;</span><span class="s0">\u414a</span><span class="s2">H</span><span class="s0">\u803b\xd0\u40d0</span><span class="s2">cute</span><span class="s0">\u803b\xc9\u40c9\u0180</span><span class="s2">aiy</span><span class="s0">\u04d2\u04d7\u04dc</span><span class="s2">ron;</span><span class="s0">\u411a</span><span class="s2">rc</span><span class="s0">\u803b\xca\u40ca</span><span class="s2">;</span><span class="s0">\u442d</span><span class="s2">ot;</span><span class="s0">\u4116</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd08</span><span class="s2">rave</span><span class="s0">\u803b\xc8\u40c8</span><span class="s2">ement;</span><span class="s0">\u6208\u0100</span><span class="s2">ap</span><span class="s0">\u04fa\u04fe</span><span class="s2">cr;</span><span class="s0">\u4112</span><span class="s2">ty</span><span class="s0">\u0253\u0506\0\0\u0512</span><span class="s2">mallSquare;</span><span class="s0">\u65fb</span><span class="s2">erySmallSquare;</span><span class="s0">\u65ab\u0100</span><span class="s2">gp</span><span class="s0">\u0526\u052a</span><span class="s2">on;</span><span class="s0">\u4118</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd3c</span><span class="s2">silon;</span><span class="s0">\u4395</span><span class="s2">u</span><span class="s0">\u0100</span><span class="s2">ai</span><span class="s0">\u053c\u0549</span><span class="s2">l</span><span class="s0">\u0100</span><span class="s2">;T</span><span class="s0">\u0542\u0543\u6a75</span><span class="s2">ilde;</span><span class="s0">\u6242</span><span class="s2">librium;</span><span class="s0">\u61cc\u0100</span><span class="s2">ci</span><span class="s0">\u0557\u055a</span><span class="s2">r;</span><span class="s0">\u6130</span><span class="s2">m;</span><span class="s0">\u6a73</span><span class="s2">a;</span><span class="s0">\u4397</span><span class="s2">ml</span><span class="s0">\u803b\xcb\u40cb\u0100</span><span class="s2">ip</span><span class="s0">\u056a\u056f</span><span class="s2">sts;</span><span class="s0">\u6203</span><span class="s2">onentialE;</span><span class="s0">\u6147\u0280</span><span class="s2">cfios</span><span class="s0">\u0585\u0588\u058d\u05b2\u05cc</span><span class="s2">y;</span><span class="s0">\u4424</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd09</span><span class="s2">lled</span><span class="s0">\u0253\u0597\0\0\u05a3</span><span class="s2">mallSquare;</span><span class="s0">\u65fc</span><span class="s2">erySmallSquare;</span><span class="s0">\u65aa\u0370\u05ba\0\u05bf\0\0\u05c4</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd3d</span><span class="s2">All;</span><span class="s0">\u6200</span><span class="s2">riertrf;</span><span class="s0">\u6131</span><span class="s2">c</span><span class="s0">\xf2\u05cb\u0600</span><span class="s2">JTabcdfgorst</span><span class="s0">\u05e8\u05ec\u05ef\u05fa\u0600\u0612\u0616\u061b\u061d\u0623\u066c\u0672</span><span class="s2">cy;</span><span class="s0">\u4403\u803b</span><span class="s2">&gt;</span><span class="s0">\u403e</span><span class="s2">mma</span><span class="s0">\u0100</span><span class="s2">;d</span><span class="s0">\u05f7\u05f8\u4393</span><span class="s2">;</span><span class="s0">\u43dc</span><span class="s2">reve;</span><span class="s0">\u411e\u0180</span><span class="s2">eiy</span><span class="s0">\u0607\u060c\u0610</span><span class="s2">dil;</span><span class="s0">\u4122</span><span class="s2">rc;</span><span class="s0">\u411c</span><span class="s2">;</span><span class="s0">\u4413</span><span class="s2">ot;</span><span class="s0">\u4120</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd0a</span><span class="s2">;</span><span class="s0">\u62d9</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd3e</span><span class="s2">eater</span><span class="s0">\u0300</span><span class="s2">EFGLST</span><span class="s0">\u0635\u0644\u064e\u0656\u065b\u0666</span><span class="s2">qual</span><span class="s0">\u0100</span><span class="s2">;L</span><span class="s0">\u063e\u063f\u6265</span><span class="s2">ess;</span><span class="s0">\u62db</span><span class="s2">ullEqual;</span><span class="s0">\u6267</span><span class="s2">reater;</span><span class="s0">\u6aa2</span><span class="s2">ess;</span><span class="s0">\u6277</span><span class="s2">lantEqual;</span><span class="s0">\u6a7e</span><span class="s2">ilde;</span><span class="s0">\u6273</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udca2</span><span class="s2">;</span><span class="s0">\u626b\u0400</span><span class="s2">Aacfiosu</span><span class="s0">\u0685\u068b\u0696\u069b\u069e\u06aa\u06be\u06ca</span><span class="s2">RDcy;</span><span class="s0">\u442a\u0100</span><span class="s2">ct</span><span class="s0">\u0690\u0694</span><span class="s2">ek;</span><span class="s0">\u42c7</span><span class="s2">;</span><span class="s0">\u405e</span><span class="s2">irc;</span><span class="s0">\u4124</span><span class="s2">r;</span><span class="s0">\u610c</span><span class="s2">lbertSpace;</span><span class="s0">\u610b\u01f0\u06af\0\u06b2</span><span class="s2">f;</span><span class="s0">\u610d</span><span class="s2">izontalLine;</span><span class="s0">\u6500\u0100</span><span class="s2">ct</span><span class="s0">\u06c3\u06c5\xf2\u06a9</span><span class="s2">rok;</span><span class="s0">\u4126</span><span class="s2">mp</span><span class="s0">\u0144\u06d0\u06d8</span><span class="s2">ownHum</span><span class="s0">\xf0\u012f</span><span class="s2">qual;</span><span class="s0">\u624f\u0700</span><span class="s2">EJOacdfgmnostu</span><span class="s0">\u06fa\u06fe\u0703\u0707\u070e\u071a\u071e\u0721\u0728\u0744\u0778\u078b\u078f\u0795</span><span class="s2">cy;</span><span class="s0">\u4415</span><span class="s2">lig;</span><span class="s0">\u4132</span><span class="s2">cy;</span><span class="s0">\u4401</span><span class="s2">cute</span><span class="s0">\u803b\xcd\u40cd\u0100</span><span class="s2">iy</span><span class="s0">\u0713\u0718</span><span class="s2">rc</span><span class="s0">\u803b\xce\u40ce</span><span class="s2">;</span><span class="s0">\u4418</span><span class="s2">ot;</span><span class="s0">\u4130</span><span class="s2">r;</span><span class="s0">\u6111</span><span class="s2">rave</span><span class="s0">\u803b\xcc\u40cc\u0180</span><span class="s2">;ap</span><span class="s0">\u0720\u072f\u073f\u0100</span><span class="s2">cg</span><span class="s0">\u0734\u0737</span><span class="s2">r;</span><span class="s0">\u412a</span><span class="s2">inaryI;</span><span class="s0">\u6148</span><span class="s2">lie</span><span class="s0">\xf3\u03dd\u01f4\u0749\0\u0762\u0100</span><span class="s2">;e</span><span class="s0">\u074d\u074e\u622c\u0100</span><span class="s2">gr</span><span class="s0">\u0753\u0758</span><span class="s2">ral;</span><span class="s0">\u622b</span><span class="s2">section;</span><span class="s0">\u62c2</span><span class="s2">isible</span><span class="s0">\u0100</span><span class="s2">CT</span><span class="s0">\u076c\u0772</span><span class="s2">omma;</span><span class="s0">\u6063</span><span class="s2">imes;</span><span class="s0">\u6062\u0180</span><span class="s2">gpt</span><span class="s0">\u077f\u0783\u0788</span><span class="s2">on;</span><span class="s0">\u412e</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd40</span><span class="s2">a;</span><span class="s0">\u4399</span><span class="s2">cr;</span><span class="s0">\u6110</span><span class="s2">ilde;</span><span class="s0">\u4128\u01eb\u079a\0\u079e</span><span class="s2">cy;</span><span class="s0">\u4406</span><span class="s2">l</span><span class="s0">\u803b\xcf\u40cf\u0280</span><span class="s2">cfosu</span><span class="s0">\u07ac\u07b7\u07bc\u07c2\u07d0\u0100</span><span class="s2">iy</span><span class="s0">\u07b1\u07b5</span><span class="s2">rc;</span><span class="s0">\u4134</span><span class="s2">;</span><span class="s0">\u4419</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd0d</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd41\u01e3\u07c7\0\u07cc</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udca5</span><span class="s2">rcy;</span><span class="s0">\u4408</span><span class="s2">kcy;</span><span class="s0">\u4404\u0380</span><span class="s2">HJacfos</span><span class="s0">\u07e4\u07e8\u07ec\u07f1\u07fd\u0802\u0808</span><span class="s2">cy;</span><span class="s0">\u4425</span><span class="s2">cy;</span><span class="s0">\u440c</span><span class="s2">ppa;</span><span class="s0">\u439a\u0100</span><span class="s2">ey</span><span class="s0">\u07f6\u07fb</span><span class="s2">dil;</span><span class="s0">\u4136</span><span class="s2">;</span><span class="s0">\u441a</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd0e</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd42</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udca6\u0580</span><span class="s2">JTaceflmost</span><span class="s0">\u0825\u0829\u082c\u0850\u0863\u09b3\u09b8\u09c7\u09cd\u0a37\u0a47</span><span class="s2">cy;</span><span class="s0">\u4409\u803b</span><span class="s2">&lt;</span><span class="s0">\u403c\u0280</span><span class="s2">cmnpr</span><span class="s0">\u0837\u083c\u0841\u0844\u084d</span><span class="s2">ute;</span><span class="s0">\u4139</span><span class="s2">bda;</span><span class="s0">\u439b</span><span class="s2">g;</span><span class="s0">\u67ea</span><span class="s2">lacetrf;</span><span class="s0">\u6112</span><span class="s2">r;</span><span class="s0">\u619e\u0180</span><span class="s2">aey</span><span class="s0">\u0857\u085c\u0861</span><span class="s2">ron;</span><span class="s0">\u413d</span><span class="s2">dil;</span><span class="s0">\u413b</span><span class="s2">;</span><span class="s0">\u441b\u0100</span><span class="s2">fs</span><span class="s0">\u0868\u0970</span><span class="s2">t</span><span class="s0">\u0500</span><span class="s2">ACDFRTUVar</span><span class="s0">\u087e\u08a9\u08b1\u08e0\u08e6\u08fc\u092f\u095b\u0390\u096a\u0100</span><span class="s2">nr</span><span class="s0">\u0883\u088f</span><span class="s2">gleBracket;</span><span class="s0">\u67e8</span><span class="s2">row</span><span class="s0">\u0180</span><span class="s2">;BR</span><span class="s0">\u0899\u089a\u089e\u6190</span><span class="s2">ar;</span><span class="s0">\u61e4</span><span class="s2">ightArrow;</span><span class="s0">\u61c6</span><span class="s2">eiling;</span><span class="s0">\u6308</span><span class="s2">o</span><span class="s0">\u01f5\u08b7\0\u08c3</span><span class="s2">bleBracket;</span><span class="s0">\u67e6</span><span class="s2">n</span><span class="s0">\u01d4\u08c8\0\u08d2</span><span class="s2">eeVector;</span><span class="s0">\u6961</span><span class="s2">ector</span><span class="s0">\u0100</span><span class="s2">;B</span><span class="s0">\u08db\u08dc\u61c3</span><span class="s2">ar;</span><span class="s0">\u6959</span><span class="s2">loor;</span><span class="s0">\u630a</span><span class="s2">ight</span><span class="s0">\u0100</span><span class="s2">AV</span><span class="s0">\u08ef\u08f5</span><span class="s2">rrow;</span><span class="s0">\u6194</span><span class="s2">ector;</span><span class="s0">\u694e\u0100</span><span class="s2">er</span><span class="s0">\u0901\u0917</span><span class="s2">e</span><span class="s0">\u0180</span><span class="s2">;AV</span><span class="s0">\u0909\u090a\u0910\u62a3</span><span class="s2">rrow;</span><span class="s0">\u61a4</span><span class="s2">ector;</span><span class="s0">\u695a</span><span class="s2">iangle</span><span class="s0">\u0180</span><span class="s2">;BE</span><span class="s0">\u0924\u0925\u0929\u62b2</span><span class="s2">ar;</span><span class="s0">\u69cf</span><span class="s2">qual;</span><span class="s0">\u62b4</span><span class="s2">p</span><span class="s0">\u0180</span><span class="s2">DTV</span><span class="s0">\u0937\u0942\u094c</span><span class="s2">ownVector;</span><span class="s0">\u6951</span><span class="s2">eeVector;</span><span class="s0">\u6960</span><span class="s2">ector</span><span class="s0">\u0100</span><span class="s2">;B</span><span class="s0">\u0956\u0957\u61bf</span><span class="s2">ar;</span><span class="s0">\u6958</span><span class="s2">ector</span><span class="s0">\u0100</span><span class="s2">;B</span><span class="s0">\u0965\u0966\u61bc</span><span class="s2">ar;</span><span class="s0">\u6952</span><span class="s2">ight</span><span class="s0">\xe1\u039c</span><span class="s2">s</span><span class="s0">\u0300</span><span class="s2">EFGLST</span><span class="s0">\u097e\u098b\u0995\u099d\u09a2\u09ad</span><span class="s2">qualGreater;</span><span class="s0">\u62da</span><span class="s2">ullEqual;</span><span class="s0">\u6266</span><span class="s2">reater;</span><span class="s0">\u6276</span><span class="s2">ess;</span><span class="s0">\u6aa1</span><span class="s2">lantEqual;</span><span class="s0">\u6a7d</span><span class="s2">ilde;</span><span class="s0">\u6272</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd0f\u0100</span><span class="s2">;e</span><span class="s0">\u09bd\u09be\u62d8</span><span class="s2">ftarrow;</span><span class="s0">\u61da</span><span class="s2">idot;</span><span class="s0">\u413f\u0180</span><span class="s2">npw</span><span class="s0">\u09d4\u0a16\u0a1b</span><span class="s2">g</span><span class="s0">\u0200</span><span class="s2">LRlr</span><span class="s0">\u09de\u09f7\u0a02\u0a10</span><span class="s2">eft</span><span class="s0">\u0100</span><span class="s2">AR</span><span class="s0">\u09e6\u09ec</span><span class="s2">rrow;</span><span class="s0">\u67f5</span><span class="s2">ightArrow;</span><span class="s0">\u67f7</span><span class="s2">ightArrow;</span><span class="s0">\u67f6</span><span class="s2">eft</span><span class="s0">\u0100</span><span class="s2">ar</span><span class="s0">\u03b3\u0a0a</span><span class="s2">ight</span><span class="s0">\xe1\u03bf</span><span class="s2">ight</span><span class="s0">\xe1\u03ca</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd43</span><span class="s2">er</span><span class="s0">\u0100</span><span class="s2">LR</span><span class="s0">\u0a22\u0a2c</span><span class="s2">eftArrow;</span><span class="s0">\u6199</span><span class="s2">ightArrow;</span><span class="s0">\u6198\u0180</span><span class="s2">cht</span><span class="s0">\u0a3e\u0a40\u0a42\xf2\u084c</span><span class="s2">;</span><span class="s0">\u61b0</span><span class="s2">rok;</span><span class="s0">\u4141</span><span class="s2">;</span><span class="s0">\u626a\u0400</span><span class="s2">acefiosu</span><span class="s0">\u0a5a\u0a5d\u0a60\u0a77\u0a7c\u0a85\u0a8b\u0a8e</span><span class="s2">p;</span><span class="s0">\u6905</span><span class="s2">y;</span><span class="s0">\u441c\u0100</span><span class="s2">dl</span><span class="s0">\u0a65\u0a6f</span><span class="s2">iumSpace;</span><span class="s0">\u605f</span><span class="s2">lintrf;</span><span class="s0">\u6133</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd10</span><span class="s2">nusPlus;</span><span class="s0">\u6213</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd44</span><span class="s2">c</span><span class="s0">\xf2\u0a76</span><span class="s2">;</span><span class="s0">\u439c\u0480</span><span class="s2">Jacefostu</span><span class="s0">\u0aa3\u0aa7\u0aad\u0ac0\u0b14\u0b19\u0d91\u0d97\u0d9e</span><span class="s2">cy;</span><span class="s0">\u440a</span><span class="s2">cute;</span><span class="s0">\u4143\u0180</span><span class="s2">aey</span><span class="s0">\u0ab4\u0ab9\u0abe</span><span class="s2">ron;</span><span class="s0">\u4147</span><span class="s2">dil;</span><span class="s0">\u4145</span><span class="s2">;</span><span class="s0">\u441d\u0180</span><span class="s2">gsw</span><span class="s0">\u0ac7\u0af0\u0b0e</span><span class="s2">ative</span><span class="s0">\u0180</span><span class="s2">MTV</span><span class="s0">\u0ad3\u0adf\u0ae8</span><span class="s2">ediumSpace;</span><span class="s0">\u600b</span><span class="s2">hi</span><span class="s0">\u0100</span><span class="s2">cn</span><span class="s0">\u0ae6\u0ad8\xeb\u0ad9</span><span class="s2">eryThi</span><span class="s0">\xee\u0ad9</span><span class="s2">ted</span><span class="s0">\u0100</span><span class="s2">GL</span><span class="s0">\u0af8\u0b06</span><span class="s2">reaterGreate</span><span class="s0">\xf2\u0673</span><span class="s2">essLes</span><span class="s0">\xf3\u0a48</span><span class="s2">Line;</span><span class="s0">\u400a</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd11\u0200</span><span class="s2">Bnpt</span><span class="s0">\u0b22\u0b28\u0b37\u0b3a</span><span class="s2">reak;</span><span class="s0">\u6060</span><span class="s2">BreakingSpace;</span><span class="s0">\u40a0</span><span class="s2">f;</span><span class="s0">\u6115\u0680</span><span class="s2">;CDEGHLNPRSTV</span><span class="s0">\u0b55\u0b56\u0b6a\u0b7c\u0ba1\u0beb\u0c04\u0c5e\u0c84\u0ca6\u0cd8\u0d61\u0d85\u6aec\u0100</span><span class="s2">ou</span><span class="s0">\u0b5b\u0b64</span><span class="s2">ngruent;</span><span class="s0">\u6262</span><span class="s2">pCap;</span><span class="s0">\u626d</span><span class="s2">oubleVerticalBar;</span><span class="s0">\u6226\u0180</span><span class="s2">lqx</span><span class="s0">\u0b83\u0b8a\u0b9b</span><span class="s2">ement;</span><span class="s0">\u6209</span><span class="s2">ual</span><span class="s0">\u0100</span><span class="s2">;T</span><span class="s0">\u0b92\u0b93\u6260</span><span class="s2">ilde;</span><span class="s0">\uc000\u2242\u0338</span><span class="s2">ists;</span><span class="s0">\u6204</span><span class="s2">reater</span><span class="s0">\u0380</span><span class="s2">;EFGLST</span><span class="s0">\u0bb6\u0bb7\u0bbd\u0bc9\u0bd3\u0bd8\u0be5\u626f</span><span class="s2">qual;</span><span class="s0">\u6271</span><span class="s2">ullEqual;</span><span class="s0">\uc000\u2267\u0338</span><span class="s2">reater;</span><span class="s0">\uc000\u226b\u0338</span><span class="s2">ess;</span><span class="s0">\u6279</span><span class="s2">lantEqual;</span><span class="s0">\uc000\u2a7e\u0338</span><span class="s2">ilde;</span><span class="s0">\u6275</span><span class="s2">ump</span><span class="s0">\u0144\u0bf2\u0bfd</span><span class="s2">ownHump;</span><span class="s0">\uc000\u224e\u0338</span><span class="s2">qual;</span><span class="s0">\uc000\u224f\u0338</span><span class="s2">e</span><span class="s0">\u0100</span><span class="s2">fs</span><span class="s0">\u0c0a\u0c27</span><span class="s2">tTriangle</span><span class="s0">\u0180</span><span class="s2">;BE</span><span class="s0">\u0c1a\u0c1b\u0c21\u62ea</span><span class="s2">ar;</span><span class="s0">\uc000\u29cf\u0338</span><span class="s2">qual;</span><span class="s0">\u62ec</span><span class="s2">s</span><span class="s0">\u0300</span><span class="s2">;EGLST</span><span class="s0">\u0c35\u0c36\u0c3c\u0c44\u0c4b\u0c58\u626e</span><span class="s2">qual;</span><span class="s0">\u6270</span><span class="s2">reater;</span><span class="s0">\u6278</span><span class="s2">ess;</span><span class="s0">\uc000\u226a\u0338</span><span class="s2">lantEqual;</span><span class="s0">\uc000\u2a7d\u0338</span><span class="s2">ilde;</span><span class="s0">\u6274</span><span class="s2">ested</span><span class="s0">\u0100</span><span class="s2">GL</span><span class="s0">\u0c68\u0c79</span><span class="s2">reaterGreater;</span><span class="s0">\uc000\u2aa2\u0338</span><span class="s2">essLess;</span><span class="s0">\uc000\u2aa1\u0338</span><span class="s2">recedes</span><span class="s0">\u0180</span><span class="s2">;ES</span><span class="s0">\u0c92\u0c93\u0c9b\u6280</span><span class="s2">qual;</span><span class="s0">\uc000\u2aaf\u0338</span><span class="s2">lantEqual;</span><span class="s0">\u62e0\u0100</span><span class="s2">ei</span><span class="s0">\u0cab\u0cb9</span><span class="s2">verseElement;</span><span class="s0">\u620c</span><span class="s2">ghtTriangle</span><span class="s0">\u0180</span><span class="s2">;BE</span><span class="s0">\u0ccb\u0ccc\u0cd2\u62eb</span><span class="s2">ar;</span><span class="s0">\uc000\u29d0\u0338</span><span class="s2">qual;</span><span class="s0">\u62ed\u0100</span><span class="s2">qu</span><span class="s0">\u0cdd\u0d0c</span><span class="s2">uareSu</span><span class="s0">\u0100</span><span class="s2">bp</span><span class="s0">\u0ce8\u0cf9</span><span class="s2">set</span><span class="s0">\u0100</span><span class="s2">;E</span><span class="s0">\u0cf0\u0cf3\uc000\u228f\u0338</span><span class="s2">qual;</span><span class="s0">\u62e2</span><span class="s2">erset</span><span class="s0">\u0100</span><span class="s2">;E</span><span class="s0">\u0d03\u0d06\uc000\u2290\u0338</span><span class="s2">qual;</span><span class="s0">\u62e3\u0180</span><span class="s2">bcp</span><span class="s0">\u0d13\u0d24\u0d4e</span><span class="s2">set</span><span class="s0">\u0100</span><span class="s2">;E</span><span class="s0">\u0d1b\u0d1e\uc000\u2282\u20d2</span><span class="s2">qual;</span><span class="s0">\u6288</span><span class="s2">ceeds</span><span class="s0">\u0200</span><span class="s2">;EST</span><span class="s0">\u0d32\u0d33\u0d3b\u0d46\u6281</span><span class="s2">qual;</span><span class="s0">\uc000\u2ab0\u0338</span><span class="s2">lantEqual;</span><span class="s0">\u62e1</span><span class="s2">ilde;</span><span class="s0">\uc000\u227f\u0338</span><span class="s2">erset</span><span class="s0">\u0100</span><span class="s2">;E</span><span class="s0">\u0d58\u0d5b\uc000\u2283\u20d2</span><span class="s2">qual;</span><span class="s0">\u6289</span><span class="s2">ilde</span><span class="s0">\u0200</span><span class="s2">;EFT</span><span class="s0">\u0d6e\u0d6f\u0d75\u0d7f\u6241</span><span class="s2">qual;</span><span class="s0">\u6244</span><span class="s2">ullEqual;</span><span class="s0">\u6247</span><span class="s2">ilde;</span><span class="s0">\u6249</span><span class="s2">erticalBar;</span><span class="s0">\u6224</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udca9</span><span class="s2">ilde</span><span class="s0">\u803b\xd1\u40d1</span><span class="s2">;</span><span class="s0">\u439d\u0700</span><span class="s2">Eacdfgmoprstuv</span><span class="s0">\u0dbd\u0dc2\u0dc9\u0dd5\u0ddb\u0de0\u0de7\u0dfc\u0e02\u0e20\u0e22\u0e32\u0e3f\u0e44</span><span class="s2">lig;</span><span class="s0">\u4152</span><span class="s2">cute</span><span class="s0">\u803b\xd3\u40d3\u0100</span><span class="s2">iy</span><span class="s0">\u0dce\u0dd3</span><span class="s2">rc</span><span class="s0">\u803b\xd4\u40d4</span><span class="s2">;</span><span class="s0">\u441e</span><span class="s2">blac;</span><span class="s0">\u4150</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd12</span><span class="s2">rave</span><span class="s0">\u803b\xd2\u40d2\u0180</span><span class="s2">aei</span><span class="s0">\u0dee\u0df2\u0df6</span><span class="s2">cr;</span><span class="s0">\u414c</span><span class="s2">ga;</span><span class="s0">\u43a9</span><span class="s2">cron;</span><span class="s0">\u439f</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd46</span><span class="s2">enCurly</span><span class="s0">\u0100</span><span class="s2">DQ</span><span class="s0">\u0e0e\u0e1a</span><span class="s2">oubleQuote;</span><span class="s0">\u601c</span><span class="s2">uote;</span><span class="s0">\u6018</span><span class="s2">;</span><span class="s0">\u6a54\u0100</span><span class="s2">cl</span><span class="s0">\u0e27\u0e2c</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcaa</span><span class="s2">ash</span><span class="s0">\u803b\xd8\u40d8</span><span class="s2">i</span><span class="s0">\u016c\u0e37\u0e3c</span><span class="s2">de</span><span class="s0">\u803b\xd5\u40d5</span><span class="s2">es;</span><span class="s0">\u6a37</span><span class="s2">ml</span><span class="s0">\u803b\xd6\u40d6</span><span class="s2">er</span><span class="s0">\u0100</span><span class="s2">BP</span><span class="s0">\u0e4b\u0e60\u0100</span><span class="s2">ar</span><span class="s0">\u0e50\u0e53</span><span class="s2">r;</span><span class="s0">\u603e</span><span class="s2">ac</span><span class="s0">\u0100</span><span class="s2">ek</span><span class="s0">\u0e5a\u0e5c</span><span class="s2">;</span><span class="s0">\u63de</span><span class="s2">et;</span><span class="s0">\u63b4</span><span class="s2">arenthesis;</span><span class="s0">\u63dc\u0480</span><span class="s2">acfhilors</span><span class="s0">\u0e7f\u0e87\u0e8a\u0e8f\u0e92\u0e94\u0e9d\u0eb0\u0efc</span><span class="s2">rtialD;</span><span class="s0">\u6202</span><span class="s2">y;</span><span class="s0">\u441f</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd13</span><span class="s2">i;</span><span class="s0">\u43a6</span><span class="s2">;</span><span class="s0">\u43a0</span><span class="s2">usMinus;</span><span class="s0">\u40b1\u0100</span><span class="s2">ip</span><span class="s0">\u0ea2\u0ead</span><span class="s2">ncareplan</span><span class="s0">\xe5\u069d</span><span class="s2">f;</span><span class="s0">\u6119\u0200</span><span class="s2">;eio</span><span class="s0">\u0eb9\u0eba\u0ee0\u0ee4\u6abb</span><span class="s2">cedes</span><span class="s0">\u0200</span><span class="s2">;EST</span><span class="s0">\u0ec8\u0ec9\u0ecf\u0eda\u627a</span><span class="s2">qual;</span><span class="s0">\u6aaf</span><span class="s2">lantEqual;</span><span class="s0">\u627c</span><span class="s2">ilde;</span><span class="s0">\u627e</span><span class="s2">me;</span><span class="s0">\u6033\u0100</span><span class="s2">dp</span><span class="s0">\u0ee9\u0eee</span><span class="s2">uct;</span><span class="s0">\u620f</span><span class="s2">ortion</span><span class="s0">\u0100</span><span class="s2">;a</span><span class="s0">\u0225\u0ef9</span><span class="s2">l;</span><span class="s0">\u621d\u0100</span><span class="s2">ci</span><span class="s0">\u0f01\u0f06</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcab</span><span class="s2">;</span><span class="s0">\u43a8\u0200</span><span class="s2">Ufos</span><span class="s0">\u0f11\u0f16\u0f1b\u0f1f</span><span class="s2">OT</span><span class="s0">\u803b\&quot;\u4022</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd14</span><span class="s2">pf;</span><span class="s0">\u611a</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcac\u0600</span><span class="s2">BEacefhiorsu</span><span class="s0">\u0f3e\u0f43\u0f47\u0f60\u0f73\u0fa7\u0faa\u0fad\u1096\u10a9\u10b4\u10be</span><span class="s2">arr;</span><span class="s0">\u6910</span><span class="s2">G</span><span class="s0">\u803b\xae\u40ae\u0180</span><span class="s2">cnr</span><span class="s0">\u0f4e\u0f53\u0f56</span><span class="s2">ute;</span><span class="s0">\u4154</span><span class="s2">g;</span><span class="s0">\u67eb</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">;t</span><span class="s0">\u0f5c\u0f5d\u61a0</span><span class="s2">l;</span><span class="s0">\u6916\u0180</span><span class="s2">aey</span><span class="s0">\u0f67\u0f6c\u0f71</span><span class="s2">ron;</span><span class="s0">\u4158</span><span class="s2">dil;</span><span class="s0">\u4156</span><span class="s2">;</span><span class="s0">\u4420\u0100</span><span class="s2">;v</span><span class="s0">\u0f78\u0f79\u611c</span><span class="s2">erse</span><span class="s0">\u0100</span><span class="s2">EU</span><span class="s0">\u0f82\u0f99\u0100</span><span class="s2">lq</span><span class="s0">\u0f87\u0f8e</span><span class="s2">ement;</span><span class="s0">\u620b</span><span class="s2">uilibrium;</span><span class="s0">\u61cb</span><span class="s2">pEquilibrium;</span><span class="s0">\u696f</span><span class="s2">r</span><span class="s0">\xbb\u0f79</span><span class="s2">o;</span><span class="s0">\u43a1</span><span class="s2">ght</span><span class="s0">\u0400</span><span class="s2">ACDFTUVa</span><span class="s0">\u0fc1\u0feb\u0ff3\u1022\u1028\u105b\u1087\u03d8\u0100</span><span class="s2">nr</span><span class="s0">\u0fc6\u0fd2</span><span class="s2">gleBracket;</span><span class="s0">\u67e9</span><span class="s2">row</span><span class="s0">\u0180</span><span class="s2">;BL</span><span class="s0">\u0fdc\u0fdd\u0fe1\u6192</span><span class="s2">ar;</span><span class="s0">\u61e5</span><span class="s2">eftArrow;</span><span class="s0">\u61c4</span><span class="s2">eiling;</span><span class="s0">\u6309</span><span class="s2">o</span><span class="s0">\u01f5\u0ff9\0\u1005</span><span class="s2">bleBracket;</span><span class="s0">\u67e7</span><span class="s2">n</span><span class="s0">\u01d4\u100a\0\u1014</span><span class="s2">eeVector;</span><span class="s0">\u695d</span><span class="s2">ector</span><span class="s0">\u0100</span><span class="s2">;B</span><span class="s0">\u101d\u101e\u61c2</span><span class="s2">ar;</span><span class="s0">\u6955</span><span class="s2">loor;</span><span class="s0">\u630b\u0100</span><span class="s2">er</span><span class="s0">\u102d\u1043</span><span class="s2">e</span><span class="s0">\u0180</span><span class="s2">;AV</span><span class="s0">\u1035\u1036\u103c\u62a2</span><span class="s2">rrow;</span><span class="s0">\u61a6</span><span class="s2">ector;</span><span class="s0">\u695b</span><span class="s2">iangle</span><span class="s0">\u0180</span><span class="s2">;BE</span><span class="s0">\u1050\u1051\u1055\u62b3</span><span class="s2">ar;</span><span class="s0">\u69d0</span><span class="s2">qual;</span><span class="s0">\u62b5</span><span class="s2">p</span><span class="s0">\u0180</span><span class="s2">DTV</span><span class="s0">\u1063\u106e\u1078</span><span class="s2">ownVector;</span><span class="s0">\u694f</span><span class="s2">eeVector;</span><span class="s0">\u695c</span><span class="s2">ector</span><span class="s0">\u0100</span><span class="s2">;B</span><span class="s0">\u1082\u1083\u61be</span><span class="s2">ar;</span><span class="s0">\u6954</span><span class="s2">ector</span><span class="s0">\u0100</span><span class="s2">;B</span><span class="s0">\u1091\u1092\u61c0</span><span class="s2">ar;</span><span class="s0">\u6953\u0100</span><span class="s2">pu</span><span class="s0">\u109b\u109e</span><span class="s2">f;</span><span class="s0">\u611d</span><span class="s2">ndImplies;</span><span class="s0">\u6970</span><span class="s2">ightarrow;</span><span class="s0">\u61db\u0100</span><span class="s2">ch</span><span class="s0">\u10b9\u10bc</span><span class="s2">r;</span><span class="s0">\u611b</span><span class="s2">;</span><span class="s0">\u61b1</span><span class="s2">leDelayed;</span><span class="s0">\u69f4\u0680</span><span class="s2">HOacfhimoqstu</span><span class="s0">\u10e4\u10f1\u10f7\u10fd\u1119\u111e\u1151\u1156\u1161\u1167\u11b5\u11bb\u11bf\u0100</span><span class="s2">Cc</span><span class="s0">\u10e9\u10ee</span><span class="s2">Hcy;</span><span class="s0">\u4429</span><span class="s2">y;</span><span class="s0">\u4428</span><span class="s2">FTcy;</span><span class="s0">\u442c</span><span class="s2">cute;</span><span class="s0">\u415a\u0280</span><span class="s2">;aeiy</span><span class="s0">\u1108\u1109\u110e\u1113\u1117\u6abc</span><span class="s2">ron;</span><span class="s0">\u4160</span><span class="s2">dil;</span><span class="s0">\u415e</span><span class="s2">rc;</span><span class="s0">\u415c</span><span class="s2">;</span><span class="s0">\u4421</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd16</span><span class="s2">ort</span><span class="s0">\u0200</span><span class="s2">DLRU</span><span class="s0">\u112a\u1134\u113e\u1149</span><span class="s2">ownArrow</span><span class="s0">\xbb\u041e</span><span class="s2">eftArrow</span><span class="s0">\xbb\u089a</span><span class="s2">ightArrow</span><span class="s0">\xbb\u0fdd</span><span class="s2">pArrow;</span><span class="s0">\u6191</span><span class="s2">gma;</span><span class="s0">\u43a3</span><span class="s2">allCircle;</span><span class="s0">\u6218</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd4a\u0272\u116d\0\0\u1170</span><span class="s2">t;</span><span class="s0">\u621a</span><span class="s2">are</span><span class="s0">\u0200</span><span class="s2">;ISU</span><span class="s0">\u117b\u117c\u1189\u11af\u65a1</span><span class="s2">ntersection;</span><span class="s0">\u6293</span><span class="s2">u</span><span class="s0">\u0100</span><span class="s2">bp</span><span class="s0">\u118f\u119e</span><span class="s2">set</span><span class="s0">\u0100</span><span class="s2">;E</span><span class="s0">\u1197\u1198\u628f</span><span class="s2">qual;</span><span class="s0">\u6291</span><span class="s2">erset</span><span class="s0">\u0100</span><span class="s2">;E</span><span class="s0">\u11a8\u11a9\u6290</span><span class="s2">qual;</span><span class="s0">\u6292</span><span class="s2">nion;</span><span class="s0">\u6294</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcae</span><span class="s2">ar;</span><span class="s0">\u62c6\u0200</span><span class="s2">bcmp</span><span class="s0">\u11c8\u11db\u1209\u120b\u0100</span><span class="s2">;s</span><span class="s0">\u11cd\u11ce\u62d0</span><span class="s2">et</span><span class="s0">\u0100</span><span class="s2">;E</span><span class="s0">\u11cd\u11d5</span><span class="s2">qual;</span><span class="s0">\u6286\u0100</span><span class="s2">ch</span><span class="s0">\u11e0\u1205</span><span class="s2">eeds</span><span class="s0">\u0200</span><span class="s2">;EST</span><span class="s0">\u11ed\u11ee\u11f4\u11ff\u627b</span><span class="s2">qual;</span><span class="s0">\u6ab0</span><span class="s2">lantEqual;</span><span class="s0">\u627d</span><span class="s2">ilde;</span><span class="s0">\u627f</span><span class="s2">Th</span><span class="s0">\xe1\u0f8c</span><span class="s2">;</span><span class="s0">\u6211\u0180</span><span class="s2">;es</span><span class="s0">\u1212\u1213\u1223\u62d1</span><span class="s2">rset</span><span class="s0">\u0100</span><span class="s2">;E</span><span class="s0">\u121c\u121d\u6283</span><span class="s2">qual;</span><span class="s0">\u6287</span><span class="s2">et</span><span class="s0">\xbb\u1213\u0580</span><span class="s2">HRSacfhiors</span><span class="s0">\u123e\u1244\u1249\u1255\u125e\u1271\u1276\u129f\u12c2\u12c8\u12d1</span><span class="s2">ORN</span><span class="s0">\u803b\xde\u40de</span><span class="s2">ADE;</span><span class="s0">\u6122\u0100</span><span class="s2">Hc</span><span class="s0">\u124e\u1252</span><span class="s2">cy;</span><span class="s0">\u440b</span><span class="s2">y;</span><span class="s0">\u4426\u0100</span><span class="s2">bu</span><span class="s0">\u125a\u125c</span><span class="s2">;</span><span class="s0">\u4009</span><span class="s2">;</span><span class="s0">\u43a4\u0180</span><span class="s2">aey</span><span class="s0">\u1265\u126a\u126f</span><span class="s2">ron;</span><span class="s0">\u4164</span><span class="s2">dil;</span><span class="s0">\u4162</span><span class="s2">;</span><span class="s0">\u4422</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd17\u0100</span><span class="s2">ei</span><span class="s0">\u127b\u1289\u01f2\u1280\0\u1287</span><span class="s2">efore;</span><span class="s0">\u6234</span><span class="s2">a;</span><span class="s0">\u4398\u0100</span><span class="s2">cn</span><span class="s0">\u128e\u1298</span><span class="s2">kSpace;</span><span class="s0">\uc000\u205f\u200a</span><span class="s2">Space;</span><span class="s0">\u6009</span><span class="s2">lde</span><span class="s0">\u0200</span><span class="s2">;EFT</span><span class="s0">\u12ab\u12ac\u12b2\u12bc\u623c</span><span class="s2">qual;</span><span class="s0">\u6243</span><span class="s2">ullEqual;</span><span class="s0">\u6245</span><span class="s2">ilde;</span><span class="s0">\u6248</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd4b</span><span class="s2">ipleDot;</span><span class="s0">\u60db\u0100</span><span class="s2">ct</span><span class="s0">\u12d6\u12db</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcaf</span><span class="s2">rok;</span><span class="s0">\u4166\u0ae1\u12f7\u130e\u131a\u1326\0\u132c\u1331\0\0\0\0\0\u1338\u133d\u1377\u1385\0\u13ff\u1404\u140a\u1410\u0100</span><span class="s2">cr</span><span class="s0">\u12fb\u1301</span><span class="s2">ute</span><span class="s0">\u803b\xda\u40da</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">;o</span><span class="s0">\u1307\u1308\u619f</span><span class="s2">cir;</span><span class="s0">\u6949</span><span class="s2">r</span><span class="s0">\u01e3\u1313\0\u1316</span><span class="s2">y;</span><span class="s0">\u440e</span><span class="s2">ve;</span><span class="s0">\u416c\u0100</span><span class="s2">iy</span><span class="s0">\u131e\u1323</span><span class="s2">rc</span><span class="s0">\u803b\xdb\u40db</span><span class="s2">;</span><span class="s0">\u4423</span><span class="s2">blac;</span><span class="s0">\u4170</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd18</span><span class="s2">rave</span><span class="s0">\u803b\xd9\u40d9</span><span class="s2">acr;</span><span class="s0">\u416a\u0100</span><span class="s2">di</span><span class="s0">\u1341\u1369</span><span class="s2">er</span><span class="s0">\u0100</span><span class="s2">BP</span><span class="s0">\u1348\u135d\u0100</span><span class="s2">ar</span><span class="s0">\u134d\u1350</span><span class="s2">r;</span><span class="s0">\u405f</span><span class="s2">ac</span><span class="s0">\u0100</span><span class="s2">ek</span><span class="s0">\u1357\u1359</span><span class="s2">;</span><span class="s0">\u63df</span><span class="s2">et;</span><span class="s0">\u63b5</span><span class="s2">arenthesis;</span><span class="s0">\u63dd</span><span class="s2">on</span><span class="s0">\u0100</span><span class="s2">;P</span><span class="s0">\u1370\u1371\u62c3</span><span class="s2">lus;</span><span class="s0">\u628e\u0100</span><span class="s2">gp</span><span class="s0">\u137b\u137f</span><span class="s2">on;</span><span class="s0">\u4172</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd4c\u0400</span><span class="s2">ADETadps</span><span class="s0">\u1395\u13ae\u13b8\u13c4\u03e8\u13d2\u13d7\u13f3</span><span class="s2">rrow</span><span class="s0">\u0180</span><span class="s2">;BD</span><span class="s0">\u1150\u13a0\u13a4</span><span class="s2">ar;</span><span class="s0">\u6912</span><span class="s2">ownArrow;</span><span class="s0">\u61c5</span><span class="s2">ownArrow;</span><span class="s0">\u6195</span><span class="s2">quilibrium;</span><span class="s0">\u696e</span><span class="s2">ee</span><span class="s0">\u0100</span><span class="s2">;A</span><span class="s0">\u13cb\u13cc\u62a5</span><span class="s2">rrow;</span><span class="s0">\u61a5</span><span class="s2">own</span><span class="s0">\xe1\u03f3</span><span class="s2">er</span><span class="s0">\u0100</span><span class="s2">LR</span><span class="s0">\u13de\u13e8</span><span class="s2">eftArrow;</span><span class="s0">\u6196</span><span class="s2">ightArrow;</span><span class="s0">\u6197</span><span class="s2">i</span><span class="s0">\u0100</span><span class="s2">;l</span><span class="s0">\u13f9\u13fa\u43d2</span><span class="s2">on;</span><span class="s0">\u43a5</span><span class="s2">ing;</span><span class="s0">\u416e</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcb0</span><span class="s2">ilde;</span><span class="s0">\u4168</span><span class="s2">ml</span><span class="s0">\u803b\xdc\u40dc\u0480</span><span class="s2">Dbcdefosv</span><span class="s0">\u1427\u142c\u1430\u1433\u143e\u1485\u148a\u1490\u1496</span><span class="s2">ash;</span><span class="s0">\u62ab</span><span class="s2">ar;</span><span class="s0">\u6aeb</span><span class="s2">y;</span><span class="s0">\u4412</span><span class="s2">ash</span><span class="s0">\u0100</span><span class="s2">;l</span><span class="s0">\u143b\u143c\u62a9</span><span class="s2">;</span><span class="s0">\u6ae6\u0100</span><span class="s2">er</span><span class="s0">\u1443\u1445</span><span class="s2">;</span><span class="s0">\u62c1\u0180</span><span class="s2">bty</span><span class="s0">\u144c\u1450\u147a</span><span class="s2">ar;</span><span class="s0">\u6016\u0100</span><span class="s2">;i</span><span class="s0">\u144f\u1455</span><span class="s2">cal</span><span class="s0">\u0200</span><span class="s2">BLST</span><span class="s0">\u1461\u1465\u146a\u1474</span><span class="s2">ar;</span><span class="s0">\u6223</span><span class="s2">ine;</span><span class="s0">\u407c</span><span class="s2">eparator;</span><span class="s0">\u6758</span><span class="s2">ilde;</span><span class="s0">\u6240</span><span class="s2">ThinSpace;</span><span class="s0">\u600a</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd19</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd4d</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcb1</span><span class="s2">dash;</span><span class="s0">\u62aa\u0280</span><span class="s2">cefos</span><span class="s0">\u14a7\u14ac\u14b1\u14b6\u14bc</span><span class="s2">irc;</span><span class="s0">\u4174</span><span class="s2">dge;</span><span class="s0">\u62c0</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd1a</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd4e</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcb2\u0200</span><span class="s2">fios</span><span class="s0">\u14cb\u14d0\u14d2\u14d8</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd1b</span><span class="s2">;</span><span class="s0">\u439e</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd4f</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcb3\u0480</span><span class="s2">AIUacfosu</span><span class="s0">\u14f1\u14f5\u14f9\u14fd\u1504\u150f\u1514\u151a\u1520</span><span class="s2">cy;</span><span class="s0">\u442f</span><span class="s2">cy;</span><span class="s0">\u4407</span><span class="s2">cy;</span><span class="s0">\u442e</span><span class="s2">cute</span><span class="s0">\u803b\xdd\u40dd\u0100</span><span class="s2">iy</span><span class="s0">\u1509\u150d</span><span class="s2">rc;</span><span class="s0">\u4176</span><span class="s2">;</span><span class="s0">\u442b</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd1c</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd50</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcb4</span><span class="s2">ml;</span><span class="s0">\u4178\u0400</span><span class="s2">Hacdefos</span><span class="s0">\u1535\u1539\u153f\u154b\u154f\u155d\u1560\u1564</span><span class="s2">cy;</span><span class="s0">\u4416</span><span class="s2">cute;</span><span class="s0">\u4179\u0100</span><span class="s2">ay</span><span class="s0">\u1544\u1549</span><span class="s2">ron;</span><span class="s0">\u417d</span><span class="s2">;</span><span class="s0">\u4417</span><span class="s2">ot;</span><span class="s0">\u417b\u01f2\u1554\0\u155b</span><span class="s2">oWidt</span><span class="s0">\xe8\u0ad9</span><span class="s2">a;</span><span class="s0">\u4396</span><span class="s2">r;</span><span class="s0">\u6128</span><span class="s2">pf;</span><span class="s0">\u6124</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcb5\u0be1\u1583\u158a\u1590\0\u15b0\u15b6\u15bf\0\0\0\0\u15c6\u15db\u15eb\u165f\u166d\0\u1695\u169b\u16b2\u16b9\0\u16be</span><span class="s2">cute</span><span class="s0">\u803b\xe1\u40e1</span><span class="s2">reve;</span><span class="s0">\u4103\u0300</span><span class="s2">;Ediuy</span><span class="s0">\u159c\u159d\u15a1\u15a3\u15a8\u15ad\u623e</span><span class="s2">;</span><span class="s0">\uc000\u223e\u0333</span><span class="s2">;</span><span class="s0">\u623f</span><span class="s2">rc</span><span class="s0">\u803b\xe2\u40e2</span><span class="s2">te</span><span class="s0">\u80bb\xb4\u0306</span><span class="s2">;</span><span class="s0">\u4430</span><span class="s2">lig</span><span class="s0">\u803b\xe6\u40e6\u0100</span><span class="s2">;r</span><span class="s0">\xb2\u15ba</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd1e</span><span class="s2">rave</span><span class="s0">\u803b\xe0\u40e0\u0100</span><span class="s2">ep</span><span class="s0">\u15ca\u15d6\u0100</span><span class="s2">fp</span><span class="s0">\u15cf\u15d4</span><span class="s2">sym;</span><span class="s0">\u6135\xe8\u15d3</span><span class="s2">ha;</span><span class="s0">\u43b1\u0100</span><span class="s2">ap</span><span class="s0">\u15df</span><span class="s2">c</span><span class="s0">\u0100</span><span class="s2">cl</span><span class="s0">\u15e4\u15e7</span><span class="s2">r;</span><span class="s0">\u4101</span><span class="s2">g;</span><span class="s0">\u6a3f\u0264\u15f0\0\0\u160a\u0280</span><span class="s2">;adsv</span><span class="s0">\u15fa\u15fb\u15ff\u1601\u1607\u6227</span><span class="s2">nd;</span><span class="s0">\u6a55</span><span class="s2">;</span><span class="s0">\u6a5c</span><span class="s2">lope;</span><span class="s0">\u6a58</span><span class="s2">;</span><span class="s0">\u6a5a\u0380</span><span class="s2">;elmrsz</span><span class="s0">\u1618\u1619\u161b\u161e\u163f\u164f\u1659\u6220</span><span class="s2">;</span><span class="s0">\u69a4</span><span class="s2">e</span><span class="s0">\xbb\u1619</span><span class="s2">sd</span><span class="s0">\u0100</span><span class="s2">;a</span><span class="s0">\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163a\u163c\u163e</span><span class="s2">;</span><span class="s0">\u69a8</span><span class="s2">;</span><span class="s0">\u69a9</span><span class="s2">;</span><span class="s0">\u69aa</span><span class="s2">;</span><span class="s0">\u69ab</span><span class="s2">;</span><span class="s0">\u69ac</span><span class="s2">;</span><span class="s0">\u69ad</span><span class="s2">;</span><span class="s0">\u69ae</span><span class="s2">;</span><span class="s0">\u69af</span><span class="s2">t</span><span class="s0">\u0100</span><span class="s2">;v</span><span class="s0">\u1645\u1646\u621f</span><span class="s2">b</span><span class="s0">\u0100</span><span class="s2">;d</span><span class="s0">\u164c\u164d\u62be</span><span class="s2">;</span><span class="s0">\u699d\u0100</span><span class="s2">pt</span><span class="s0">\u1654\u1657</span><span class="s2">h;</span><span class="s0">\u6222\xbb\xb9</span><span class="s2">arr;</span><span class="s0">\u637c\u0100</span><span class="s2">gp</span><span class="s0">\u1663\u1667</span><span class="s2">on;</span><span class="s0">\u4105</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd52\u0380</span><span class="s2">;Eaeiop</span><span class="s0">\u12c1\u167b\u167d\u1682\u1684\u1687\u168a</span><span class="s2">;</span><span class="s0">\u6a70</span><span class="s2">cir;</span><span class="s0">\u6a6f</span><span class="s2">;</span><span class="s0">\u624a</span><span class="s2">d;</span><span class="s0">\u624b</span><span class="s2">s;</span><span class="s0">\u4027</span><span class="s2">rox</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u12c1\u1692\xf1\u1683</span><span class="s2">ing</span><span class="s0">\u803b\xe5\u40e5\u0180</span><span class="s2">cty</span><span class="s0">\u16a1\u16a6\u16a8</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcb6</span><span class="s2">;</span><span class="s0">\u402a</span><span class="s2">mp</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u12c1\u16af\xf1\u0288</span><span class="s2">ilde</span><span class="s0">\u803b\xe3\u40e3</span><span class="s2">ml</span><span class="s0">\u803b\xe4\u40e4\u0100</span><span class="s2">ci</span><span class="s0">\u16c2\u16c8</span><span class="s2">onin</span><span class="s0">\xf4\u0272</span><span class="s2">nt;</span><span class="s0">\u6a11\u0800</span><span class="s2">Nabcdefiklnoprsu</span><span class="s0">\u16ed\u16f1\u1730\u173c\u1743\u1748\u1778\u177d\u17e0\u17e6\u1839\u1850\u170d\u193d\u1948\u1970</span><span class="s2">ot;</span><span class="s0">\u6aed\u0100</span><span class="s2">cr</span><span class="s0">\u16f6\u171e</span><span class="s2">k</span><span class="s0">\u0200</span><span class="s2">ceps</span><span class="s0">\u1700\u1705\u170d\u1713</span><span class="s2">ong;</span><span class="s0">\u624c</span><span class="s2">psilon;</span><span class="s0">\u43f6</span><span class="s2">rime;</span><span class="s0">\u6035</span><span class="s2">im</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u171a\u171b\u623d</span><span class="s2">q;</span><span class="s0">\u62cd\u0176\u1722\u1726</span><span class="s2">ee;</span><span class="s0">\u62bd</span><span class="s2">ed</span><span class="s0">\u0100</span><span class="s2">;g</span><span class="s0">\u172c\u172d\u6305</span><span class="s2">e</span><span class="s0">\xbb\u172d</span><span class="s2">rk</span><span class="s0">\u0100</span><span class="s2">;t</span><span class="s0">\u135c\u1737</span><span class="s2">brk;</span><span class="s0">\u63b6\u0100</span><span class="s2">oy</span><span class="s0">\u1701\u1741</span><span class="s2">;</span><span class="s0">\u4431</span><span class="s2">quo;</span><span class="s0">\u601e\u0280</span><span class="s2">cmprt</span><span class="s0">\u1753\u175b\u1761\u1764\u1768</span><span class="s2">aus</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u010a\u0109</span><span class="s2">ptyv;</span><span class="s0">\u69b0</span><span class="s2">s</span><span class="s0">\xe9\u170c</span><span class="s2">no</span><span class="s0">\xf5\u0113\u0180</span><span class="s2">ahw</span><span class="s0">\u176f\u1771\u1773</span><span class="s2">;</span><span class="s0">\u43b2</span><span class="s2">;</span><span class="s0">\u6136</span><span class="s2">een;</span><span class="s0">\u626c</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd1f</span><span class="s2">g</span><span class="s0">\u0380</span><span class="s2">costuvw</span><span class="s0">\u178d\u179d\u17b3\u17c1\u17d5\u17db\u17de\u0180</span><span class="s2">aiu</span><span class="s0">\u1794\u1796\u179a\xf0\u0760</span><span class="s2">rc;</span><span class="s0">\u65ef</span><span class="s2">p</span><span class="s0">\xbb\u1371\u0180</span><span class="s2">dpt</span><span class="s0">\u17a4\u17a8\u17ad</span><span class="s2">ot;</span><span class="s0">\u6a00</span><span class="s2">lus;</span><span class="s0">\u6a01</span><span class="s2">imes;</span><span class="s0">\u6a02\u0271\u17b9\0\0\u17be</span><span class="s2">cup;</span><span class="s0">\u6a06</span><span class="s2">ar;</span><span class="s0">\u6605</span><span class="s2">riangle</span><span class="s0">\u0100</span><span class="s2">du</span><span class="s0">\u17cd\u17d2</span><span class="s2">own;</span><span class="s0">\u65bd</span><span class="s2">p;</span><span class="s0">\u65b3</span><span class="s2">plus;</span><span class="s0">\u6a04</span><span class="s2">e</span><span class="s0">\xe5\u1444\xe5\u14ad</span><span class="s2">arow;</span><span class="s0">\u690d\u0180</span><span class="s2">ako</span><span class="s0">\u17ed\u1826\u1835\u0100</span><span class="s2">cn</span><span class="s0">\u17f2\u1823</span><span class="s2">k</span><span class="s0">\u0180</span><span class="s2">lst</span><span class="s0">\u17fa\u05ab\u1802</span><span class="s2">ozenge;</span><span class="s0">\u69eb</span><span class="s2">riangle</span><span class="s0">\u0200</span><span class="s2">;dlr</span><span class="s0">\u1812\u1813\u1818\u181d\u65b4</span><span class="s2">own;</span><span class="s0">\u65be</span><span class="s2">eft;</span><span class="s0">\u65c2</span><span class="s2">ight;</span><span class="s0">\u65b8</span><span class="s2">k;</span><span class="s0">\u6423\u01b1\u182b\0\u1833\u01b2\u182f\0\u1831</span><span class="s2">;</span><span class="s0">\u6592</span><span class="s2">;</span><span class="s0">\u6591</span><span class="s2">4;</span><span class="s0">\u6593</span><span class="s2">ck;</span><span class="s0">\u6588\u0100</span><span class="s2">eo</span><span class="s0">\u183e\u184d\u0100</span><span class="s2">;q</span><span class="s0">\u1843\u1846\uc000</span><span class="s2">=</span><span class="s0">\u20e5</span><span class="s2">uiv;</span><span class="s0">\uc000\u2261\u20e5</span><span class="s2">t;</span><span class="s0">\u6310\u0200</span><span class="s2">ptwx</span><span class="s0">\u1859\u185e\u1867\u186c</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd53\u0100</span><span class="s2">;t</span><span class="s0">\u13cb\u1863</span><span class="s2">om</span><span class="s0">\xbb\u13cc</span><span class="s2">tie;</span><span class="s0">\u62c8\u0600</span><span class="s2">DHUVbdhmptuv</span><span class="s0">\u1885\u1896\u18aa\u18bb\u18d7\u18db\u18ec\u18ff\u1905\u190a\u1910\u1921\u0200</span><span class="s2">LRlr</span><span class="s0">\u188e\u1890\u1892\u1894</span><span class="s2">;</span><span class="s0">\u6557</span><span class="s2">;</span><span class="s0">\u6554</span><span class="s2">;</span><span class="s0">\u6556</span><span class="s2">;</span><span class="s0">\u6553\u0280</span><span class="s2">;DUdu</span><span class="s0">\u18a1\u18a2\u18a4\u18a6\u18a8\u6550</span><span class="s2">;</span><span class="s0">\u6566</span><span class="s2">;</span><span class="s0">\u6569</span><span class="s2">;</span><span class="s0">\u6564</span><span class="s2">;</span><span class="s0">\u6567\u0200</span><span class="s2">LRlr</span><span class="s0">\u18b3\u18b5\u18b7\u18b9</span><span class="s2">;</span><span class="s0">\u655d</span><span class="s2">;</span><span class="s0">\u655a</span><span class="s2">;</span><span class="s0">\u655c</span><span class="s2">;</span><span class="s0">\u6559\u0380</span><span class="s2">;HLRhlr</span><span class="s0">\u18ca\u18cb\u18cd\u18cf\u18d1\u18d3\u18d5\u6551</span><span class="s2">;</span><span class="s0">\u656c</span><span class="s2">;</span><span class="s0">\u6563</span><span class="s2">;</span><span class="s0">\u6560</span><span class="s2">;</span><span class="s0">\u656b</span><span class="s2">;</span><span class="s0">\u6562</span><span class="s2">;</span><span class="s0">\u655f</span><span class="s2">ox;</span><span class="s0">\u69c9\u0200</span><span class="s2">LRlr</span><span class="s0">\u18e4\u18e6\u18e8\u18ea</span><span class="s2">;</span><span class="s0">\u6555</span><span class="s2">;</span><span class="s0">\u6552</span><span class="s2">;</span><span class="s0">\u6510</span><span class="s2">;</span><span class="s0">\u650c\u0280</span><span class="s2">;DUdu</span><span class="s0">\u06bd\u18f7\u18f9\u18fb\u18fd</span><span class="s2">;</span><span class="s0">\u6565</span><span class="s2">;</span><span class="s0">\u6568</span><span class="s2">;</span><span class="s0">\u652c</span><span class="s2">;</span><span class="s0">\u6534</span><span class="s2">inus;</span><span class="s0">\u629f</span><span class="s2">lus;</span><span class="s0">\u629e</span><span class="s2">imes;</span><span class="s0">\u62a0\u0200</span><span class="s2">LRlr</span><span class="s0">\u1919\u191b\u191d\u191f</span><span class="s2">;</span><span class="s0">\u655b</span><span class="s2">;</span><span class="s0">\u6558</span><span class="s2">;</span><span class="s0">\u6518</span><span class="s2">;</span><span class="s0">\u6514\u0380</span><span class="s2">;HLRhlr</span><span class="s0">\u1930\u1931\u1933\u1935\u1937\u1939\u193b\u6502</span><span class="s2">;</span><span class="s0">\u656a</span><span class="s2">;</span><span class="s0">\u6561</span><span class="s2">;</span><span class="s0">\u655e</span><span class="s2">;</span><span class="s0">\u653c</span><span class="s2">;</span><span class="s0">\u6524</span><span class="s2">;</span><span class="s0">\u651c\u0100</span><span class="s2">ev</span><span class="s0">\u0123\u1942</span><span class="s2">bar</span><span class="s0">\u803b\xa6\u40a6\u0200</span><span class="s2">ceio</span><span class="s0">\u1951\u1956\u195a\u1960</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcb7</span><span class="s2">mi;</span><span class="s0">\u604f</span><span class="s2">m</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u171a\u171c</span><span class="s2">l</span><span class="s0">\u0180</span><span class="s2">;bh</span><span class="s0">\u1968\u1969\u196b\u405c</span><span class="s2">;</span><span class="s0">\u69c5</span><span class="s2">sub;</span><span class="s0">\u67c8\u016c\u1974\u197e</span><span class="s2">l</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u1979\u197a\u6022</span><span class="s2">t</span><span class="s0">\xbb\u197a</span><span class="s2">p</span><span class="s0">\u0180</span><span class="s2">;Ee</span><span class="s0">\u012f\u1985\u1987</span><span class="s2">;</span><span class="s0">\u6aae\u0100</span><span class="s2">;q</span><span class="s0">\u06dc\u06db\u0ce1\u19a7\0\u19e8\u1a11\u1a15\u1a32\0\u1a37\u1a50\0\0\u1ab4\0\0\u1ac1\0\0\u1b21\u1b2e\u1b4d\u1b52\0\u1bfd\0\u1c0c\u0180</span><span class="s2">cpr</span><span class="s0">\u19ad\u19b2\u19dd</span><span class="s2">ute;</span><span class="s0">\u4107\u0300</span><span class="s2">;abcds</span><span class="s0">\u19bf\u19c0\u19c4\u19ca\u19d5\u19d9\u6229</span><span class="s2">nd;</span><span class="s0">\u6a44</span><span class="s2">rcup;</span><span class="s0">\u6a49\u0100</span><span class="s2">au</span><span class="s0">\u19cf\u19d2</span><span class="s2">p;</span><span class="s0">\u6a4b</span><span class="s2">p;</span><span class="s0">\u6a47</span><span class="s2">ot;</span><span class="s0">\u6a40</span><span class="s2">;</span><span class="s0">\uc000\u2229\ufe00\u0100</span><span class="s2">eo</span><span class="s0">\u19e2\u19e5</span><span class="s2">t;</span><span class="s0">\u6041\xee\u0693\u0200</span><span class="s2">aeiu</span><span class="s0">\u19f0\u19fb\u1a01\u1a05\u01f0\u19f5\0\u19f8</span><span class="s2">s;</span><span class="s0">\u6a4d</span><span class="s2">on;</span><span class="s0">\u410d</span><span class="s2">dil</span><span class="s0">\u803b\xe7\u40e7</span><span class="s2">rc;</span><span class="s0">\u4109</span><span class="s2">ps</span><span class="s0">\u0100</span><span class="s2">;s</span><span class="s0">\u1a0c\u1a0d\u6a4c</span><span class="s2">m;</span><span class="s0">\u6a50</span><span class="s2">ot;</span><span class="s0">\u410b\u0180</span><span class="s2">dmn</span><span class="s0">\u1a1b\u1a20\u1a26</span><span class="s2">il</span><span class="s0">\u80bb\xb8\u01ad</span><span class="s2">ptyv;</span><span class="s0">\u69b2</span><span class="s2">t</span><span class="s0">\u8100\xa2</span><span class="s2">;e</span><span class="s0">\u1a2d\u1a2e\u40a2</span><span class="s2">r</span><span class="s0">\xe4\u01b2</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd20\u0180</span><span class="s2">cei</span><span class="s0">\u1a3d\u1a40\u1a4d</span><span class="s2">y;</span><span class="s0">\u4447</span><span class="s2">ck</span><span class="s0">\u0100</span><span class="s2">;m</span><span class="s0">\u1a47\u1a48\u6713</span><span class="s2">ark</span><span class="s0">\xbb\u1a48</span><span class="s2">;</span><span class="s0">\u43c7</span><span class="s2">r</span><span class="s0">\u0380</span><span class="s2">;Ecefms</span><span class="s0">\u1a5f\u1a60\u1a62\u1a6b\u1aa4\u1aaa\u1aae\u65cb</span><span class="s2">;</span><span class="s0">\u69c3\u0180</span><span class="s2">;el</span><span class="s0">\u1a69\u1a6a\u1a6d\u42c6</span><span class="s2">q;</span><span class="s0">\u6257</span><span class="s2">e</span><span class="s0">\u0261\u1a74\0\0\u1a88</span><span class="s2">rrow</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u1a7c\u1a81</span><span class="s2">eft;</span><span class="s0">\u61ba</span><span class="s2">ight;</span><span class="s0">\u61bb\u0280</span><span class="s2">RSacd</span><span class="s0">\u1a92\u1a94\u1a96\u1a9a\u1a9f\xbb\u0f47</span><span class="s2">;</span><span class="s0">\u64c8</span><span class="s2">st;</span><span class="s0">\u629b</span><span class="s2">irc;</span><span class="s0">\u629a</span><span class="s2">ash;</span><span class="s0">\u629d</span><span class="s2">nint;</span><span class="s0">\u6a10</span><span class="s2">id;</span><span class="s0">\u6aef</span><span class="s2">cir;</span><span class="s0">\u69c2</span><span class="s2">ubs</span><span class="s0">\u0100</span><span class="s2">;u</span><span class="s0">\u1abb\u1abc\u6663</span><span class="s2">it</span><span class="s0">\xbb\u1abc\u02ec\u1ac7\u1ad4\u1afa\0\u1b0a</span><span class="s2">on</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u1acd\u1ace\u403a\u0100</span><span class="s2">;q</span><span class="s0">\xc7\xc6\u026d\u1ad9\0\0\u1ae2</span><span class="s2">a</span><span class="s0">\u0100</span><span class="s2">;t</span><span class="s0">\u1ade\u1adf\u402c</span><span class="s2">;</span><span class="s0">\u4040\u0180</span><span class="s2">;fl</span><span class="s0">\u1ae8\u1ae9\u1aeb\u6201\xee\u1160</span><span class="s2">e</span><span class="s0">\u0100</span><span class="s2">mx</span><span class="s0">\u1af1\u1af6</span><span class="s2">ent</span><span class="s0">\xbb\u1ae9</span><span class="s2">e</span><span class="s0">\xf3\u024d\u01e7\u1afe\0\u1b07\u0100</span><span class="s2">;d</span><span class="s0">\u12bb\u1b02</span><span class="s2">ot;</span><span class="s0">\u6a6d</span><span class="s2">n</span><span class="s0">\xf4\u0246\u0180</span><span class="s2">fry</span><span class="s0">\u1b10\u1b14\u1b17</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd54</span><span class="s2">o</span><span class="s0">\xe4\u0254\u8100\xa9</span><span class="s2">;s</span><span class="s0">\u0155\u1b1d</span><span class="s2">r;</span><span class="s0">\u6117\u0100</span><span class="s2">ao</span><span class="s0">\u1b25\u1b29</span><span class="s2">rr;</span><span class="s0">\u61b5</span><span class="s2">ss;</span><span class="s0">\u6717\u0100</span><span class="s2">cu</span><span class="s0">\u1b32\u1b37</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcb8\u0100</span><span class="s2">bp</span><span class="s0">\u1b3c\u1b44\u0100</span><span class="s2">;e</span><span class="s0">\u1b41\u1b42\u6acf</span><span class="s2">;</span><span class="s0">\u6ad1\u0100</span><span class="s2">;e</span><span class="s0">\u1b49\u1b4a\u6ad0</span><span class="s2">;</span><span class="s0">\u6ad2</span><span class="s2">dot;</span><span class="s0">\u62ef\u0380</span><span class="s2">delprvw</span><span class="s0">\u1b60\u1b6c\u1b77\u1b82\u1bac\u1bd4\u1bf9</span><span class="s2">arr</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u1b68\u1b6a</span><span class="s2">;</span><span class="s0">\u6938</span><span class="s2">;</span><span class="s0">\u6935\u0270\u1b72\0\0\u1b75</span><span class="s2">r;</span><span class="s0">\u62de</span><span class="s2">c;</span><span class="s0">\u62df</span><span class="s2">arr</span><span class="s0">\u0100</span><span class="s2">;p</span><span class="s0">\u1b7f\u1b80\u61b6</span><span class="s2">;</span><span class="s0">\u693d\u0300</span><span class="s2">;bcdos</span><span class="s0">\u1b8f\u1b90\u1b96\u1ba1\u1ba5\u1ba8\u622a</span><span class="s2">rcap;</span><span class="s0">\u6a48\u0100</span><span class="s2">au</span><span class="s0">\u1b9b\u1b9e</span><span class="s2">p;</span><span class="s0">\u6a46</span><span class="s2">p;</span><span class="s0">\u6a4a</span><span class="s2">ot;</span><span class="s0">\u628d</span><span class="s2">r;</span><span class="s0">\u6a45</span><span class="s2">;</span><span class="s0">\uc000\u222a\ufe00\u0200</span><span class="s2">alrv</span><span class="s0">\u1bb5\u1bbf\u1bde\u1be3</span><span class="s2">rr</span><span class="s0">\u0100</span><span class="s2">;m</span><span class="s0">\u1bbc\u1bbd\u61b7</span><span class="s2">;</span><span class="s0">\u693c</span><span class="s2">y</span><span class="s0">\u0180</span><span class="s2">evw</span><span class="s0">\u1bc7\u1bd4\u1bd8</span><span class="s2">q</span><span class="s0">\u0270\u1bce\0\0\u1bd2</span><span class="s2">re</span><span class="s0">\xe3\u1b73</span><span class="s2">u</span><span class="s0">\xe3\u1b75</span><span class="s2">ee;</span><span class="s0">\u62ce</span><span class="s2">edge;</span><span class="s0">\u62cf</span><span class="s2">en</span><span class="s0">\u803b\xa4\u40a4</span><span class="s2">earrow</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u1bee\u1bf3</span><span class="s2">eft</span><span class="s0">\xbb\u1b80</span><span class="s2">ight</span><span class="s0">\xbb\u1bbd</span><span class="s2">e</span><span class="s0">\xe4\u1bdd\u0100</span><span class="s2">ci</span><span class="s0">\u1c01\u1c07</span><span class="s2">onin</span><span class="s0">\xf4\u01f7</span><span class="s2">nt;</span><span class="s0">\u6231</span><span class="s2">lcty;</span><span class="s0">\u632d\u0980</span><span class="s2">AHabcdefhijlorstuwz</span><span class="s0">\u1c38\u1c3b\u1c3f\u1c5d\u1c69\u1c75\u1c8a\u1c9e\u1cac\u1cb7\u1cfb\u1cff\u1d0d\u1d7b\u1d91\u1dab\u1dbb\u1dc6\u1dcd</span><span class="s2">r</span><span class="s0">\xf2\u0381</span><span class="s2">ar;</span><span class="s0">\u6965\u0200</span><span class="s2">glrs</span><span class="s0">\u1c48\u1c4d\u1c52\u1c54</span><span class="s2">ger;</span><span class="s0">\u6020</span><span class="s2">eth;</span><span class="s0">\u6138\xf2\u1133</span><span class="s2">h</span><span class="s0">\u0100</span><span class="s2">;v</span><span class="s0">\u1c5a\u1c5b\u6010\xbb\u090a\u016b\u1c61\u1c67</span><span class="s2">arow;</span><span class="s0">\u690f</span><span class="s2">a</span><span class="s0">\xe3\u0315\u0100</span><span class="s2">ay</span><span class="s0">\u1c6e\u1c73</span><span class="s2">ron;</span><span class="s0">\u410f</span><span class="s2">;</span><span class="s0">\u4434\u0180</span><span class="s2">;ao</span><span class="s0">\u0332\u1c7c\u1c84\u0100</span><span class="s2">gr</span><span class="s0">\u02bf\u1c81</span><span class="s2">r;</span><span class="s0">\u61ca</span><span class="s2">tseq;</span><span class="s0">\u6a77\u0180</span><span class="s2">glm</span><span class="s0">\u1c91\u1c94\u1c98\u803b\xb0\u40b0</span><span class="s2">ta;</span><span class="s0">\u43b4</span><span class="s2">ptyv;</span><span class="s0">\u69b1\u0100</span><span class="s2">ir</span><span class="s0">\u1ca3\u1ca8</span><span class="s2">sht;</span><span class="s0">\u697f</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd21</span><span class="s2">ar</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u1cb3\u1cb5\xbb\u08dc\xbb\u101e\u0280</span><span class="s2">aegsv</span><span class="s0">\u1cc2\u0378\u1cd6\u1cdc\u1ce0</span><span class="s2">m</span><span class="s0">\u0180</span><span class="s2">;os</span><span class="s0">\u0326\u1cca\u1cd4</span><span class="s2">nd</span><span class="s0">\u0100</span><span class="s2">;s</span><span class="s0">\u0326\u1cd1</span><span class="s2">uit;</span><span class="s0">\u6666</span><span class="s2">amma;</span><span class="s0">\u43dd</span><span class="s2">in;</span><span class="s0">\u62f2\u0180</span><span class="s2">;io</span><span class="s0">\u1ce7\u1ce8\u1cf8\u40f7</span><span class="s2">de</span><span class="s0">\u8100\xf7</span><span class="s2">;o</span><span class="s0">\u1ce7\u1cf0</span><span class="s2">ntimes;</span><span class="s0">\u62c7</span><span class="s2">n</span><span class="s0">\xf8\u1cf7</span><span class="s2">cy;</span><span class="s0">\u4452</span><span class="s2">c</span><span class="s0">\u026f\u1d06\0\0\u1d0a</span><span class="s2">rn;</span><span class="s0">\u631e</span><span class="s2">op;</span><span class="s0">\u630d\u0280</span><span class="s2">lptuw</span><span class="s0">\u1d18\u1d1d\u1d22\u1d49\u1d55</span><span class="s2">lar;</span><span class="s0">\u4024</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd55\u0280</span><span class="s2">;emps</span><span class="s0">\u030b\u1d2d\u1d37\u1d3d\u1d42</span><span class="s2">q</span><span class="s0">\u0100</span><span class="s2">;d</span><span class="s0">\u0352\u1d33</span><span class="s2">ot;</span><span class="s0">\u6251</span><span class="s2">inus;</span><span class="s0">\u6238</span><span class="s2">lus;</span><span class="s0">\u6214</span><span class="s2">quare;</span><span class="s0">\u62a1</span><span class="s2">blebarwedg</span><span class="s0">\xe5\xfa</span><span class="s2">n</span><span class="s0">\u0180</span><span class="s2">adh</span><span class="s0">\u112e\u1d5d\u1d67</span><span class="s2">ownarrow</span><span class="s0">\xf3\u1c83</span><span class="s2">arpoon</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u1d72\u1d76</span><span class="s2">ef</span><span class="s0">\xf4\u1cb4</span><span class="s2">igh</span><span class="s0">\xf4\u1cb6\u0162\u1d7f\u1d85</span><span class="s2">karo</span><span class="s0">\xf7\u0f42\u026f\u1d8a\0\0\u1d8e</span><span class="s2">rn;</span><span class="s0">\u631f</span><span class="s2">op;</span><span class="s0">\u630c\u0180</span><span class="s2">cot</span><span class="s0">\u1d98\u1da3\u1da6\u0100</span><span class="s2">ry</span><span class="s0">\u1d9d\u1da1</span><span class="s2">;</span><span class="s0">\uc000\ud835\udcb9</span><span class="s2">;</span><span class="s0">\u4455</span><span class="s2">l;</span><span class="s0">\u69f6</span><span class="s2">rok;</span><span class="s0">\u4111\u0100</span><span class="s2">dr</span><span class="s0">\u1db0\u1db4</span><span class="s2">ot;</span><span class="s0">\u62f1</span><span class="s2">i</span><span class="s0">\u0100</span><span class="s2">;f</span><span class="s0">\u1dba\u1816\u65bf\u0100</span><span class="s2">ah</span><span class="s0">\u1dc0\u1dc3</span><span class="s2">r</span><span class="s0">\xf2\u0429</span><span class="s2">a</span><span class="s0">\xf2\u0fa6</span><span class="s2">angle;</span><span class="s0">\u69a6\u0100</span><span class="s2">ci</span><span class="s0">\u1dd2\u1dd5</span><span class="s2">y;</span><span class="s0">\u445f</span><span class="s2">grarr;</span><span class="s0">\u67ff\u0900</span><span class="s2">Dacdefglmnopqrstux</span><span class="s0">\u1e01\u1e09\u1e19\u1e38\u0578\u1e3c\u1e49\u1e61\u1e7e\u1ea5\u1eaf\u1ebd\u1ee1\u1f2a\u1f37\u1f44\u1f4e\u1f5a\u0100</span><span class="s2">Do</span><span class="s0">\u1e06\u1d34</span><span class="s2">o</span><span class="s0">\xf4\u1c89\u0100</span><span class="s2">cs</span><span class="s0">\u1e0e\u1e14</span><span class="s2">ute</span><span class="s0">\u803b\xe9\u40e9</span><span class="s2">ter;</span><span class="s0">\u6a6e\u0200</span><span class="s2">aioy</span><span class="s0">\u1e22\u1e27\u1e31\u1e36</span><span class="s2">ron;</span><span class="s0">\u411b</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">;c</span><span class="s0">\u1e2d\u1e2e\u6256\u803b\xea\u40ea</span><span class="s2">lon;</span><span class="s0">\u6255</span><span class="s2">;</span><span class="s0">\u444d</span><span class="s2">ot;</span><span class="s0">\u4117\u0100</span><span class="s2">Dr</span><span class="s0">\u1e41\u1e45</span><span class="s2">ot;</span><span class="s0">\u6252</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd22\u0180</span><span class="s2">;rs</span><span class="s0">\u1e50\u1e51\u1e57\u6a9a</span><span class="s2">ave</span><span class="s0">\u803b\xe8\u40e8\u0100</span><span class="s2">;d</span><span class="s0">\u1e5c\u1e5d\u6a96</span><span class="s2">ot;</span><span class="s0">\u6a98\u0200</span><span class="s2">;ils</span><span class="s0">\u1e6a\u1e6b\u1e72\u1e74\u6a99</span><span class="s2">nters;</span><span class="s0">\u63e7</span><span class="s2">;</span><span class="s0">\u6113\u0100</span><span class="s2">;d</span><span class="s0">\u1e79\u1e7a\u6a95</span><span class="s2">ot;</span><span class="s0">\u6a97\u0180</span><span class="s2">aps</span><span class="s0">\u1e85\u1e89\u1e97</span><span class="s2">cr;</span><span class="s0">\u4113</span><span class="s2">ty</span><span class="s0">\u0180</span><span class="s2">;sv</span><span class="s0">\u1e92\u1e93\u1e95\u6205</span><span class="s2">et</span><span class="s0">\xbb\u1e93</span><span class="s2">p</span><span class="s0">\u0100</span><span class="s2">1;</span><span class="s0">\u1e9d\u1ea4\u0133\u1ea1\u1ea3</span><span class="s2">;</span><span class="s0">\u6004</span><span class="s2">;</span><span class="s0">\u6005\u6003\u0100</span><span class="s2">gs</span><span class="s0">\u1eaa\u1eac</span><span class="s2">;</span><span class="s0">\u414b</span><span class="s2">p;</span><span class="s0">\u6002\u0100</span><span class="s2">gp</span><span class="s0">\u1eb4\u1eb8</span><span class="s2">on;</span><span class="s0">\u4119</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd56\u0180</span><span class="s2">als</span><span class="s0">\u1ec4\u1ece\u1ed2</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">;s</span><span class="s0">\u1eca\u1ecb\u62d5</span><span class="s2">l;</span><span class="s0">\u69e3</span><span class="s2">us;</span><span class="s0">\u6a71</span><span class="s2">i</span><span class="s0">\u0180</span><span class="s2">;lv</span><span class="s0">\u1eda\u1edb\u1edf\u43b5</span><span class="s2">on</span><span class="s0">\xbb\u1edb</span><span class="s2">;</span><span class="s0">\u43f5\u0200</span><span class="s2">csuv</span><span class="s0">\u1eea\u1ef3\u1f0b\u1f23\u0100</span><span class="s2">io</span><span class="s0">\u1eef\u1e31</span><span class="s2">rc</span><span class="s0">\xbb\u1e2e\u0269\u1ef9\0\0\u1efb\xed\u0548</span><span class="s2">ant</span><span class="s0">\u0100</span><span class="s2">gl</span><span class="s0">\u1f02\u1f06</span><span class="s2">tr</span><span class="s0">\xbb\u1e5d</span><span class="s2">ess</span><span class="s0">\xbb\u1e7a\u0180</span><span class="s2">aei</span><span class="s0">\u1f12\u1f16\u1f1a</span><span class="s2">ls;</span><span class="s0">\u403d</span><span class="s2">st;</span><span class="s0">\u625f</span><span class="s2">v</span><span class="s0">\u0100</span><span class="s2">;D</span><span class="s0">\u0235\u1f20</span><span class="s2">D;</span><span class="s0">\u6a78</span><span class="s2">parsl;</span><span class="s0">\u69e5\u0100</span><span class="s2">Da</span><span class="s0">\u1f2f\u1f33</span><span class="s2">ot;</span><span class="s0">\u6253</span><span class="s2">rr;</span><span class="s0">\u6971\u0180</span><span class="s2">cdi</span><span class="s0">\u1f3e\u1f41\u1ef8</span><span class="s2">r;</span><span class="s0">\u612f</span><span class="s2">o</span><span class="s0">\xf4\u0352\u0100</span><span class="s2">ah</span><span class="s0">\u1f49\u1f4b</span><span class="s2">;</span><span class="s0">\u43b7\u803b\xf0\u40f0\u0100</span><span class="s2">mr</span><span class="s0">\u1f53\u1f57</span><span class="s2">l</span><span class="s0">\u803b\xeb\u40eb</span><span class="s2">o;</span><span class="s0">\u60ac\u0180</span><span class="s2">cip</span><span class="s0">\u1f61\u1f64\u1f67</span><span class="s2">l;</span><span class="s0">\u4021</span><span class="s2">s</span><span class="s0">\xf4\u056e\u0100</span><span class="s2">eo</span><span class="s0">\u1f6c\u1f74</span><span class="s2">ctatio</span><span class="s0">\xee\u0559</span><span class="s2">nential</span><span class="s0">\xe5\u0579\u09e1\u1f92\0\u1f9e\0\u1fa1\u1fa7\0\0\u1fc6\u1fcc\0\u1fd3\0\u1fe6\u1fea\u2000\0\u2008\u205a</span><span class="s2">llingdotse</span><span class="s0">\xf1\u1e44</span><span class="s2">y;</span><span class="s0">\u4444</span><span class="s2">male;</span><span class="s0">\u6640\u0180</span><span class="s2">ilr</span><span class="s0">\u1fad\u1fb3\u1fc1</span><span class="s2">lig;</span><span class="s0">\u8000\ufb03\u0269\u1fb9\0\0\u1fbd</span><span class="s2">g;</span><span class="s0">\u8000\ufb00</span><span class="s2">ig;</span><span class="s0">\u8000\ufb04</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd23</span><span class="s2">lig;</span><span class="s0">\u8000\ufb01</span><span class="s2">lig;</span><span class="s0">\uc000</span><span class="s2">fj</span><span class="s0">\u0180</span><span class="s2">alt</span><span class="s0">\u1fd9\u1fdc\u1fe1</span><span class="s2">t;</span><span class="s0">\u666d</span><span class="s2">ig;</span><span class="s0">\u8000\ufb02</span><span class="s2">ns;</span><span class="s0">\u65b1</span><span class="s2">of;</span><span class="s0">\u4192\u01f0\u1fee\0\u1ff3</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd57\u0100</span><span class="s2">ak</span><span class="s0">\u05bf\u1ff7\u0100</span><span class="s2">;v</span><span class="s0">\u1ffc\u1ffd\u62d4</span><span class="s2">;</span><span class="s0">\u6ad9</span><span class="s2">artint;</span><span class="s0">\u6a0d\u0100</span><span class="s2">ao</span><span class="s0">\u200c\u2055\u0100</span><span class="s2">cs</span><span class="s0">\u2011\u2052\u03b1\u201a\u2030\u2038\u2045\u2048\0\u2050\u03b2\u2022\u2025\u2027\u202a\u202c\0\u202e\u803b\xbd\u40bd</span><span class="s2">;</span><span class="s0">\u6153\u803b\xbc\u40bc</span><span class="s2">;</span><span class="s0">\u6155</span><span class="s2">;</span><span class="s0">\u6159</span><span class="s2">;</span><span class="s0">\u615b\u01b3\u2034\0\u2036</span><span class="s2">;</span><span class="s0">\u6154</span><span class="s2">;</span><span class="s0">\u6156\u02b4\u203e\u2041\0\0\u2043\u803b\xbe\u40be</span><span class="s2">;</span><span class="s0">\u6157</span><span class="s2">;</span><span class="s0">\u615c</span><span class="s2">5;</span><span class="s0">\u6158\u01b6\u204c\0\u204e</span><span class="s2">;</span><span class="s0">\u615a</span><span class="s2">;</span><span class="s0">\u615d</span><span class="s2">8;</span><span class="s0">\u615e</span><span class="s2">l;</span><span class="s0">\u6044</span><span class="s2">wn;</span><span class="s0">\u6322</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcbb\u0880</span><span class="s2">Eabcdefgijlnorstv</span><span class="s0">\u2082\u2089\u209f\u20a5\u20b0\u20b4\u20f0\u20f5\u20fa\u20ff\u2103\u2112\u2138\u0317\u213e\u2152\u219e\u0100</span><span class="s2">;l</span><span class="s0">\u064d\u2087</span><span class="s2">;</span><span class="s0">\u6a8c\u0180</span><span class="s2">cmp</span><span class="s0">\u2090\u2095\u209d</span><span class="s2">ute;</span><span class="s0">\u41f5</span><span class="s2">ma</span><span class="s0">\u0100</span><span class="s2">;d</span><span class="s0">\u209c\u1cda\u43b3</span><span class="s2">;</span><span class="s0">\u6a86</span><span class="s2">reve;</span><span class="s0">\u411f\u0100</span><span class="s2">iy</span><span class="s0">\u20aa\u20ae</span><span class="s2">rc;</span><span class="s0">\u411d</span><span class="s2">;</span><span class="s0">\u4433</span><span class="s2">ot;</span><span class="s0">\u4121\u0200</span><span class="s2">;lqs</span><span class="s0">\u063e\u0642\u20bd\u20c9\u0180</span><span class="s2">;qs</span><span class="s0">\u063e\u064c\u20c4</span><span class="s2">lan</span><span class="s0">\xf4\u0665\u0200</span><span class="s2">;cdl</span><span class="s0">\u0665\u20d2\u20d5\u20e5</span><span class="s2">c;</span><span class="s0">\u6aa9</span><span class="s2">ot</span><span class="s0">\u0100</span><span class="s2">;o</span><span class="s0">\u20dc\u20dd\u6a80\u0100</span><span class="s2">;l</span><span class="s0">\u20e2\u20e3\u6a82</span><span class="s2">;</span><span class="s0">\u6a84\u0100</span><span class="s2">;e</span><span class="s0">\u20ea\u20ed\uc000\u22db\ufe00</span><span class="s2">s;</span><span class="s0">\u6a94</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd24\u0100</span><span class="s2">;g</span><span class="s0">\u0673\u061b</span><span class="s2">mel;</span><span class="s0">\u6137</span><span class="s2">cy;</span><span class="s0">\u4453\u0200</span><span class="s2">;Eaj</span><span class="s0">\u065a\u210c\u210e\u2110</span><span class="s2">;</span><span class="s0">\u6a92</span><span class="s2">;</span><span class="s0">\u6aa5</span><span class="s2">;</span><span class="s0">\u6aa4\u0200</span><span class="s2">Eaes</span><span class="s0">\u211b\u211d\u2129\u2134</span><span class="s2">;</span><span class="s0">\u6269</span><span class="s2">p</span><span class="s0">\u0100</span><span class="s2">;p</span><span class="s0">\u2123\u2124\u6a8a</span><span class="s2">rox</span><span class="s0">\xbb\u2124\u0100</span><span class="s2">;q</span><span class="s0">\u212e\u212f\u6a88\u0100</span><span class="s2">;q</span><span class="s0">\u212e\u211b</span><span class="s2">im;</span><span class="s0">\u62e7</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd58\u0100</span><span class="s2">ci</span><span class="s0">\u2143\u2146</span><span class="s2">r;</span><span class="s0">\u610a</span><span class="s2">m</span><span class="s0">\u0180</span><span class="s2">;el</span><span class="s0">\u066b\u214e\u2150</span><span class="s2">;</span><span class="s0">\u6a8e</span><span class="s2">;</span><span class="s0">\u6a90\u8300</span><span class="s2">&gt;;cdlqr</span><span class="s0">\u05ee\u2160\u216a\u216e\u2173\u2179\u0100</span><span class="s2">ci</span><span class="s0">\u2165\u2167</span><span class="s2">;</span><span class="s0">\u6aa7</span><span class="s2">r;</span><span class="s0">\u6a7a</span><span class="s2">ot;</span><span class="s0">\u62d7</span><span class="s2">Par;</span><span class="s0">\u6995</span><span class="s2">uest;</span><span class="s0">\u6a7c\u0280</span><span class="s2">adels</span><span class="s0">\u2184\u216a\u2190\u0656\u219b\u01f0\u2189\0\u218e</span><span class="s2">pro</span><span class="s0">\xf8\u209e</span><span class="s2">r;</span><span class="s0">\u6978</span><span class="s2">q</span><span class="s0">\u0100</span><span class="s2">lq</span><span class="s0">\u063f\u2196</span><span class="s2">les</span><span class="s0">\xf3\u2088</span><span class="s2">i</span><span class="s0">\xed\u066b\u0100</span><span class="s2">en</span><span class="s0">\u21a3\u21ad</span><span class="s2">rtneqq;</span><span class="s0">\uc000\u2269\ufe00\xc5\u21aa\u0500</span><span class="s2">Aabcefkosy</span><span class="s0">\u21c4\u21c7\u21f1\u21f5\u21fa\u2218\u221d\u222f\u2268\u227d</span><span class="s2">r</span><span class="s0">\xf2\u03a0\u0200</span><span class="s2">ilmr</span><span class="s0">\u21d0\u21d4\u21d7\u21db</span><span class="s2">rs</span><span class="s0">\xf0\u1484</span><span class="s2">f</span><span class="s0">\xbb\u2024</span><span class="s2">il</span><span class="s0">\xf4\u06a9\u0100</span><span class="s2">dr</span><span class="s0">\u21e0\u21e4</span><span class="s2">cy;</span><span class="s0">\u444a\u0180</span><span class="s2">;cw</span><span class="s0">\u08f4\u21eb\u21ef</span><span class="s2">ir;</span><span class="s0">\u6948</span><span class="s2">;</span><span class="s0">\u61ad</span><span class="s2">ar;</span><span class="s0">\u610f</span><span class="s2">irc;</span><span class="s0">\u4125\u0180</span><span class="s2">alr</span><span class="s0">\u2201\u220e\u2213</span><span class="s2">rts</span><span class="s0">\u0100</span><span class="s2">;u</span><span class="s0">\u2209\u220a\u6665</span><span class="s2">it</span><span class="s0">\xbb\u220a</span><span class="s2">lip;</span><span class="s0">\u6026</span><span class="s2">con;</span><span class="s0">\u62b9</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd25</span><span class="s2">s</span><span class="s0">\u0100</span><span class="s2">ew</span><span class="s0">\u2223\u2229</span><span class="s2">arow;</span><span class="s0">\u6925</span><span class="s2">arow;</span><span class="s0">\u6926\u0280</span><span class="s2">amopr</span><span class="s0">\u223a\u223e\u2243\u225e\u2263</span><span class="s2">rr;</span><span class="s0">\u61ff</span><span class="s2">tht;</span><span class="s0">\u623b</span><span class="s2">k</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u2249\u2253</span><span class="s2">eftarrow;</span><span class="s0">\u61a9</span><span class="s2">ightarrow;</span><span class="s0">\u61aa</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd59</span><span class="s2">bar;</span><span class="s0">\u6015\u0180</span><span class="s2">clt</span><span class="s0">\u226f\u2274\u2278</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcbd</span><span class="s2">as</span><span class="s0">\xe8\u21f4</span><span class="s2">rok;</span><span class="s0">\u4127\u0100</span><span class="s2">bp</span><span class="s0">\u2282\u2287</span><span class="s2">ull;</span><span class="s0">\u6043</span><span class="s2">hen</span><span class="s0">\xbb\u1c5b\u0ae1\u22a3\0\u22aa\0\u22b8\u22c5\u22ce\0\u22d5\u22f3\0\0\u22f8\u2322\u2367\u2362\u237f\0\u2386\u23aa\u23b4</span><span class="s2">cute</span><span class="s0">\u803b\xed\u40ed\u0180</span><span class="s2">;iy</span><span class="s0">\u0771\u22b0\u22b5</span><span class="s2">rc</span><span class="s0">\u803b\xee\u40ee</span><span class="s2">;</span><span class="s0">\u4438\u0100</span><span class="s2">cx</span><span class="s0">\u22bc\u22bf</span><span class="s2">y;</span><span class="s0">\u4435</span><span class="s2">cl</span><span class="s0">\u803b\xa1\u40a1\u0100</span><span class="s2">fr</span><span class="s0">\u039f\u22c9</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd26</span><span class="s2">rave</span><span class="s0">\u803b\xec\u40ec\u0200</span><span class="s2">;ino</span><span class="s0">\u073e\u22dd\u22e9\u22ee\u0100</span><span class="s2">in</span><span class="s0">\u22e2\u22e6</span><span class="s2">nt;</span><span class="s0">\u6a0c</span><span class="s2">t;</span><span class="s0">\u622d</span><span class="s2">fin;</span><span class="s0">\u69dc</span><span class="s2">ta;</span><span class="s0">\u6129</span><span class="s2">lig;</span><span class="s0">\u4133\u0180</span><span class="s2">aop</span><span class="s0">\u22fe\u231a\u231d\u0180</span><span class="s2">cgt</span><span class="s0">\u2305\u2308\u2317</span><span class="s2">r;</span><span class="s0">\u412b\u0180</span><span class="s2">elp</span><span class="s0">\u071f\u230f\u2313</span><span class="s2">in</span><span class="s0">\xe5\u078e</span><span class="s2">ar</span><span class="s0">\xf4\u0720</span><span class="s2">h;</span><span class="s0">\u4131</span><span class="s2">f;</span><span class="s0">\u62b7</span><span class="s2">ed;</span><span class="s0">\u41b5\u0280</span><span class="s2">;cfot</span><span class="s0">\u04f4\u232c\u2331\u233d\u2341</span><span class="s2">are;</span><span class="s0">\u6105</span><span class="s2">in</span><span class="s0">\u0100</span><span class="s2">;t</span><span class="s0">\u2338\u2339\u621e</span><span class="s2">ie;</span><span class="s0">\u69dd</span><span class="s2">do</span><span class="s0">\xf4\u2319\u0280</span><span class="s2">;celp</span><span class="s0">\u0757\u234c\u2350\u235b\u2361</span><span class="s2">al;</span><span class="s0">\u62ba\u0100</span><span class="s2">gr</span><span class="s0">\u2355\u2359</span><span class="s2">er</span><span class="s0">\xf3\u1563\xe3\u234d</span><span class="s2">arhk;</span><span class="s0">\u6a17</span><span class="s2">rod;</span><span class="s0">\u6a3c\u0200</span><span class="s2">cgpt</span><span class="s0">\u236f\u2372\u2376\u237b</span><span class="s2">y;</span><span class="s0">\u4451</span><span class="s2">on;</span><span class="s0">\u412f</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd5a</span><span class="s2">a;</span><span class="s0">\u43b9</span><span class="s2">uest</span><span class="s0">\u803b\xbf\u40bf\u0100</span><span class="s2">ci</span><span class="s0">\u238a\u238f</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcbe</span><span class="s2">n</span><span class="s0">\u0280</span><span class="s2">;Edsv</span><span class="s0">\u04f4\u239b\u239d\u23a1\u04f3</span><span class="s2">;</span><span class="s0">\u62f9</span><span class="s2">ot;</span><span class="s0">\u62f5\u0100</span><span class="s2">;v</span><span class="s0">\u23a6\u23a7\u62f4</span><span class="s2">;</span><span class="s0">\u62f3\u0100</span><span class="s2">;i</span><span class="s0">\u0777\u23ae</span><span class="s2">lde;</span><span class="s0">\u4129\u01eb\u23b8\0\u23bc</span><span class="s2">cy;</span><span class="s0">\u4456</span><span class="s2">l</span><span class="s0">\u803b\xef\u40ef\u0300</span><span class="s2">cfmosu</span><span class="s0">\u23cc\u23d7\u23dc\u23e1\u23e7\u23f5\u0100</span><span class="s2">iy</span><span class="s0">\u23d1\u23d5</span><span class="s2">rc;</span><span class="s0">\u4135</span><span class="s2">;</span><span class="s0">\u4439</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd27</span><span class="s2">ath;</span><span class="s0">\u4237</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd5b\u01e3\u23ec\0\u23f1</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcbf</span><span class="s2">rcy;</span><span class="s0">\u4458</span><span class="s2">kcy;</span><span class="s0">\u4454\u0400</span><span class="s2">acfghjos</span><span class="s0">\u240b\u2416\u2422\u2427\u242d\u2431\u2435\u243b</span><span class="s2">ppa</span><span class="s0">\u0100</span><span class="s2">;v</span><span class="s0">\u2413\u2414\u43ba</span><span class="s2">;</span><span class="s0">\u43f0\u0100</span><span class="s2">ey</span><span class="s0">\u241b\u2420</span><span class="s2">dil;</span><span class="s0">\u4137</span><span class="s2">;</span><span class="s0">\u443a</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd28</span><span class="s2">reen;</span><span class="s0">\u4138</span><span class="s2">cy;</span><span class="s0">\u4445</span><span class="s2">cy;</span><span class="s0">\u445c</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd5c</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcc0\u0b80</span><span class="s2">ABEHabcdefghjlmnoprstuv</span><span class="s0">\u2470\u2481\u2486\u248d\u2491\u250e\u253d\u255a\u2580\u264e\u265e\u2665\u2679\u267d\u269a\u26b2\u26d8\u275d\u2768\u278b\u27c0\u2801\u2812\u0180</span><span class="s2">art</span><span class="s0">\u2477\u247a\u247c</span><span class="s2">r</span><span class="s0">\xf2\u09c6\xf2\u0395</span><span class="s2">ail;</span><span class="s0">\u691b</span><span class="s2">arr;</span><span class="s0">\u690e\u0100</span><span class="s2">;g</span><span class="s0">\u0994\u248b</span><span class="s2">;</span><span class="s0">\u6a8b</span><span class="s2">ar;</span><span class="s0">\u6962\u0963\u24a5\0\u24aa\0\u24b1\0\0\0\0\0\u24b5\u24ba\0\u24c6\u24c8\u24cd\0\u24f9</span><span class="s2">ute;</span><span class="s0">\u413a</span><span class="s2">mptyv;</span><span class="s0">\u69b4</span><span class="s2">ra</span><span class="s0">\xee\u084c</span><span class="s2">bda;</span><span class="s0">\u43bb</span><span class="s2">g</span><span class="s0">\u0180</span><span class="s2">;dl</span><span class="s0">\u088e\u24c1\u24c3</span><span class="s2">;</span><span class="s0">\u6991\xe5\u088e</span><span class="s2">;</span><span class="s0">\u6a85</span><span class="s2">uo</span><span class="s0">\u803b\xab\u40ab</span><span class="s2">r</span><span class="s0">\u0400</span><span class="s2">;bfhlpst</span><span class="s0">\u0899\u24de\u24e6\u24e9\u24eb\u24ee\u24f1\u24f5\u0100</span><span class="s2">;f</span><span class="s0">\u089d\u24e3</span><span class="s2">s;</span><span class="s0">\u691f</span><span class="s2">s;</span><span class="s0">\u691d\xeb\u2252</span><span class="s2">p;</span><span class="s0">\u61ab</span><span class="s2">l;</span><span class="s0">\u6939</span><span class="s2">im;</span><span class="s0">\u6973</span><span class="s2">l;</span><span class="s0">\u61a2\u0180</span><span class="s2">;ae</span><span class="s0">\u24ff\u2500\u2504\u6aab</span><span class="s2">il;</span><span class="s0">\u6919\u0100</span><span class="s2">;s</span><span class="s0">\u2509\u250a\u6aad</span><span class="s2">;</span><span class="s0">\uc000\u2aad\ufe00\u0180</span><span class="s2">abr</span><span class="s0">\u2515\u2519\u251d</span><span class="s2">rr;</span><span class="s0">\u690c</span><span class="s2">rk;</span><span class="s0">\u6772\u0100</span><span class="s2">ak</span><span class="s0">\u2522\u252c</span><span class="s2">c</span><span class="s0">\u0100</span><span class="s2">ek</span><span class="s0">\u2528\u252a</span><span class="s2">;</span><span class="s0">\u407b</span><span class="s2">;</span><span class="s0">\u405b\u0100</span><span class="s2">es</span><span class="s0">\u2531\u2533</span><span class="s2">;</span><span class="s0">\u698b</span><span class="s2">l</span><span class="s0">\u0100</span><span class="s2">du</span><span class="s0">\u2539\u253b</span><span class="s2">;</span><span class="s0">\u698f</span><span class="s2">;</span><span class="s0">\u698d\u0200</span><span class="s2">aeuy</span><span class="s0">\u2546\u254b\u2556\u2558</span><span class="s2">ron;</span><span class="s0">\u413e\u0100</span><span class="s2">di</span><span class="s0">\u2550\u2554</span><span class="s2">il;</span><span class="s0">\u413c\xec\u08b0\xe2\u2529</span><span class="s2">;</span><span class="s0">\u443b\u0200</span><span class="s2">cqrs</span><span class="s0">\u2563\u2566\u256d\u257d</span><span class="s2">a;</span><span class="s0">\u6936</span><span class="s2">uo</span><span class="s0">\u0100</span><span class="s2">;r</span><span class="s0">\u0e19\u1746\u0100</span><span class="s2">du</span><span class="s0">\u2572\u2577</span><span class="s2">har;</span><span class="s0">\u6967</span><span class="s2">shar;</span><span class="s0">\u694b</span><span class="s2">h;</span><span class="s0">\u61b2\u0280</span><span class="s2">;fgqs</span><span class="s0">\u258b\u258c\u0989\u25f3\u25ff\u6264</span><span class="s2">t</span><span class="s0">\u0280</span><span class="s2">ahlrt</span><span class="s0">\u2598\u25a4\u25b7\u25c2\u25e8</span><span class="s2">rrow</span><span class="s0">\u0100</span><span class="s2">;t</span><span class="s0">\u0899\u25a1</span><span class="s2">a</span><span class="s0">\xe9\u24f6</span><span class="s2">arpoon</span><span class="s0">\u0100</span><span class="s2">du</span><span class="s0">\u25af\u25b4</span><span class="s2">own</span><span class="s0">\xbb\u045a</span><span class="s2">p</span><span class="s0">\xbb\u0966</span><span class="s2">eftarrows;</span><span class="s0">\u61c7</span><span class="s2">ight</span><span class="s0">\u0180</span><span class="s2">ahs</span><span class="s0">\u25cd\u25d6\u25de</span><span class="s2">rrow</span><span class="s0">\u0100</span><span class="s2">;s</span><span class="s0">\u08f4\u08a7</span><span class="s2">arpoon</span><span class="s0">\xf3\u0f98</span><span class="s2">quigarro</span><span class="s0">\xf7\u21f0</span><span class="s2">hreetimes;</span><span class="s0">\u62cb\u0180</span><span class="s2">;qs</span><span class="s0">\u258b\u0993\u25fa</span><span class="s2">lan</span><span class="s0">\xf4\u09ac\u0280</span><span class="s2">;cdgs</span><span class="s0">\u09ac\u260a\u260d\u261d\u2628</span><span class="s2">c;</span><span class="s0">\u6aa8</span><span class="s2">ot</span><span class="s0">\u0100</span><span class="s2">;o</span><span class="s0">\u2614\u2615\u6a7f\u0100</span><span class="s2">;r</span><span class="s0">\u261a\u261b\u6a81</span><span class="s2">;</span><span class="s0">\u6a83\u0100</span><span class="s2">;e</span><span class="s0">\u2622\u2625\uc000\u22da\ufe00</span><span class="s2">s;</span><span class="s0">\u6a93\u0280</span><span class="s2">adegs</span><span class="s0">\u2633\u2639\u263d\u2649\u264b</span><span class="s2">ppro</span><span class="s0">\xf8\u24c6</span><span class="s2">ot;</span><span class="s0">\u62d6</span><span class="s2">q</span><span class="s0">\u0100</span><span class="s2">gq</span><span class="s0">\u2643\u2645\xf4\u0989</span><span class="s2">gt</span><span class="s0">\xf2\u248c\xf4\u099b</span><span class="s2">i</span><span class="s0">\xed\u09b2\u0180</span><span class="s2">ilr</span><span class="s0">\u2655\u08e1\u265a</span><span class="s2">sht;</span><span class="s0">\u697c</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd29\u0100</span><span class="s2">;E</span><span class="s0">\u099c\u2663</span><span class="s2">;</span><span class="s0">\u6a91\u0161\u2669\u2676</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">du</span><span class="s0">\u25b2\u266e\u0100</span><span class="s2">;l</span><span class="s0">\u0965\u2673</span><span class="s2">;</span><span class="s0">\u696a</span><span class="s2">lk;</span><span class="s0">\u6584</span><span class="s2">cy;</span><span class="s0">\u4459\u0280</span><span class="s2">;acht</span><span class="s0">\u0a48\u2688\u268b\u2691\u2696</span><span class="s2">r</span><span class="s0">\xf2\u25c1</span><span class="s2">orne</span><span class="s0">\xf2\u1d08</span><span class="s2">ard;</span><span class="s0">\u696b</span><span class="s2">ri;</span><span class="s0">\u65fa\u0100</span><span class="s2">io</span><span class="s0">\u269f\u26a4</span><span class="s2">dot;</span><span class="s0">\u4140</span><span class="s2">ust</span><span class="s0">\u0100</span><span class="s2">;a</span><span class="s0">\u26ac\u26ad\u63b0</span><span class="s2">che</span><span class="s0">\xbb\u26ad\u0200</span><span class="s2">Eaes</span><span class="s0">\u26bb\u26bd\u26c9\u26d4</span><span class="s2">;</span><span class="s0">\u6268</span><span class="s2">p</span><span class="s0">\u0100</span><span class="s2">;p</span><span class="s0">\u26c3\u26c4\u6a89</span><span class="s2">rox</span><span class="s0">\xbb\u26c4\u0100</span><span class="s2">;q</span><span class="s0">\u26ce\u26cf\u6a87\u0100</span><span class="s2">;q</span><span class="s0">\u26ce\u26bb</span><span class="s2">im;</span><span class="s0">\u62e6\u0400</span><span class="s2">abnoptwz</span><span class="s0">\u26e9\u26f4\u26f7\u271a\u272f\u2741\u2747\u2750\u0100</span><span class="s2">nr</span><span class="s0">\u26ee\u26f1</span><span class="s2">g;</span><span class="s0">\u67ec</span><span class="s2">r;</span><span class="s0">\u61fd</span><span class="s2">r</span><span class="s0">\xeb\u08c1</span><span class="s2">g</span><span class="s0">\u0180</span><span class="s2">lmr</span><span class="s0">\u26ff\u270d\u2714</span><span class="s2">eft</span><span class="s0">\u0100</span><span class="s2">ar</span><span class="s0">\u09e6\u2707</span><span class="s2">ight</span><span class="s0">\xe1\u09f2</span><span class="s2">apsto;</span><span class="s0">\u67fc</span><span class="s2">ight</span><span class="s0">\xe1\u09fd</span><span class="s2">parrow</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u2725\u2729</span><span class="s2">ef</span><span class="s0">\xf4\u24ed</span><span class="s2">ight;</span><span class="s0">\u61ac\u0180</span><span class="s2">afl</span><span class="s0">\u2736\u2739\u273d</span><span class="s2">r;</span><span class="s0">\u6985</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd5d</span><span class="s2">us;</span><span class="s0">\u6a2d</span><span class="s2">imes;</span><span class="s0">\u6a34\u0161\u274b\u274f</span><span class="s2">st;</span><span class="s0">\u6217\xe1\u134e\u0180</span><span class="s2">;ef</span><span class="s0">\u2757\u2758\u1800\u65ca</span><span class="s2">nge</span><span class="s0">\xbb\u2758</span><span class="s2">ar</span><span class="s0">\u0100</span><span class="s2">;l</span><span class="s0">\u2764\u2765\u4028</span><span class="s2">t;</span><span class="s0">\u6993\u0280</span><span class="s2">achmt</span><span class="s0">\u2773\u2776\u277c\u2785\u2787</span><span class="s2">r</span><span class="s0">\xf2\u08a8</span><span class="s2">orne</span><span class="s0">\xf2\u1d8c</span><span class="s2">ar</span><span class="s0">\u0100</span><span class="s2">;d</span><span class="s0">\u0f98\u2783</span><span class="s2">;</span><span class="s0">\u696d</span><span class="s2">;</span><span class="s0">\u600e</span><span class="s2">ri;</span><span class="s0">\u62bf\u0300</span><span class="s2">achiqt</span><span class="s0">\u2798\u279d\u0a40\u27a2\u27ae\u27bb</span><span class="s2">quo;</span><span class="s0">\u6039</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcc1</span><span class="s2">m</span><span class="s0">\u0180</span><span class="s2">;eg</span><span class="s0">\u09b2\u27aa\u27ac</span><span class="s2">;</span><span class="s0">\u6a8d</span><span class="s2">;</span><span class="s0">\u6a8f\u0100</span><span class="s2">bu</span><span class="s0">\u252a\u27b3</span><span class="s2">o</span><span class="s0">\u0100</span><span class="s2">;r</span><span class="s0">\u0e1f\u27b9</span><span class="s2">;</span><span class="s0">\u601a</span><span class="s2">rok;</span><span class="s0">\u4142\u8400</span><span class="s2">&lt;;cdhilqr</span><span class="s0">\u082b\u27d2\u2639\u27dc\u27e0\u27e5\u27ea\u27f0\u0100</span><span class="s2">ci</span><span class="s0">\u27d7\u27d9</span><span class="s2">;</span><span class="s0">\u6aa6</span><span class="s2">r;</span><span class="s0">\u6a79</span><span class="s2">re</span><span class="s0">\xe5\u25f2</span><span class="s2">mes;</span><span class="s0">\u62c9</span><span class="s2">arr;</span><span class="s0">\u6976</span><span class="s2">uest;</span><span class="s0">\u6a7b\u0100</span><span class="s2">Pi</span><span class="s0">\u27f5\u27f9</span><span class="s2">ar;</span><span class="s0">\u6996\u0180</span><span class="s2">;ef</span><span class="s0">\u2800\u092d\u181b\u65c3</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">du</span><span class="s0">\u2807\u280d</span><span class="s2">shar;</span><span class="s0">\u694a</span><span class="s2">har;</span><span class="s0">\u6966\u0100</span><span class="s2">en</span><span class="s0">\u2817\u2821</span><span class="s2">rtneqq;</span><span class="s0">\uc000\u2268\ufe00\xc5\u281e\u0700</span><span class="s2">Dacdefhilnopsu</span><span class="s0">\u2840\u2845\u2882\u288e\u2893\u28a0\u28a5\u28a8\u28da\u28e2\u28e4\u0a83\u28f3\u2902</span><span class="s2">Dot;</span><span class="s0">\u623a\u0200</span><span class="s2">clpr</span><span class="s0">\u284e\u2852\u2863\u287d</span><span class="s2">r</span><span class="s0">\u803b\xaf\u40af\u0100</span><span class="s2">et</span><span class="s0">\u2857\u2859</span><span class="s2">;</span><span class="s0">\u6642\u0100</span><span class="s2">;e</span><span class="s0">\u285e\u285f\u6720</span><span class="s2">se</span><span class="s0">\xbb\u285f\u0100</span><span class="s2">;s</span><span class="s0">\u103b\u2868</span><span class="s2">to</span><span class="s0">\u0200</span><span class="s2">;dlu</span><span class="s0">\u103b\u2873\u2877\u287b</span><span class="s2">ow</span><span class="s0">\xee\u048c</span><span class="s2">ef</span><span class="s0">\xf4\u090f\xf0\u13d1</span><span class="s2">ker;</span><span class="s0">\u65ae\u0100</span><span class="s2">oy</span><span class="s0">\u2887\u288c</span><span class="s2">mma;</span><span class="s0">\u6a29</span><span class="s2">;</span><span class="s0">\u443c</span><span class="s2">ash;</span><span class="s0">\u6014</span><span class="s2">asuredangle</span><span class="s0">\xbb\u1626</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd2a</span><span class="s2">o;</span><span class="s0">\u6127\u0180</span><span class="s2">cdn</span><span class="s0">\u28af\u28b4\u28c9</span><span class="s2">ro</span><span class="s0">\u803b\xb5\u40b5\u0200</span><span class="s2">;acd</span><span class="s0">\u1464\u28bd\u28c0\u28c4</span><span class="s2">s</span><span class="s0">\xf4\u16a7</span><span class="s2">ir;</span><span class="s0">\u6af0</span><span class="s2">ot</span><span class="s0">\u80bb\xb7\u01b5</span><span class="s2">us</span><span class="s0">\u0180</span><span class="s2">;bd</span><span class="s0">\u28d2\u1903\u28d3\u6212\u0100</span><span class="s2">;u</span><span class="s0">\u1d3c\u28d8</span><span class="s2">;</span><span class="s0">\u6a2a\u0163\u28de\u28e1</span><span class="s2">p;</span><span class="s0">\u6adb\xf2\u2212\xf0\u0a81\u0100</span><span class="s2">dp</span><span class="s0">\u28e9\u28ee</span><span class="s2">els;</span><span class="s0">\u62a7</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd5e\u0100</span><span class="s2">ct</span><span class="s0">\u28f8\u28fd</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcc2</span><span class="s2">pos</span><span class="s0">\xbb\u159d\u0180</span><span class="s2">;lm</span><span class="s0">\u2909\u290a\u290d\u43bc</span><span class="s2">timap;</span><span class="s0">\u62b8\u0c00</span><span class="s2">GLRVabcdefghijlmoprstuvw</span><span class="s0">\u2942\u2953\u297e\u2989\u2998\u29da\u29e9\u2a15\u2a1a\u2a58\u2a5d\u2a83\u2a95\u2aa4\u2aa8\u2b04\u2b07\u2b44\u2b7f\u2bae\u2c34\u2c67\u2c7c\u2ce9\u0100</span><span class="s2">gt</span><span class="s0">\u2947\u294b</span><span class="s2">;</span><span class="s0">\uc000\u22d9\u0338\u0100</span><span class="s2">;v</span><span class="s0">\u2950\u0bcf\uc000\u226b\u20d2\u0180</span><span class="s2">elt</span><span class="s0">\u295a\u2972\u2976</span><span class="s2">ft</span><span class="s0">\u0100</span><span class="s2">ar</span><span class="s0">\u2961\u2967</span><span class="s2">rrow;</span><span class="s0">\u61cd</span><span class="s2">ightarrow;</span><span class="s0">\u61ce</span><span class="s2">;</span><span class="s0">\uc000\u22d8\u0338\u0100</span><span class="s2">;v</span><span class="s0">\u297b\u0c47\uc000\u226a\u20d2</span><span class="s2">ightarrow;</span><span class="s0">\u61cf\u0100</span><span class="s2">Dd</span><span class="s0">\u298e\u2993</span><span class="s2">ash;</span><span class="s0">\u62af</span><span class="s2">ash;</span><span class="s0">\u62ae\u0280</span><span class="s2">bcnpt</span><span class="s0">\u29a3\u29a7\u29ac\u29b1\u29cc</span><span class="s2">la</span><span class="s0">\xbb\u02de</span><span class="s2">ute;</span><span class="s0">\u4144</span><span class="s2">g;</span><span class="s0">\uc000\u2220\u20d2\u0280</span><span class="s2">;Eiop</span><span class="s0">\u0d84\u29bc\u29c0\u29c5\u29c8</span><span class="s2">;</span><span class="s0">\uc000\u2a70\u0338</span><span class="s2">d;</span><span class="s0">\uc000\u224b\u0338</span><span class="s2">s;</span><span class="s0">\u4149</span><span class="s2">ro</span><span class="s0">\xf8\u0d84</span><span class="s2">ur</span><span class="s0">\u0100</span><span class="s2">;a</span><span class="s0">\u29d3\u29d4\u666e</span><span class="s2">l</span><span class="s0">\u0100</span><span class="s2">;s</span><span class="s0">\u29d3\u0b38\u01f3\u29df\0\u29e3</span><span class="s2">p</span><span class="s0">\u80bb\xa0\u0b37</span><span class="s2">mp</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u0bf9\u0c00\u0280</span><span class="s2">aeouy</span><span class="s0">\u29f4\u29fe\u2a03\u2a10\u2a13\u01f0\u29f9\0\u29fb</span><span class="s2">;</span><span class="s0">\u6a43</span><span class="s2">on;</span><span class="s0">\u4148</span><span class="s2">dil;</span><span class="s0">\u4146</span><span class="s2">ng</span><span class="s0">\u0100</span><span class="s2">;d</span><span class="s0">\u0d7e\u2a0a</span><span class="s2">ot;</span><span class="s0">\uc000\u2a6d\u0338</span><span class="s2">p;</span><span class="s0">\u6a42</span><span class="s2">;</span><span class="s0">\u443d</span><span class="s2">ash;</span><span class="s0">\u6013\u0380</span><span class="s2">;Aadqsx</span><span class="s0">\u0b92\u2a29\u2a2d\u2a3b\u2a41\u2a45\u2a50</span><span class="s2">rr;</span><span class="s0">\u61d7</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">hr</span><span class="s0">\u2a33\u2a36</span><span class="s2">k;</span><span class="s0">\u6924\u0100</span><span class="s2">;o</span><span class="s0">\u13f2\u13f0</span><span class="s2">ot;</span><span class="s0">\uc000\u2250\u0338</span><span class="s2">ui</span><span class="s0">\xf6\u0b63\u0100</span><span class="s2">ei</span><span class="s0">\u2a4a\u2a4e</span><span class="s2">ar;</span><span class="s0">\u6928\xed\u0b98</span><span class="s2">ist</span><span class="s0">\u0100</span><span class="s2">;s</span><span class="s0">\u0ba0\u0b9f</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd2b\u0200</span><span class="s2">Eest</span><span class="s0">\u0bc5\u2a66\u2a79\u2a7c\u0180</span><span class="s2">;qs</span><span class="s0">\u0bbc\u2a6d\u0be1\u0180</span><span class="s2">;qs</span><span class="s0">\u0bbc\u0bc5\u2a74</span><span class="s2">lan</span><span class="s0">\xf4\u0be2</span><span class="s2">i</span><span class="s0">\xed\u0bea\u0100</span><span class="s2">;r</span><span class="s0">\u0bb6\u2a81\xbb\u0bb7\u0180</span><span class="s2">Aap</span><span class="s0">\u2a8a\u2a8d\u2a91</span><span class="s2">r</span><span class="s0">\xf2\u2971</span><span class="s2">rr;</span><span class="s0">\u61ae</span><span class="s2">ar;</span><span class="s0">\u6af2\u0180</span><span class="s2">;sv</span><span class="s0">\u0f8d\u2a9c\u0f8c\u0100</span><span class="s2">;d</span><span class="s0">\u2aa1\u2aa2\u62fc</span><span class="s2">;</span><span class="s0">\u62fa</span><span class="s2">cy;</span><span class="s0">\u445a\u0380</span><span class="s2">AEadest</span><span class="s0">\u2ab7\u2aba\u2abe\u2ac2\u2ac5\u2af6\u2af9</span><span class="s2">r</span><span class="s0">\xf2\u2966</span><span class="s2">;</span><span class="s0">\uc000\u2266\u0338</span><span class="s2">rr;</span><span class="s0">\u619a</span><span class="s2">r;</span><span class="s0">\u6025\u0200</span><span class="s2">;fqs</span><span class="s0">\u0c3b\u2ace\u2ae3\u2aef</span><span class="s2">t</span><span class="s0">\u0100</span><span class="s2">ar</span><span class="s0">\u2ad4\u2ad9</span><span class="s2">rro</span><span class="s0">\xf7\u2ac1</span><span class="s2">ightarro</span><span class="s0">\xf7\u2a90\u0180</span><span class="s2">;qs</span><span class="s0">\u0c3b\u2aba\u2aea</span><span class="s2">lan</span><span class="s0">\xf4\u0c55\u0100</span><span class="s2">;s</span><span class="s0">\u0c55\u2af4\xbb\u0c36</span><span class="s2">i</span><span class="s0">\xed\u0c5d\u0100</span><span class="s2">;r</span><span class="s0">\u0c35\u2afe</span><span class="s2">i</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u0c1a\u0c25</span><span class="s2">i</span><span class="s0">\xe4\u0d90\u0100</span><span class="s2">pt</span><span class="s0">\u2b0c\u2b11</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd5f\u8180\xac</span><span class="s2">;in</span><span class="s0">\u2b19\u2b1a\u2b36\u40ac</span><span class="s2">n</span><span class="s0">\u0200</span><span class="s2">;Edv</span><span class="s0">\u0b89\u2b24\u2b28\u2b2e</span><span class="s2">;</span><span class="s0">\uc000\u22f9\u0338</span><span class="s2">ot;</span><span class="s0">\uc000\u22f5\u0338\u01e1\u0b89\u2b33\u2b35</span><span class="s2">;</span><span class="s0">\u62f7</span><span class="s2">;</span><span class="s0">\u62f6</span><span class="s2">i</span><span class="s0">\u0100</span><span class="s2">;v</span><span class="s0">\u0cb8\u2b3c\u01e1\u0cb8\u2b41\u2b43</span><span class="s2">;</span><span class="s0">\u62fe</span><span class="s2">;</span><span class="s0">\u62fd\u0180</span><span class="s2">aor</span><span class="s0">\u2b4b\u2b63\u2b69</span><span class="s2">r</span><span class="s0">\u0200</span><span class="s2">;ast</span><span class="s0">\u0b7b\u2b55\u2b5a\u2b5f</span><span class="s2">lle</span><span class="s0">\xec\u0b7b</span><span class="s2">l;</span><span class="s0">\uc000\u2afd\u20e5</span><span class="s2">;</span><span class="s0">\uc000\u2202\u0338</span><span class="s2">lint;</span><span class="s0">\u6a14\u0180</span><span class="s2">;ce</span><span class="s0">\u0c92\u2b70\u2b73</span><span class="s2">u</span><span class="s0">\xe5\u0ca5\u0100</span><span class="s2">;c</span><span class="s0">\u0c98\u2b78\u0100</span><span class="s2">;e</span><span class="s0">\u0c92\u2b7d\xf1\u0c98\u0200</span><span class="s2">Aait</span><span class="s0">\u2b88\u2b8b\u2b9d\u2ba7</span><span class="s2">r</span><span class="s0">\xf2\u2988</span><span class="s2">rr</span><span class="s0">\u0180</span><span class="s2">;cw</span><span class="s0">\u2b94\u2b95\u2b99\u619b</span><span class="s2">;</span><span class="s0">\uc000\u2933\u0338</span><span class="s2">;</span><span class="s0">\uc000\u219d\u0338</span><span class="s2">ghtarrow</span><span class="s0">\xbb\u2b95</span><span class="s2">ri</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u0ccb\u0cd6\u0380</span><span class="s2">chimpqu</span><span class="s0">\u2bbd\u2bcd\u2bd9\u2b04\u0b78\u2be4\u2bef\u0200</span><span class="s2">;cer</span><span class="s0">\u0d32\u2bc6\u0d37\u2bc9</span><span class="s2">u</span><span class="s0">\xe5\u0d45</span><span class="s2">;</span><span class="s0">\uc000\ud835\udcc3</span><span class="s2">ort</span><span class="s0">\u026d\u2b05\0\0\u2bd6</span><span class="s2">ar</span><span class="s0">\xe1\u2b56</span><span class="s2">m</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u0d6e\u2bdf\u0100</span><span class="s2">;q</span><span class="s0">\u0d74\u0d73</span><span class="s2">su</span><span class="s0">\u0100</span><span class="s2">bp</span><span class="s0">\u2beb\u2bed\xe5\u0cf8\xe5\u0d0b\u0180</span><span class="s2">bcp</span><span class="s0">\u2bf6\u2c11\u2c19\u0200</span><span class="s2">;Ees</span><span class="s0">\u2bff\u2c00\u0d22\u2c04\u6284</span><span class="s2">;</span><span class="s0">\uc000\u2ac5\u0338</span><span class="s2">et</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u0d1b\u2c0b</span><span class="s2">q</span><span class="s0">\u0100</span><span class="s2">;q</span><span class="s0">\u0d23\u2c00</span><span class="s2">c</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u0d32\u2c17\xf1\u0d38\u0200</span><span class="s2">;Ees</span><span class="s0">\u2c22\u2c23\u0d5f\u2c27\u6285</span><span class="s2">;</span><span class="s0">\uc000\u2ac6\u0338</span><span class="s2">et</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u0d58\u2c2e</span><span class="s2">q</span><span class="s0">\u0100</span><span class="s2">;q</span><span class="s0">\u0d60\u2c23\u0200</span><span class="s2">gilr</span><span class="s0">\u2c3d\u2c3f\u2c45\u2c47\xec\u0bd7</span><span class="s2">lde</span><span class="s0">\u803b\xf1\u40f1\xe7\u0c43</span><span class="s2">iangle</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u2c52\u2c5c</span><span class="s2">eft</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u0c1a\u2c5a\xf1\u0c26</span><span class="s2">ight</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u0ccb\u2c65\xf1\u0cd7\u0100</span><span class="s2">;m</span><span class="s0">\u2c6c\u2c6d\u43bd\u0180</span><span class="s2">;es</span><span class="s0">\u2c74\u2c75\u2c79\u4023</span><span class="s2">ro;</span><span class="s0">\u6116</span><span class="s2">p;</span><span class="s0">\u6007\u0480</span><span class="s2">DHadgilrs</span><span class="s0">\u2c8f\u2c94\u2c99\u2c9e\u2ca3\u2cb0\u2cb6\u2cd3\u2ce3</span><span class="s2">ash;</span><span class="s0">\u62ad</span><span class="s2">arr;</span><span class="s0">\u6904</span><span class="s2">p;</span><span class="s0">\uc000\u224d\u20d2</span><span class="s2">ash;</span><span class="s0">\u62ac\u0100</span><span class="s2">et</span><span class="s0">\u2ca8\u2cac</span><span class="s2">;</span><span class="s0">\uc000\u2265\u20d2</span><span class="s2">;</span><span class="s0">\uc000</span><span class="s2">&gt;</span><span class="s0">\u20d2</span><span class="s2">nfin;</span><span class="s0">\u69de\u0180</span><span class="s2">Aet</span><span class="s0">\u2cbd\u2cc1\u2cc5</span><span class="s2">rr;</span><span class="s0">\u6902</span><span class="s2">;</span><span class="s0">\uc000\u2264\u20d2\u0100</span><span class="s2">;r</span><span class="s0">\u2cca\u2ccd\uc000</span><span class="s2">&lt;</span><span class="s0">\u20d2</span><span class="s2">ie;</span><span class="s0">\uc000\u22b4\u20d2\u0100</span><span class="s2">At</span><span class="s0">\u2cd8\u2cdc</span><span class="s2">rr;</span><span class="s0">\u6903</span><span class="s2">rie;</span><span class="s0">\uc000\u22b5\u20d2</span><span class="s2">im;</span><span class="s0">\uc000\u223c\u20d2\u0180</span><span class="s2">Aan</span><span class="s0">\u2cf0\u2cf4\u2d02</span><span class="s2">rr;</span><span class="s0">\u61d6</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">hr</span><span class="s0">\u2cfa\u2cfd</span><span class="s2">k;</span><span class="s0">\u6923\u0100</span><span class="s2">;o</span><span class="s0">\u13e7\u13e5</span><span class="s2">ear;</span><span class="s0">\u6927\u1253\u1a95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2d2d\0\u2d38\u2d48\u2d60\u2d65\u2d72\u2d84\u1b07\0\0\u2d8d\u2dab\0\u2dc8\u2dce\0\u2ddc\u2e19\u2e2b\u2e3e\u2e43\u0100</span><span class="s2">cs</span><span class="s0">\u2d31\u1a97</span><span class="s2">ute</span><span class="s0">\u803b\xf3\u40f3\u0100</span><span class="s2">iy</span><span class="s0">\u2d3c\u2d45</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">;c</span><span class="s0">\u1a9e\u2d42\u803b\xf4\u40f4</span><span class="s2">;</span><span class="s0">\u443e\u0280</span><span class="s2">abios</span><span class="s0">\u1aa0\u2d52\u2d57\u01c8\u2d5a</span><span class="s2">lac;</span><span class="s0">\u4151</span><span class="s2">v;</span><span class="s0">\u6a38</span><span class="s2">old;</span><span class="s0">\u69bc</span><span class="s2">lig;</span><span class="s0">\u4153\u0100</span><span class="s2">cr</span><span class="s0">\u2d69\u2d6d</span><span class="s2">ir;</span><span class="s0">\u69bf</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd2c\u036f\u2d79\0\0\u2d7c\0\u2d82</span><span class="s2">n;</span><span class="s0">\u42db</span><span class="s2">ave</span><span class="s0">\u803b\xf2\u40f2</span><span class="s2">;</span><span class="s0">\u69c1\u0100</span><span class="s2">bm</span><span class="s0">\u2d88\u0df4</span><span class="s2">ar;</span><span class="s0">\u69b5\u0200</span><span class="s2">acit</span><span class="s0">\u2d95\u2d98\u2da5\u2da8</span><span class="s2">r</span><span class="s0">\xf2\u1a80\u0100</span><span class="s2">ir</span><span class="s0">\u2d9d\u2da0</span><span class="s2">r;</span><span class="s0">\u69be</span><span class="s2">oss;</span><span class="s0">\u69bb</span><span class="s2">n</span><span class="s0">\xe5\u0e52</span><span class="s2">;</span><span class="s0">\u69c0\u0180</span><span class="s2">aei</span><span class="s0">\u2db1\u2db5\u2db9</span><span class="s2">cr;</span><span class="s0">\u414d</span><span class="s2">ga;</span><span class="s0">\u43c9\u0180</span><span class="s2">cdn</span><span class="s0">\u2dc0\u2dc5\u01cd</span><span class="s2">ron;</span><span class="s0">\u43bf</span><span class="s2">;</span><span class="s0">\u69b6</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd60\u0180</span><span class="s2">ael</span><span class="s0">\u2dd4\u2dd7\u01d2</span><span class="s2">r;</span><span class="s0">\u69b7</span><span class="s2">rp;</span><span class="s0">\u69b9\u0380</span><span class="s2">;adiosv</span><span class="s0">\u2dea\u2deb\u2dee\u2e08\u2e0d\u2e10\u2e16\u6228</span><span class="s2">r</span><span class="s0">\xf2\u1a86\u0200</span><span class="s2">;efm</span><span class="s0">\u2df7\u2df8\u2e02\u2e05\u6a5d</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">;o</span><span class="s0">\u2dfe\u2dff\u6134</span><span class="s2">f</span><span class="s0">\xbb\u2dff\u803b\xaa\u40aa\u803b\xba\u40ba</span><span class="s2">gof;</span><span class="s0">\u62b6</span><span class="s2">r;</span><span class="s0">\u6a56</span><span class="s2">lope;</span><span class="s0">\u6a57</span><span class="s2">;</span><span class="s0">\u6a5b\u0180</span><span class="s2">clo</span><span class="s0">\u2e1f\u2e21\u2e27\xf2\u2e01</span><span class="s2">ash</span><span class="s0">\u803b\xf8\u40f8</span><span class="s2">l;</span><span class="s0">\u6298</span><span class="s2">i</span><span class="s0">\u016c\u2e2f\u2e34</span><span class="s2">de</span><span class="s0">\u803b\xf5\u40f5</span><span class="s2">es</span><span class="s0">\u0100</span><span class="s2">;a</span><span class="s0">\u01db\u2e3a</span><span class="s2">s;</span><span class="s0">\u6a36</span><span class="s2">ml</span><span class="s0">\u803b\xf6\u40f6</span><span class="s2">bar;</span><span class="s0">\u633d\u0ae1\u2e5e\0\u2e7d\0\u2e80\u2e9d\0\u2ea2\u2eb9\0\0\u2ecb\u0e9c\0\u2f13\0\0\u2f2b\u2fbc\0\u2fc8</span><span class="s2">r</span><span class="s0">\u0200</span><span class="s2">;ast</span><span class="s0">\u0403\u2e67\u2e72\u0e85\u8100\xb6</span><span class="s2">;l</span><span class="s0">\u2e6d\u2e6e\u40b6</span><span class="s2">le</span><span class="s0">\xec\u0403\u0269\u2e78\0\0\u2e7b</span><span class="s2">m;</span><span class="s0">\u6af3</span><span class="s2">;</span><span class="s0">\u6afd</span><span class="s2">y;</span><span class="s0">\u443f</span><span class="s2">r</span><span class="s0">\u0280</span><span class="s2">cimpt</span><span class="s0">\u2e8b\u2e8f\u2e93\u1865\u2e97</span><span class="s2">nt;</span><span class="s0">\u4025</span><span class="s2">od;</span><span class="s0">\u402e</span><span class="s2">il;</span><span class="s0">\u6030</span><span class="s2">enk;</span><span class="s0">\u6031</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd2d\u0180</span><span class="s2">imo</span><span class="s0">\u2ea8\u2eb0\u2eb4\u0100</span><span class="s2">;v</span><span class="s0">\u2ead\u2eae\u43c6</span><span class="s2">;</span><span class="s0">\u43d5</span><span class="s2">ma</span><span class="s0">\xf4\u0a76</span><span class="s2">ne;</span><span class="s0">\u660e\u0180</span><span class="s2">;tv</span><span class="s0">\u2ebf\u2ec0\u2ec8\u43c0</span><span class="s2">chfork</span><span class="s0">\xbb\u1ffd</span><span class="s2">;</span><span class="s0">\u43d6\u0100</span><span class="s2">au</span><span class="s0">\u2ecf\u2edf</span><span class="s2">n</span><span class="s0">\u0100</span><span class="s2">ck</span><span class="s0">\u2ed5\u2edd</span><span class="s2">k</span><span class="s0">\u0100</span><span class="s2">;h</span><span class="s0">\u21f4\u2edb</span><span class="s2">;</span><span class="s0">\u610e\xf6\u21f4</span><span class="s2">s</span><span class="s0">\u0480</span><span class="s2">;abcdemst</span><span class="s0">\u2ef3\u2ef4\u1908\u2ef9\u2efd\u2f04\u2f06\u2f0a\u2f0e\u402b</span><span class="s2">cir;</span><span class="s0">\u6a23</span><span class="s2">ir;</span><span class="s0">\u6a22\u0100</span><span class="s2">ou</span><span class="s0">\u1d40\u2f02</span><span class="s2">;</span><span class="s0">\u6a25</span><span class="s2">;</span><span class="s0">\u6a72</span><span class="s2">n</span><span class="s0">\u80bb\xb1\u0e9d</span><span class="s2">im;</span><span class="s0">\u6a26</span><span class="s2">wo;</span><span class="s0">\u6a27\u0180</span><span class="s2">ipu</span><span class="s0">\u2f19\u2f20\u2f25</span><span class="s2">ntint;</span><span class="s0">\u6a15</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd61</span><span class="s2">nd</span><span class="s0">\u803b\xa3\u40a3\u0500</span><span class="s2">;Eaceinosu</span><span class="s0">\u0ec8\u2f3f\u2f41\u2f44\u2f47\u2f81\u2f89\u2f92\u2f7e\u2fb6</span><span class="s2">;</span><span class="s0">\u6ab3</span><span class="s2">p;</span><span class="s0">\u6ab7</span><span class="s2">u</span><span class="s0">\xe5\u0ed9\u0100</span><span class="s2">;c</span><span class="s0">\u0ece\u2f4c\u0300</span><span class="s2">;acens</span><span class="s0">\u0ec8\u2f59\u2f5f\u2f66\u2f68\u2f7e</span><span class="s2">ppro</span><span class="s0">\xf8\u2f43</span><span class="s2">urlye</span><span class="s0">\xf1\u0ed9\xf1\u0ece\u0180</span><span class="s2">aes</span><span class="s0">\u2f6f\u2f76\u2f7a</span><span class="s2">pprox;</span><span class="s0">\u6ab9</span><span class="s2">qq;</span><span class="s0">\u6ab5</span><span class="s2">im;</span><span class="s0">\u62e8</span><span class="s2">i</span><span class="s0">\xed\u0edf</span><span class="s2">me</span><span class="s0">\u0100</span><span class="s2">;s</span><span class="s0">\u2f88\u0eae\u6032\u0180</span><span class="s2">Eas</span><span class="s0">\u2f78\u2f90\u2f7a\xf0\u2f75\u0180</span><span class="s2">dfp</span><span class="s0">\u0eec\u2f99\u2faf\u0180</span><span class="s2">als</span><span class="s0">\u2fa0\u2fa5\u2faa</span><span class="s2">lar;</span><span class="s0">\u632e</span><span class="s2">ine;</span><span class="s0">\u6312</span><span class="s2">urf;</span><span class="s0">\u6313\u0100</span><span class="s2">;t</span><span class="s0">\u0efb\u2fb4\xef\u0efb</span><span class="s2">rel;</span><span class="s0">\u62b0\u0100</span><span class="s2">ci</span><span class="s0">\u2fc0\u2fc5</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcc5</span><span class="s2">;</span><span class="s0">\u43c8</span><span class="s2">ncsp;</span><span class="s0">\u6008\u0300</span><span class="s2">fiopsu</span><span class="s0">\u2fda\u22e2\u2fdf\u2fe5\u2feb\u2ff1</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd2e</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd62</span><span class="s2">rime;</span><span class="s0">\u6057</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcc6\u0180</span><span class="s2">aeo</span><span class="s0">\u2ff8\u3009\u3013</span><span class="s2">t</span><span class="s0">\u0100</span><span class="s2">ei</span><span class="s0">\u2ffe\u3005</span><span class="s2">rnion</span><span class="s0">\xf3\u06b0</span><span class="s2">nt;</span><span class="s0">\u6a16</span><span class="s2">st</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u3010\u3011\u403f\xf1\u1f19\xf4\u0f14\u0a80</span><span class="s2">ABHabcdefhilmnoprstux</span><span class="s0">\u3040\u3051\u3055\u3059\u30e0\u310e\u312b\u3147\u3162\u3172\u318e\u3206\u3215\u3224\u3229\u3258\u326e\u3272\u3290\u32b0\u32b7\u0180</span><span class="s2">art</span><span class="s0">\u3047\u304a\u304c</span><span class="s2">r</span><span class="s0">\xf2\u10b3\xf2\u03dd</span><span class="s2">ail;</span><span class="s0">\u691c</span><span class="s2">ar</span><span class="s0">\xf2\u1c65</span><span class="s2">ar;</span><span class="s0">\u6964\u0380</span><span class="s2">cdenqrt</span><span class="s0">\u3068\u3075\u3078\u307f\u308f\u3094\u30cc\u0100</span><span class="s2">eu</span><span class="s0">\u306d\u3071</span><span class="s2">;</span><span class="s0">\uc000\u223d\u0331</span><span class="s2">te;</span><span class="s0">\u4155</span><span class="s2">i</span><span class="s0">\xe3\u116e</span><span class="s2">mptyv;</span><span class="s0">\u69b3</span><span class="s2">g</span><span class="s0">\u0200</span><span class="s2">;del</span><span class="s0">\u0fd1\u3089\u308b\u308d</span><span class="s2">;</span><span class="s0">\u6992</span><span class="s2">;</span><span class="s0">\u69a5\xe5\u0fd1</span><span class="s2">uo</span><span class="s0">\u803b\xbb\u40bb</span><span class="s2">r</span><span class="s0">\u0580</span><span class="s2">;abcfhlpstw</span><span class="s0">\u0fdc\u30ac\u30af\u30b7\u30b9\u30bc\u30be\u30c0\u30c3\u30c7\u30ca</span><span class="s2">p;</span><span class="s0">\u6975\u0100</span><span class="s2">;f</span><span class="s0">\u0fe0\u30b4</span><span class="s2">s;</span><span class="s0">\u6920</span><span class="s2">;</span><span class="s0">\u6933</span><span class="s2">s;</span><span class="s0">\u691e\xeb\u225d\xf0\u272e</span><span class="s2">l;</span><span class="s0">\u6945</span><span class="s2">im;</span><span class="s0">\u6974</span><span class="s2">l;</span><span class="s0">\u61a3</span><span class="s2">;</span><span class="s0">\u619d\u0100</span><span class="s2">ai</span><span class="s0">\u30d1\u30d5</span><span class="s2">il;</span><span class="s0">\u691a</span><span class="s2">o</span><span class="s0">\u0100</span><span class="s2">;n</span><span class="s0">\u30db\u30dc\u6236</span><span class="s2">al</span><span class="s0">\xf3\u0f1e\u0180</span><span class="s2">abr</span><span class="s0">\u30e7\u30ea\u30ee</span><span class="s2">r</span><span class="s0">\xf2\u17e5</span><span class="s2">rk;</span><span class="s0">\u6773\u0100</span><span class="s2">ak</span><span class="s0">\u30f3\u30fd</span><span class="s2">c</span><span class="s0">\u0100</span><span class="s2">ek</span><span class="s0">\u30f9\u30fb</span><span class="s2">;</span><span class="s0">\u407d</span><span class="s2">;</span><span class="s0">\u405d\u0100</span><span class="s2">es</span><span class="s0">\u3102\u3104</span><span class="s2">;</span><span class="s0">\u698c</span><span class="s2">l</span><span class="s0">\u0100</span><span class="s2">du</span><span class="s0">\u310a\u310c</span><span class="s2">;</span><span class="s0">\u698e</span><span class="s2">;</span><span class="s0">\u6990\u0200</span><span class="s2">aeuy</span><span class="s0">\u3117\u311c\u3127\u3129</span><span class="s2">ron;</span><span class="s0">\u4159\u0100</span><span class="s2">di</span><span class="s0">\u3121\u3125</span><span class="s2">il;</span><span class="s0">\u4157\xec\u0ff2\xe2\u30fa</span><span class="s2">;</span><span class="s0">\u4440\u0200</span><span class="s2">clqs</span><span class="s0">\u3134\u3137\u313d\u3144</span><span class="s2">a;</span><span class="s0">\u6937</span><span class="s2">dhar;</span><span class="s0">\u6969</span><span class="s2">uo</span><span class="s0">\u0100</span><span class="s2">;r</span><span class="s0">\u020e\u020d</span><span class="s2">h;</span><span class="s0">\u61b3\u0180</span><span class="s2">acg</span><span class="s0">\u314e\u315f\u0f44</span><span class="s2">l</span><span class="s0">\u0200</span><span class="s2">;ips</span><span class="s0">\u0f78\u3158\u315b\u109c</span><span class="s2">n</span><span class="s0">\xe5\u10bb</span><span class="s2">ar</span><span class="s0">\xf4\u0fa9</span><span class="s2">t;</span><span class="s0">\u65ad\u0180</span><span class="s2">ilr</span><span class="s0">\u3169\u1023\u316e</span><span class="s2">sht;</span><span class="s0">\u697d</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd2f\u0100</span><span class="s2">ao</span><span class="s0">\u3177\u3186</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">du</span><span class="s0">\u317d\u317f\xbb\u047b\u0100</span><span class="s2">;l</span><span class="s0">\u1091\u3184</span><span class="s2">;</span><span class="s0">\u696c\u0100</span><span class="s2">;v</span><span class="s0">\u318b\u318c\u43c1</span><span class="s2">;</span><span class="s0">\u43f1\u0180</span><span class="s2">gns</span><span class="s0">\u3195\u31f9\u31fc</span><span class="s2">ht</span><span class="s0">\u0300</span><span class="s2">ahlrst</span><span class="s0">\u31a4\u31b0\u31c2\u31d8\u31e4\u31ee</span><span class="s2">rrow</span><span class="s0">\u0100</span><span class="s2">;t</span><span class="s0">\u0fdc\u31ad</span><span class="s2">a</span><span class="s0">\xe9\u30c8</span><span class="s2">arpoon</span><span class="s0">\u0100</span><span class="s2">du</span><span class="s0">\u31bb\u31bf</span><span class="s2">ow</span><span class="s0">\xee\u317e</span><span class="s2">p</span><span class="s0">\xbb\u1092</span><span class="s2">eft</span><span class="s0">\u0100</span><span class="s2">ah</span><span class="s0">\u31ca\u31d0</span><span class="s2">rrow</span><span class="s0">\xf3\u0fea</span><span class="s2">arpoon</span><span class="s0">\xf3\u0551</span><span class="s2">ightarrows;</span><span class="s0">\u61c9</span><span class="s2">quigarro</span><span class="s0">\xf7\u30cb</span><span class="s2">hreetimes;</span><span class="s0">\u62cc</span><span class="s2">g;</span><span class="s0">\u42da</span><span class="s2">ingdotse</span><span class="s0">\xf1\u1f32\u0180</span><span class="s2">ahm</span><span class="s0">\u320d\u3210\u3213</span><span class="s2">r</span><span class="s0">\xf2\u0fea</span><span class="s2">a</span><span class="s0">\xf2\u0551</span><span class="s2">;</span><span class="s0">\u600f</span><span class="s2">oust</span><span class="s0">\u0100</span><span class="s2">;a</span><span class="s0">\u321e\u321f\u63b1</span><span class="s2">che</span><span class="s0">\xbb\u321f</span><span class="s2">mid;</span><span class="s0">\u6aee\u0200</span><span class="s2">abpt</span><span class="s0">\u3232\u323d\u3240\u3252\u0100</span><span class="s2">nr</span><span class="s0">\u3237\u323a</span><span class="s2">g;</span><span class="s0">\u67ed</span><span class="s2">r;</span><span class="s0">\u61fe</span><span class="s2">r</span><span class="s0">\xeb\u1003\u0180</span><span class="s2">afl</span><span class="s0">\u3247\u324a\u324e</span><span class="s2">r;</span><span class="s0">\u6986</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd63</span><span class="s2">us;</span><span class="s0">\u6a2e</span><span class="s2">imes;</span><span class="s0">\u6a35\u0100</span><span class="s2">ap</span><span class="s0">\u325d\u3267</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">;g</span><span class="s0">\u3263\u3264\u4029</span><span class="s2">t;</span><span class="s0">\u6994</span><span class="s2">olint;</span><span class="s0">\u6a12</span><span class="s2">ar</span><span class="s0">\xf2\u31e3\u0200</span><span class="s2">achq</span><span class="s0">\u327b\u3280\u10bc\u3285</span><span class="s2">quo;</span><span class="s0">\u603a</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcc7\u0100</span><span class="s2">bu</span><span class="s0">\u30fb\u328a</span><span class="s2">o</span><span class="s0">\u0100</span><span class="s2">;r</span><span class="s0">\u0214\u0213\u0180</span><span class="s2">hir</span><span class="s0">\u3297\u329b\u32a0</span><span class="s2">re</span><span class="s0">\xe5\u31f8</span><span class="s2">mes;</span><span class="s0">\u62ca</span><span class="s2">i</span><span class="s0">\u0200</span><span class="s2">;efl</span><span class="s0">\u32aa\u1059\u1821\u32ab\u65b9</span><span class="s2">tri;</span><span class="s0">\u69ce</span><span class="s2">luhar;</span><span class="s0">\u6968</span><span class="s2">;</span><span class="s0">\u611e\u0d61\u32d5\u32db\u32df\u332c\u3338\u3371\0\u337a\u33a4\0\0\u33ec\u33f0\0\u3428\u3448\u345a\u34ad\u34b1\u34ca\u34f1\0\u3616\0\0\u3633</span><span class="s2">cute;</span><span class="s0">\u415b</span><span class="s2">qu</span><span class="s0">\xef\u27ba\u0500</span><span class="s2">;Eaceinpsy</span><span class="s0">\u11ed\u32f3\u32f5\u32ff\u3302\u330b\u330f\u331f\u3326\u3329</span><span class="s2">;</span><span class="s0">\u6ab4\u01f0\u32fa\0\u32fc</span><span class="s2">;</span><span class="s0">\u6ab8</span><span class="s2">on;</span><span class="s0">\u4161</span><span class="s2">u</span><span class="s0">\xe5\u11fe\u0100</span><span class="s2">;d</span><span class="s0">\u11f3\u3307</span><span class="s2">il;</span><span class="s0">\u415f</span><span class="s2">rc;</span><span class="s0">\u415d\u0180</span><span class="s2">Eas</span><span class="s0">\u3316\u3318\u331b</span><span class="s2">;</span><span class="s0">\u6ab6</span><span class="s2">p;</span><span class="s0">\u6aba</span><span class="s2">im;</span><span class="s0">\u62e9</span><span class="s2">olint;</span><span class="s0">\u6a13</span><span class="s2">i</span><span class="s0">\xed\u1204</span><span class="s2">;</span><span class="s0">\u4441</span><span class="s2">ot</span><span class="s0">\u0180</span><span class="s2">;be</span><span class="s0">\u3334\u1d47\u3335\u62c5</span><span class="s2">;</span><span class="s0">\u6a66\u0380</span><span class="s2">Aacmstx</span><span class="s0">\u3346\u334a\u3357\u335b\u335e\u3363\u336d</span><span class="s2">rr;</span><span class="s0">\u61d8</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">hr</span><span class="s0">\u3350\u3352\xeb\u2228\u0100</span><span class="s2">;o</span><span class="s0">\u0a36\u0a34</span><span class="s2">t</span><span class="s0">\u803b\xa7\u40a7</span><span class="s2">i;</span><span class="s0">\u403b</span><span class="s2">war;</span><span class="s0">\u6929</span><span class="s2">m</span><span class="s0">\u0100</span><span class="s2">in</span><span class="s0">\u3369\xf0</span><span class="s2">nu</span><span class="s0">\xf3\xf1</span><span class="s2">t;</span><span class="s0">\u6736</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">;o</span><span class="s0">\u3376\u2055\uc000\ud835\udd30\u0200</span><span class="s2">acoy</span><span class="s0">\u3382\u3386\u3391\u33a0</span><span class="s2">rp;</span><span class="s0">\u666f\u0100</span><span class="s2">hy</span><span class="s0">\u338b\u338f</span><span class="s2">cy;</span><span class="s0">\u4449</span><span class="s2">;</span><span class="s0">\u4448</span><span class="s2">rt</span><span class="s0">\u026d\u3399\0\0\u339c</span><span class="s2">i</span><span class="s0">\xe4\u1464</span><span class="s2">ara</span><span class="s0">\xec\u2e6f\u803b\xad\u40ad\u0100</span><span class="s2">gm</span><span class="s0">\u33a8\u33b4</span><span class="s2">ma</span><span class="s0">\u0180</span><span class="s2">;fv</span><span class="s0">\u33b1\u33b2\u33b2\u43c3</span><span class="s2">;</span><span class="s0">\u43c2\u0400</span><span class="s2">;deglnpr</span><span class="s0">\u12ab\u33c5\u33c9\u33ce\u33d6\u33de\u33e1\u33e6</span><span class="s2">ot;</span><span class="s0">\u6a6a\u0100</span><span class="s2">;q</span><span class="s0">\u12b1\u12b0\u0100</span><span class="s2">;E</span><span class="s0">\u33d3\u33d4\u6a9e</span><span class="s2">;</span><span class="s0">\u6aa0\u0100</span><span class="s2">;E</span><span class="s0">\u33db\u33dc\u6a9d</span><span class="s2">;</span><span class="s0">\u6a9f</span><span class="s2">e;</span><span class="s0">\u6246</span><span class="s2">lus;</span><span class="s0">\u6a24</span><span class="s2">arr;</span><span class="s0">\u6972</span><span class="s2">ar</span><span class="s0">\xf2\u113d\u0200</span><span class="s2">aeit</span><span class="s0">\u33f8\u3408\u340f\u3417\u0100</span><span class="s2">ls</span><span class="s0">\u33fd\u3404</span><span class="s2">lsetm</span><span class="s0">\xe9\u336a</span><span class="s2">hp;</span><span class="s0">\u6a33</span><span class="s2">parsl;</span><span class="s0">\u69e4\u0100</span><span class="s2">dl</span><span class="s0">\u1463\u3414</span><span class="s2">e;</span><span class="s0">\u6323\u0100</span><span class="s2">;e</span><span class="s0">\u341c\u341d\u6aaa\u0100</span><span class="s2">;s</span><span class="s0">\u3422\u3423\u6aac</span><span class="s2">;</span><span class="s0">\uc000\u2aac\ufe00\u0180</span><span class="s2">flp</span><span class="s0">\u342e\u3433\u3442</span><span class="s2">tcy;</span><span class="s0">\u444c\u0100</span><span class="s2">;b</span><span class="s0">\u3438\u3439\u402f\u0100</span><span class="s2">;a</span><span class="s0">\u343e\u343f\u69c4</span><span class="s2">r;</span><span class="s0">\u633f</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd64</span><span class="s2">a</span><span class="s0">\u0100</span><span class="s2">dr</span><span class="s0">\u344d\u0402</span><span class="s2">es</span><span class="s0">\u0100</span><span class="s2">;u</span><span class="s0">\u3454\u3455\u6660</span><span class="s2">it</span><span class="s0">\xbb\u3455\u0180</span><span class="s2">csu</span><span class="s0">\u3460\u3479\u349f\u0100</span><span class="s2">au</span><span class="s0">\u3465\u346f</span><span class="s2">p</span><span class="s0">\u0100</span><span class="s2">;s</span><span class="s0">\u1188\u346b</span><span class="s2">;</span><span class="s0">\uc000\u2293\ufe00</span><span class="s2">p</span><span class="s0">\u0100</span><span class="s2">;s</span><span class="s0">\u11b4\u3475</span><span class="s2">;</span><span class="s0">\uc000\u2294\ufe00</span><span class="s2">u</span><span class="s0">\u0100</span><span class="s2">bp</span><span class="s0">\u347f\u348f\u0180</span><span class="s2">;es</span><span class="s0">\u1197\u119c\u3486</span><span class="s2">et</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u1197\u348d\xf1\u119d\u0180</span><span class="s2">;es</span><span class="s0">\u11a8\u11ad\u3496</span><span class="s2">et</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u11a8\u349d\xf1\u11ae\u0180</span><span class="s2">;af</span><span class="s0">\u117b\u34a6\u05b0</span><span class="s2">r</span><span class="s0">\u0165\u34ab\u05b1\xbb\u117c</span><span class="s2">ar</span><span class="s0">\xf2\u1148\u0200</span><span class="s2">cemt</span><span class="s0">\u34b9\u34be\u34c2\u34c5</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udcc8</span><span class="s2">tm</span><span class="s0">\xee\xf1</span><span class="s2">i</span><span class="s0">\xec\u3415</span><span class="s2">ar</span><span class="s0">\xe6\u11be\u0100</span><span class="s2">ar</span><span class="s0">\u34ce\u34d5</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">;f</span><span class="s0">\u34d4\u17bf\u6606\u0100</span><span class="s2">an</span><span class="s0">\u34da\u34ed</span><span class="s2">ight</span><span class="s0">\u0100</span><span class="s2">ep</span><span class="s0">\u34e3\u34ea</span><span class="s2">psilo</span><span class="s0">\xee\u1ee0</span><span class="s2">h</span><span class="s0">\xe9\u2eaf</span><span class="s2">s</span><span class="s0">\xbb\u2852\u0280</span><span class="s2">bcmnp</span><span class="s0">\u34fb\u355e\u1209\u358b\u358e\u0480</span><span class="s2">;Edemnprs</span><span class="s0">\u350e\u350f\u3511\u3515\u351e\u3523\u352c\u3531\u3536\u6282</span><span class="s2">;</span><span class="s0">\u6ac5</span><span class="s2">ot;</span><span class="s0">\u6abd\u0100</span><span class="s2">;d</span><span class="s0">\u11da\u351a</span><span class="s2">ot;</span><span class="s0">\u6ac3</span><span class="s2">ult;</span><span class="s0">\u6ac1\u0100</span><span class="s2">Ee</span><span class="s0">\u3528\u352a</span><span class="s2">;</span><span class="s0">\u6acb</span><span class="s2">;</span><span class="s0">\u628a</span><span class="s2">lus;</span><span class="s0">\u6abf</span><span class="s2">arr;</span><span class="s0">\u6979\u0180</span><span class="s2">eiu</span><span class="s0">\u353d\u3552\u3555</span><span class="s2">t</span><span class="s0">\u0180</span><span class="s2">;en</span><span class="s0">\u350e\u3545\u354b</span><span class="s2">q</span><span class="s0">\u0100</span><span class="s2">;q</span><span class="s0">\u11da\u350f</span><span class="s2">eq</span><span class="s0">\u0100</span><span class="s2">;q</span><span class="s0">\u352b\u3528</span><span class="s2">m;</span><span class="s0">\u6ac7\u0100</span><span class="s2">bp</span><span class="s0">\u355a\u355c</span><span class="s2">;</span><span class="s0">\u6ad5</span><span class="s2">;</span><span class="s0">\u6ad3</span><span class="s2">c</span><span class="s0">\u0300</span><span class="s2">;acens</span><span class="s0">\u11ed\u356c\u3572\u3579\u357b\u3326</span><span class="s2">ppro</span><span class="s0">\xf8\u32fa</span><span class="s2">urlye</span><span class="s0">\xf1\u11fe\xf1\u11f3\u0180</span><span class="s2">aes</span><span class="s0">\u3582\u3588\u331b</span><span class="s2">ppro</span><span class="s0">\xf8\u331a</span><span class="s2">q</span><span class="s0">\xf1\u3317</span><span class="s2">g;</span><span class="s0">\u666a\u0680</span><span class="s2">123;Edehlmnps</span><span class="s0">\u35a9\u35ac\u35af\u121c\u35b2\u35b4\u35c0\u35c9\u35d5\u35da\u35df\u35e8\u35ed\u803b\xb9\u40b9\u803b\xb2\u40b2\u803b\xb3\u40b3</span><span class="s2">;</span><span class="s0">\u6ac6\u0100</span><span class="s2">os</span><span class="s0">\u35b9\u35bc</span><span class="s2">t;</span><span class="s0">\u6abe</span><span class="s2">ub;</span><span class="s0">\u6ad8\u0100</span><span class="s2">;d</span><span class="s0">\u1222\u35c5</span><span class="s2">ot;</span><span class="s0">\u6ac4</span><span class="s2">s</span><span class="s0">\u0100</span><span class="s2">ou</span><span class="s0">\u35cf\u35d2</span><span class="s2">l;</span><span class="s0">\u67c9</span><span class="s2">b;</span><span class="s0">\u6ad7</span><span class="s2">arr;</span><span class="s0">\u697b</span><span class="s2">ult;</span><span class="s0">\u6ac2\u0100</span><span class="s2">Ee</span><span class="s0">\u35e4\u35e6</span><span class="s2">;</span><span class="s0">\u6acc</span><span class="s2">;</span><span class="s0">\u628b</span><span class="s2">lus;</span><span class="s0">\u6ac0\u0180</span><span class="s2">eiu</span><span class="s0">\u35f4\u3609\u360c</span><span class="s2">t</span><span class="s0">\u0180</span><span class="s2">;en</span><span class="s0">\u121c\u35fc\u3602</span><span class="s2">q</span><span class="s0">\u0100</span><span class="s2">;q</span><span class="s0">\u1222\u35b2</span><span class="s2">eq</span><span class="s0">\u0100</span><span class="s2">;q</span><span class="s0">\u35e7\u35e4</span><span class="s2">m;</span><span class="s0">\u6ac8\u0100</span><span class="s2">bp</span><span class="s0">\u3611\u3613</span><span class="s2">;</span><span class="s0">\u6ad4</span><span class="s2">;</span><span class="s0">\u6ad6\u0180</span><span class="s2">Aan</span><span class="s0">\u361c\u3620\u362d</span><span class="s2">rr;</span><span class="s0">\u61d9</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">hr</span><span class="s0">\u3626\u3628\xeb\u222e\u0100</span><span class="s2">;o</span><span class="s0">\u0a2b\u0a29</span><span class="s2">war;</span><span class="s0">\u692a</span><span class="s2">lig</span><span class="s0">\u803b\xdf\u40df\u0be1\u3651\u365d\u3660\u12ce\u3673\u3679\0\u367e\u36c2\0\0\0\0\0\u36db\u3703\0\u3709\u376c\0\0\0\u3787\u0272\u3656\0\0\u365b</span><span class="s2">get;</span><span class="s0">\u6316</span><span class="s2">;</span><span class="s0">\u43c4</span><span class="s2">r</span><span class="s0">\xeb\u0e5f\u0180</span><span class="s2">aey</span><span class="s0">\u3666\u366b\u3670</span><span class="s2">ron;</span><span class="s0">\u4165</span><span class="s2">dil;</span><span class="s0">\u4163</span><span class="s2">;</span><span class="s0">\u4442</span><span class="s2">lrec;</span><span class="s0">\u6315</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd31\u0200</span><span class="s2">eiko</span><span class="s0">\u3686\u369d\u36b5\u36bc\u01f2\u368b\0\u3691</span><span class="s2">e</span><span class="s0">\u0100</span><span class="s2">4f</span><span class="s0">\u1284\u1281</span><span class="s2">a</span><span class="s0">\u0180</span><span class="s2">;sv</span><span class="s0">\u3698\u3699\u369b\u43b8</span><span class="s2">ym;</span><span class="s0">\u43d1\u0100</span><span class="s2">cn</span><span class="s0">\u36a2\u36b2</span><span class="s2">k</span><span class="s0">\u0100</span><span class="s2">as</span><span class="s0">\u36a8\u36ae</span><span class="s2">ppro</span><span class="s0">\xf8\u12c1</span><span class="s2">im</span><span class="s0">\xbb\u12ac</span><span class="s2">s</span><span class="s0">\xf0\u129e\u0100</span><span class="s2">as</span><span class="s0">\u36ba\u36ae\xf0\u12c1</span><span class="s2">rn</span><span class="s0">\u803b\xfe\u40fe\u01ec\u031f\u36c6\u22e7</span><span class="s2">es</span><span class="s0">\u8180\xd7</span><span class="s2">;bd</span><span class="s0">\u36cf\u36d0\u36d8\u40d7\u0100</span><span class="s2">;a</span><span class="s0">\u190f\u36d5</span><span class="s2">r;</span><span class="s0">\u6a31</span><span class="s2">;</span><span class="s0">\u6a30\u0180</span><span class="s2">eps</span><span class="s0">\u36e1\u36e3\u3700\xe1\u2a4d\u0200</span><span class="s2">;bcf</span><span class="s0">\u0486\u36ec\u36f0\u36f4</span><span class="s2">ot;</span><span class="s0">\u6336</span><span class="s2">ir;</span><span class="s0">\u6af1\u0100</span><span class="s2">;o</span><span class="s0">\u36f9\u36fc\uc000\ud835\udd65</span><span class="s2">rk;</span><span class="s0">\u6ada\xe1\u3362</span><span class="s2">rime;</span><span class="s0">\u6034\u0180</span><span class="s2">aip</span><span class="s0">\u370f\u3712\u3764</span><span class="s2">d</span><span class="s0">\xe5\u1248\u0380</span><span class="s2">adempst</span><span class="s0">\u3721\u374d\u3740\u3751\u3757\u375c\u375f</span><span class="s2">ngle</span><span class="s0">\u0280</span><span class="s2">;dlqr</span><span class="s0">\u3730\u3731\u3736\u3740\u3742\u65b5</span><span class="s2">own</span><span class="s0">\xbb\u1dbb</span><span class="s2">eft</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u2800\u373e\xf1\u092e</span><span class="s2">;</span><span class="s0">\u625c</span><span class="s2">ight</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u32aa\u374b\xf1\u105a</span><span class="s2">ot;</span><span class="s0">\u65ec</span><span class="s2">inus;</span><span class="s0">\u6a3a</span><span class="s2">lus;</span><span class="s0">\u6a39</span><span class="s2">b;</span><span class="s0">\u69cd</span><span class="s2">ime;</span><span class="s0">\u6a3b</span><span class="s2">ezium;</span><span class="s0">\u63e2\u0180</span><span class="s2">cht</span><span class="s0">\u3772\u377d\u3781\u0100</span><span class="s2">ry</span><span class="s0">\u3777\u377b</span><span class="s2">;</span><span class="s0">\uc000\ud835\udcc9</span><span class="s2">;</span><span class="s0">\u4446</span><span class="s2">cy;</span><span class="s0">\u445b</span><span class="s2">rok;</span><span class="s0">\u4167\u0100</span><span class="s2">io</span><span class="s0">\u378b\u378e</span><span class="s2">x</span><span class="s0">\xf4\u1777</span><span class="s2">head</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u3797\u37a0</span><span class="s2">eftarro</span><span class="s0">\xf7\u084f</span><span class="s2">ightarrow</span><span class="s0">\xbb\u0f5d\u0900</span><span class="s2">AHabcdfghlmoprstuw</span><span class="s0">\u37d0\u37d3\u37d7\u37e4\u37f0\u37fc\u380e\u381c\u3823\u3834\u3851\u385d\u386b\u38a9\u38cc\u38d2\u38ea\u38f6</span><span class="s2">r</span><span class="s0">\xf2\u03ed</span><span class="s2">ar;</span><span class="s0">\u6963\u0100</span><span class="s2">cr</span><span class="s0">\u37dc\u37e2</span><span class="s2">ute</span><span class="s0">\u803b\xfa\u40fa\xf2\u1150</span><span class="s2">r</span><span class="s0">\u01e3\u37ea\0\u37ed</span><span class="s2">y;</span><span class="s0">\u445e</span><span class="s2">ve;</span><span class="s0">\u416d\u0100</span><span class="s2">iy</span><span class="s0">\u37f5\u37fa</span><span class="s2">rc</span><span class="s0">\u803b\xfb\u40fb</span><span class="s2">;</span><span class="s0">\u4443\u0180</span><span class="s2">abh</span><span class="s0">\u3803\u3806\u380b</span><span class="s2">r</span><span class="s0">\xf2\u13ad</span><span class="s2">lac;</span><span class="s0">\u4171</span><span class="s2">a</span><span class="s0">\xf2\u13c3\u0100</span><span class="s2">ir</span><span class="s0">\u3813\u3818</span><span class="s2">sht;</span><span class="s0">\u697e</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd32</span><span class="s2">rave</span><span class="s0">\u803b\xf9\u40f9\u0161\u3827\u3831</span><span class="s2">r</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u382c\u382e\xbb\u0957\xbb\u1083</span><span class="s2">lk;</span><span class="s0">\u6580\u0100</span><span class="s2">ct</span><span class="s0">\u3839\u384d\u026f\u383f\0\0\u384a</span><span class="s2">rn</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u3845\u3846\u631c</span><span class="s2">r</span><span class="s0">\xbb\u3846</span><span class="s2">op;</span><span class="s0">\u630f</span><span class="s2">ri;</span><span class="s0">\u65f8\u0100</span><span class="s2">al</span><span class="s0">\u3856\u385a</span><span class="s2">cr;</span><span class="s0">\u416b\u80bb\xa8\u0349\u0100</span><span class="s2">gp</span><span class="s0">\u3862\u3866</span><span class="s2">on;</span><span class="s0">\u4173</span><span class="s2">f;</span><span class="s0">\uc000\ud835\udd66\u0300</span><span class="s2">adhlsu</span><span class="s0">\u114b\u3878\u387d\u1372\u3891\u38a0</span><span class="s2">own</span><span class="s0">\xe1\u13b3</span><span class="s2">arpoon</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u3888\u388c</span><span class="s2">ef</span><span class="s0">\xf4\u382d</span><span class="s2">igh</span><span class="s0">\xf4\u382f</span><span class="s2">i</span><span class="s0">\u0180</span><span class="s2">;hl</span><span class="s0">\u3899\u389a\u389c\u43c5\xbb\u13fa</span><span class="s2">on</span><span class="s0">\xbb\u389a</span><span class="s2">parrows;</span><span class="s0">\u61c8\u0180</span><span class="s2">cit</span><span class="s0">\u38b0\u38c4\u38c8\u026f\u38b6\0\0\u38c1</span><span class="s2">rn</span><span class="s0">\u0100</span><span class="s2">;e</span><span class="s0">\u38bc\u38bd\u631d</span><span class="s2">r</span><span class="s0">\xbb\u38bd</span><span class="s2">op;</span><span class="s0">\u630e</span><span class="s2">ng;</span><span class="s0">\u416f</span><span class="s2">ri;</span><span class="s0">\u65f9</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcca\u0180</span><span class="s2">dir</span><span class="s0">\u38d9\u38dd\u38e2</span><span class="s2">ot;</span><span class="s0">\u62f0</span><span class="s2">lde;</span><span class="s0">\u4169</span><span class="s2">i</span><span class="s0">\u0100</span><span class="s2">;f</span><span class="s0">\u3730\u38e8\xbb\u1813\u0100</span><span class="s2">am</span><span class="s0">\u38ef\u38f2</span><span class="s2">r</span><span class="s0">\xf2\u38a8</span><span class="s2">l</span><span class="s0">\u803b\xfc\u40fc</span><span class="s2">angle;</span><span class="s0">\u69a7\u0780</span><span class="s2">ABDacdeflnoprsz</span><span class="s0">\u391c\u391f\u3929\u392d\u39b5\u39b8\u39bd\u39df\u39e4\u39e8\u39f3\u39f9\u39fd\u3a01\u3a20</span><span class="s2">r</span><span class="s0">\xf2\u03f7</span><span class="s2">ar</span><span class="s0">\u0100</span><span class="s2">;v</span><span class="s0">\u3926\u3927\u6ae8</span><span class="s2">;</span><span class="s0">\u6ae9</span><span class="s2">as</span><span class="s0">\xe8\u03e1\u0100</span><span class="s2">nr</span><span class="s0">\u3932\u3937</span><span class="s2">grt;</span><span class="s0">\u699c\u0380</span><span class="s2">eknprst</span><span class="s0">\u34e3\u3946\u394b\u3952\u395d\u3964\u3996</span><span class="s2">app</span><span class="s0">\xe1\u2415</span><span class="s2">othin</span><span class="s0">\xe7\u1e96\u0180</span><span class="s2">hir</span><span class="s0">\u34eb\u2ec8\u3959</span><span class="s2">op</span><span class="s0">\xf4\u2fb5\u0100</span><span class="s2">;h</span><span class="s0">\u13b7\u3962\xef\u318d\u0100</span><span class="s2">iu</span><span class="s0">\u3969\u396d</span><span class="s2">gm</span><span class="s0">\xe1\u33b3\u0100</span><span class="s2">bp</span><span class="s0">\u3972\u3984</span><span class="s2">setneq</span><span class="s0">\u0100</span><span class="s2">;q</span><span class="s0">\u397d\u3980\uc000\u228a\ufe00</span><span class="s2">;</span><span class="s0">\uc000\u2acb\ufe00</span><span class="s2">setneq</span><span class="s0">\u0100</span><span class="s2">;q</span><span class="s0">\u398f\u3992\uc000\u228b\ufe00</span><span class="s2">;</span><span class="s0">\uc000\u2acc\ufe00\u0100</span><span class="s2">hr</span><span class="s0">\u399b\u399f</span><span class="s2">et</span><span class="s0">\xe1\u369c</span><span class="s2">iangle</span><span class="s0">\u0100</span><span class="s2">lr</span><span class="s0">\u39aa\u39af</span><span class="s2">eft</span><span class="s0">\xbb\u0925</span><span class="s2">ight</span><span class="s0">\xbb\u1051</span><span class="s2">y;</span><span class="s0">\u4432</span><span class="s2">ash</span><span class="s0">\xbb\u1036\u0180</span><span class="s2">elr</span><span class="s0">\u39c4\u39d2\u39d7\u0180</span><span class="s2">;be</span><span class="s0">\u2dea\u39cb\u39cf</span><span class="s2">ar;</span><span class="s0">\u62bb</span><span class="s2">q;</span><span class="s0">\u625a</span><span class="s2">lip;</span><span class="s0">\u62ee\u0100</span><span class="s2">bt</span><span class="s0">\u39dc\u1468</span><span class="s2">a</span><span class="s0">\xf2\u1469</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd33</span><span class="s2">tr</span><span class="s0">\xe9\u39ae</span><span class="s2">su</span><span class="s0">\u0100</span><span class="s2">bp</span><span class="s0">\u39ef\u39f1\xbb\u0d1c\xbb\u0d59</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd67</span><span class="s2">ro</span><span class="s0">\xf0\u0efb</span><span class="s2">tr</span><span class="s0">\xe9\u39b4\u0100</span><span class="s2">cu</span><span class="s0">\u3a06\u3a0b</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udccb\u0100</span><span class="s2">bp</span><span class="s0">\u3a10\u3a18</span><span class="s2">n</span><span class="s0">\u0100</span><span class="s2">Ee</span><span class="s0">\u3980\u3a16\xbb\u397e</span><span class="s2">n</span><span class="s0">\u0100</span><span class="s2">Ee</span><span class="s0">\u3992\u3a1e\xbb\u3990</span><span class="s2">igzag;</span><span class="s0">\u699a\u0380</span><span class="s2">cefoprs</span><span class="s0">\u3a36\u3a3b\u3a56\u3a5b\u3a54\u3a61\u3a6a</span><span class="s2">irc;</span><span class="s0">\u4175\u0100</span><span class="s2">di</span><span class="s0">\u3a40\u3a51\u0100</span><span class="s2">bg</span><span class="s0">\u3a45\u3a49</span><span class="s2">ar;</span><span class="s0">\u6a5f</span><span class="s2">e</span><span class="s0">\u0100</span><span class="s2">;q</span><span class="s0">\u15fa\u3a4f</span><span class="s2">;</span><span class="s0">\u6259</span><span class="s2">erp;</span><span class="s0">\u6118</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd34</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd68\u0100</span><span class="s2">;e</span><span class="s0">\u1479\u3a66</span><span class="s2">at</span><span class="s0">\xe8\u1479</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udccc\u0ae3\u178e\u3a87\0\u3a8b\0\u3a90\u3a9b\0\0\u3a9d\u3aa8\u3aab\u3aaf\0\0\u3ac3\u3ace\0\u3ad8\u17dc\u17df</span><span class="s2">tr</span><span class="s0">\xe9\u17d1</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd35\u0100</span><span class="s2">Aa</span><span class="s0">\u3a94\u3a97</span><span class="s2">r</span><span class="s0">\xf2\u03c3</span><span class="s2">r</span><span class="s0">\xf2\u09f6</span><span class="s2">;</span><span class="s0">\u43be\u0100</span><span class="s2">Aa</span><span class="s0">\u3aa1\u3aa4</span><span class="s2">r</span><span class="s0">\xf2\u03b8</span><span class="s2">r</span><span class="s0">\xf2\u09eb</span><span class="s2">a</span><span class="s0">\xf0\u2713</span><span class="s2">is;</span><span class="s0">\u62fb\u0180</span><span class="s2">dpt</span><span class="s0">\u17a4\u3ab5\u3abe\u0100</span><span class="s2">fl</span><span class="s0">\u3aba\u17a9</span><span class="s2">;</span><span class="s0">\uc000\ud835\udd69</span><span class="s2">im</span><span class="s0">\xe5\u17b2\u0100</span><span class="s2">Aa</span><span class="s0">\u3ac7\u3aca</span><span class="s2">r</span><span class="s0">\xf2\u03ce</span><span class="s2">r</span><span class="s0">\xf2\u0a01\u0100</span><span class="s2">cq</span><span class="s0">\u3ad2\u17b8</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udccd\u0100</span><span class="s2">pt</span><span class="s0">\u17d6\u3adc</span><span class="s2">r</span><span class="s0">\xe9\u17d4\u0400</span><span class="s2">acefiosu</span><span class="s0">\u3af0\u3afd\u3b08\u3b0c\u3b11\u3b15\u3b1b\u3b21</span><span class="s2">c</span><span class="s0">\u0100</span><span class="s2">uy</span><span class="s0">\u3af6\u3afb</span><span class="s2">te</span><span class="s0">\u803b\xfd\u40fd</span><span class="s2">;</span><span class="s0">\u444f\u0100</span><span class="s2">iy</span><span class="s0">\u3b02\u3b06</span><span class="s2">rc;</span><span class="s0">\u4177</span><span class="s2">;</span><span class="s0">\u444b</span><span class="s2">n</span><span class="s0">\u803b\xa5\u40a5</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd36</span><span class="s2">cy;</span><span class="s0">\u4457</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd6a</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udcce\u0100</span><span class="s2">cm</span><span class="s0">\u3b26\u3b29</span><span class="s2">y;</span><span class="s0">\u444e</span><span class="s2">l</span><span class="s0">\u803b\xff\u40ff\u0500</span><span class="s2">acdefhiosw</span><span class="s0">\u3b42\u3b48\u3b54\u3b58\u3b64\u3b69\u3b6d\u3b74\u3b7a\u3b80</span><span class="s2">cute;</span><span class="s0">\u417a\u0100</span><span class="s2">ay</span><span class="s0">\u3b4d\u3b52</span><span class="s2">ron;</span><span class="s0">\u417e</span><span class="s2">;</span><span class="s0">\u4437</span><span class="s2">ot;</span><span class="s0">\u417c\u0100</span><span class="s2">et</span><span class="s0">\u3b5d\u3b61</span><span class="s2">tr</span><span class="s0">\xe6\u155f</span><span class="s2">a;</span><span class="s0">\u43b6</span><span class="s2">r;</span><span class="s0">\uc000\ud835\udd37</span><span class="s2">cy;</span><span class="s0">\u4436</span><span class="s2">grarr;</span><span class="s0">\u61dd</span><span class="s2">pf;</span><span class="s0">\uc000\ud835\udd6b</span><span class="s2">cr;</span><span class="s0">\uc000\ud835\udccf\u0100</span><span class="s2">jn</span><span class="s0">\u3b85\u3b87</span><span class="s2">;</span><span class="s0">\u600d</span><span class="s2">j;</span><span class="s0">\u600c</span><span class="s2">&quot;</span>
    <span class="s1">.split(</span><span class="s2">&quot;&quot;</span><span class="s1">)</span>
    <span class="s1">.map((c) =&gt; c.charCodeAt(</span><span class="s3">0</span><span class="s1">)))</span><span class="s0">;</span>

<span class="s4">// Generated using scripts/write-decode-map.ts</span>
<span class="s0">new </span><span class="s1">Uint16Array(</span>
<span class="s4">// prettier-ignore</span>
<span class="s2">&quot;</span><span class="s0">\u0200</span><span class="s2">aglq</span><span class="s0">\t\x15\x18\x1b\u026d\x0f\0\0\x12</span><span class="s2">p;</span><span class="s0">\u4026</span><span class="s2">os;</span><span class="s0">\u4027</span><span class="s2">t;</span><span class="s0">\u403e</span><span class="s2">t;</span><span class="s0">\u403c</span><span class="s2">uot;</span><span class="s0">\u4022</span><span class="s2">&quot;</span>
    <span class="s1">.split(</span><span class="s2">&quot;&quot;</span><span class="s1">)</span>
    <span class="s1">.map((c) =&gt; c.charCodeAt(</span><span class="s3">0</span><span class="s1">)))</span><span class="s0">;</span>

<span class="s0">var </span><span class="s1">CharCodes</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(CharCodes) {</span>
    <span class="s1">CharCodes[CharCodes[</span><span class="s2">&quot;NUM&quot;</span><span class="s1">] = </span><span class="s3">35</span><span class="s1">] = </span><span class="s2">&quot;NUM&quot;</span><span class="s0">;</span>
    <span class="s1">CharCodes[CharCodes[</span><span class="s2">&quot;SEMI&quot;</span><span class="s1">] = </span><span class="s3">59</span><span class="s1">] = </span><span class="s2">&quot;SEMI&quot;</span><span class="s0">;</span>
    <span class="s1">CharCodes[CharCodes[</span><span class="s2">&quot;ZERO&quot;</span><span class="s1">] = </span><span class="s3">48</span><span class="s1">] = </span><span class="s2">&quot;ZERO&quot;</span><span class="s0">;</span>
    <span class="s1">CharCodes[CharCodes[</span><span class="s2">&quot;NINE&quot;</span><span class="s1">] = </span><span class="s3">57</span><span class="s1">] = </span><span class="s2">&quot;NINE&quot;</span><span class="s0">;</span>
    <span class="s1">CharCodes[CharCodes[</span><span class="s2">&quot;LOWER_A&quot;</span><span class="s1">] = </span><span class="s3">97</span><span class="s1">] = </span><span class="s2">&quot;LOWER_A&quot;</span><span class="s0">;</span>
    <span class="s1">CharCodes[CharCodes[</span><span class="s2">&quot;LOWER_F&quot;</span><span class="s1">] = </span><span class="s3">102</span><span class="s1">] = </span><span class="s2">&quot;LOWER_F&quot;</span><span class="s0">;</span>
    <span class="s1">CharCodes[CharCodes[</span><span class="s2">&quot;LOWER_X&quot;</span><span class="s1">] = </span><span class="s3">120</span><span class="s1">] = </span><span class="s2">&quot;LOWER_X&quot;</span><span class="s0">;</span>
    <span class="s5">/** Bit that needs to be set to convert an upper case ASCII character to lower case */</span>
    <span class="s1">CharCodes[CharCodes[</span><span class="s2">&quot;To_LOWER_BIT&quot;</span><span class="s1">] = </span><span class="s3">32</span><span class="s1">] = </span><span class="s2">&quot;To_LOWER_BIT&quot;</span><span class="s0">;</span>
<span class="s1">})(CharCodes || (CharCodes = {}))</span><span class="s0">;</span>
<span class="s0">var </span><span class="s1">BinTrieFlags</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(BinTrieFlags) {</span>
    <span class="s1">BinTrieFlags[BinTrieFlags[</span><span class="s2">&quot;VALUE_LENGTH&quot;</span><span class="s1">] = </span><span class="s3">49152</span><span class="s1">] = </span><span class="s2">&quot;VALUE_LENGTH&quot;</span><span class="s0">;</span>
    <span class="s1">BinTrieFlags[BinTrieFlags[</span><span class="s2">&quot;BRANCH_LENGTH&quot;</span><span class="s1">] = </span><span class="s3">16256</span><span class="s1">] = </span><span class="s2">&quot;BRANCH_LENGTH&quot;</span><span class="s0">;</span>
    <span class="s1">BinTrieFlags[BinTrieFlags[</span><span class="s2">&quot;JUMP_TABLE&quot;</span><span class="s1">] = </span><span class="s3">127</span><span class="s1">] = </span><span class="s2">&quot;JUMP_TABLE&quot;</span><span class="s0">;</span>
<span class="s1">})(BinTrieFlags || (BinTrieFlags = {}))</span><span class="s0">;</span>
<span class="s0">function </span><span class="s1">determineBranch(decodeTree</span><span class="s0">, </span><span class="s1">current</span><span class="s0">, </span><span class="s1">nodeIdx</span><span class="s0">, </span><span class="s1">char) {</span>
    <span class="s0">const </span><span class="s1">branchCount = (current &amp; BinTrieFlags.BRANCH_LENGTH) &gt;&gt; </span><span class="s3">7</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">jumpOffset = current &amp; BinTrieFlags.JUMP_TABLE</span><span class="s0">;</span>
    <span class="s4">// Case 1: Single branch encoded in jump offset</span>
    <span class="s0">if </span><span class="s1">(branchCount === </span><span class="s3">0</span><span class="s1">) {</span>
        <span class="s0">return </span><span class="s1">jumpOffset !== </span><span class="s3">0 </span><span class="s1">&amp;&amp; char === jumpOffset ? nodeIdx : -</span><span class="s3">1</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">// Case 2: Multiple branches encoded in jump table</span>
    <span class="s0">if </span><span class="s1">(jumpOffset) {</span>
        <span class="s0">const </span><span class="s1">value = char - jumpOffset</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">value &lt; </span><span class="s3">0 </span><span class="s1">|| value &gt;= branchCount</span>
            <span class="s1">? -</span><span class="s3">1</span>
            <span class="s1">: decodeTree[nodeIdx + value] - </span><span class="s3">1</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">// Case 3: Multiple branches encoded in dictionary</span>
    <span class="s4">// Binary search for the character.</span>
    <span class="s0">let </span><span class="s1">lo = nodeIdx</span><span class="s0">;</span>
    <span class="s0">let </span><span class="s1">hi = lo + branchCount - </span><span class="s3">1</span><span class="s0">;</span>
    <span class="s0">while </span><span class="s1">(lo &lt;= hi) {</span>
        <span class="s0">const </span><span class="s1">mid = (lo + hi) &gt;&gt;&gt; </span><span class="s3">1</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">midVal = decodeTree[mid]</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(midVal &lt; char) {</span>
            <span class="s1">lo = mid + </span><span class="s3">1</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(midVal &gt; char) {</span>
            <span class="s1">hi = mid - </span><span class="s3">1</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">return </span><span class="s1">decodeTree[mid + branchCount]</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">return </span><span class="s1">-</span><span class="s3">1</span><span class="s0">;</span>
<span class="s1">}</span>

<span class="s5">/** All valid namespaces in HTML. */</span>
<span class="s0">var </span><span class="s1">NS</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(NS) {</span>
    <span class="s1">NS[</span><span class="s2">&quot;HTML&quot;</span><span class="s1">] = </span><span class="s2">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="s0">;</span>
    <span class="s1">NS[</span><span class="s2">&quot;MATHML&quot;</span><span class="s1">] = </span><span class="s2">&quot;http://www.w3.org/1998/Math/MathML&quot;</span><span class="s0">;</span>
    <span class="s1">NS[</span><span class="s2">&quot;SVG&quot;</span><span class="s1">] = </span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="s0">;</span>
    <span class="s1">NS[</span><span class="s2">&quot;XLINK&quot;</span><span class="s1">] = </span><span class="s2">&quot;http://www.w3.org/1999/xlink&quot;</span><span class="s0">;</span>
    <span class="s1">NS[</span><span class="s2">&quot;XML&quot;</span><span class="s1">] = </span><span class="s2">&quot;http://www.w3.org/XML/1998/namespace&quot;</span><span class="s0">;</span>
    <span class="s1">NS[</span><span class="s2">&quot;XMLNS&quot;</span><span class="s1">] = </span><span class="s2">&quot;http://www.w3.org/2000/xmlns/&quot;</span><span class="s0">;</span>
<span class="s1">})(NS = NS || (NS = {}))</span><span class="s0">;</span>
<span class="s0">var </span><span class="s1">ATTRS</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(ATTRS) {</span>
    <span class="s1">ATTRS[</span><span class="s2">&quot;TYPE&quot;</span><span class="s1">] = </span><span class="s2">&quot;type&quot;</span><span class="s0">;</span>
    <span class="s1">ATTRS[</span><span class="s2">&quot;ACTION&quot;</span><span class="s1">] = </span><span class="s2">&quot;action&quot;</span><span class="s0">;</span>
    <span class="s1">ATTRS[</span><span class="s2">&quot;ENCODING&quot;</span><span class="s1">] = </span><span class="s2">&quot;encoding&quot;</span><span class="s0">;</span>
    <span class="s1">ATTRS[</span><span class="s2">&quot;PROMPT&quot;</span><span class="s1">] = </span><span class="s2">&quot;prompt&quot;</span><span class="s0">;</span>
    <span class="s1">ATTRS[</span><span class="s2">&quot;NAME&quot;</span><span class="s1">] = </span><span class="s2">&quot;name&quot;</span><span class="s0">;</span>
    <span class="s1">ATTRS[</span><span class="s2">&quot;COLOR&quot;</span><span class="s1">] = </span><span class="s2">&quot;color&quot;</span><span class="s0">;</span>
    <span class="s1">ATTRS[</span><span class="s2">&quot;FACE&quot;</span><span class="s1">] = </span><span class="s2">&quot;face&quot;</span><span class="s0">;</span>
    <span class="s1">ATTRS[</span><span class="s2">&quot;SIZE&quot;</span><span class="s1">] = </span><span class="s2">&quot;size&quot;</span><span class="s0">;</span>
<span class="s1">})(ATTRS = ATTRS || (ATTRS = {}))</span><span class="s0">;</span>
<span class="s5">/**</span>
 <span class="s5">* The mode of the document.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@see </span><span class="s5">{</span><span class="s6">@link </span><span class="s5">https://dom.spec.whatwg.org/#concept-document-limited-quirks}</span>
 <span class="s5">*/</span>
<span class="s0">var </span><span class="s1">DOCUMENT_MODE</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(DOCUMENT_MODE) {</span>
    <span class="s1">DOCUMENT_MODE[</span><span class="s2">&quot;NO_QUIRKS&quot;</span><span class="s1">] = </span><span class="s2">&quot;no-quirks&quot;</span><span class="s0">;</span>
    <span class="s1">DOCUMENT_MODE[</span><span class="s2">&quot;QUIRKS&quot;</span><span class="s1">] = </span><span class="s2">&quot;quirks&quot;</span><span class="s0">;</span>
    <span class="s1">DOCUMENT_MODE[</span><span class="s2">&quot;LIMITED_QUIRKS&quot;</span><span class="s1">] = </span><span class="s2">&quot;limited-quirks&quot;</span><span class="s0">;</span>
<span class="s1">})(DOCUMENT_MODE = DOCUMENT_MODE || (DOCUMENT_MODE = {}))</span><span class="s0">;</span>
<span class="s0">var </span><span class="s1">TAG_NAMES</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(TAG_NAMES) {</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;A&quot;</span><span class="s1">] = </span><span class="s2">&quot;a&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;ADDRESS&quot;</span><span class="s1">] = </span><span class="s2">&quot;address&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;ANNOTATION_XML&quot;</span><span class="s1">] = </span><span class="s2">&quot;annotation-xml&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;APPLET&quot;</span><span class="s1">] = </span><span class="s2">&quot;applet&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;AREA&quot;</span><span class="s1">] = </span><span class="s2">&quot;area&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;ARTICLE&quot;</span><span class="s1">] = </span><span class="s2">&quot;article&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;ASIDE&quot;</span><span class="s1">] = </span><span class="s2">&quot;aside&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;B&quot;</span><span class="s1">] = </span><span class="s2">&quot;b&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;BASE&quot;</span><span class="s1">] = </span><span class="s2">&quot;base&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;BASEFONT&quot;</span><span class="s1">] = </span><span class="s2">&quot;basefont&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;BGSOUND&quot;</span><span class="s1">] = </span><span class="s2">&quot;bgsound&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;BIG&quot;</span><span class="s1">] = </span><span class="s2">&quot;big&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;BLOCKQUOTE&quot;</span><span class="s1">] = </span><span class="s2">&quot;blockquote&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;BODY&quot;</span><span class="s1">] = </span><span class="s2">&quot;body&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;BR&quot;</span><span class="s1">] = </span><span class="s2">&quot;br&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;BUTTON&quot;</span><span class="s1">] = </span><span class="s2">&quot;button&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;CAPTION&quot;</span><span class="s1">] = </span><span class="s2">&quot;caption&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;CENTER&quot;</span><span class="s1">] = </span><span class="s2">&quot;center&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;CODE&quot;</span><span class="s1">] = </span><span class="s2">&quot;code&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;COL&quot;</span><span class="s1">] = </span><span class="s2">&quot;col&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;COLGROUP&quot;</span><span class="s1">] = </span><span class="s2">&quot;colgroup&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;DD&quot;</span><span class="s1">] = </span><span class="s2">&quot;dd&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;DESC&quot;</span><span class="s1">] = </span><span class="s2">&quot;desc&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;DETAILS&quot;</span><span class="s1">] = </span><span class="s2">&quot;details&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;DIALOG&quot;</span><span class="s1">] = </span><span class="s2">&quot;dialog&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;DIR&quot;</span><span class="s1">] = </span><span class="s2">&quot;dir&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;DIV&quot;</span><span class="s1">] = </span><span class="s2">&quot;div&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;DL&quot;</span><span class="s1">] = </span><span class="s2">&quot;dl&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;DT&quot;</span><span class="s1">] = </span><span class="s2">&quot;dt&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;EM&quot;</span><span class="s1">] = </span><span class="s2">&quot;em&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;EMBED&quot;</span><span class="s1">] = </span><span class="s2">&quot;embed&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;FIELDSET&quot;</span><span class="s1">] = </span><span class="s2">&quot;fieldset&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;FIGCAPTION&quot;</span><span class="s1">] = </span><span class="s2">&quot;figcaption&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;FIGURE&quot;</span><span class="s1">] = </span><span class="s2">&quot;figure&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;FONT&quot;</span><span class="s1">] = </span><span class="s2">&quot;font&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;FOOTER&quot;</span><span class="s1">] = </span><span class="s2">&quot;footer&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;FOREIGN_OBJECT&quot;</span><span class="s1">] = </span><span class="s2">&quot;foreignObject&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;FORM&quot;</span><span class="s1">] = </span><span class="s2">&quot;form&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;FRAME&quot;</span><span class="s1">] = </span><span class="s2">&quot;frame&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;FRAMESET&quot;</span><span class="s1">] = </span><span class="s2">&quot;frameset&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;H1&quot;</span><span class="s1">] = </span><span class="s2">&quot;h1&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;H2&quot;</span><span class="s1">] = </span><span class="s2">&quot;h2&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;H3&quot;</span><span class="s1">] = </span><span class="s2">&quot;h3&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;H4&quot;</span><span class="s1">] = </span><span class="s2">&quot;h4&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;H5&quot;</span><span class="s1">] = </span><span class="s2">&quot;h5&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;H6&quot;</span><span class="s1">] = </span><span class="s2">&quot;h6&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;HEAD&quot;</span><span class="s1">] = </span><span class="s2">&quot;head&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;HEADER&quot;</span><span class="s1">] = </span><span class="s2">&quot;header&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;HGROUP&quot;</span><span class="s1">] = </span><span class="s2">&quot;hgroup&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;HR&quot;</span><span class="s1">] = </span><span class="s2">&quot;hr&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;HTML&quot;</span><span class="s1">] = </span><span class="s2">&quot;html&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;I&quot;</span><span class="s1">] = </span><span class="s2">&quot;i&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;IMG&quot;</span><span class="s1">] = </span><span class="s2">&quot;img&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;IMAGE&quot;</span><span class="s1">] = </span><span class="s2">&quot;image&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;INPUT&quot;</span><span class="s1">] = </span><span class="s2">&quot;input&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;IFRAME&quot;</span><span class="s1">] = </span><span class="s2">&quot;iframe&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;KEYGEN&quot;</span><span class="s1">] = </span><span class="s2">&quot;keygen&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;LABEL&quot;</span><span class="s1">] = </span><span class="s2">&quot;label&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;LI&quot;</span><span class="s1">] = </span><span class="s2">&quot;li&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;LINK&quot;</span><span class="s1">] = </span><span class="s2">&quot;link&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;LISTING&quot;</span><span class="s1">] = </span><span class="s2">&quot;listing&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MAIN&quot;</span><span class="s1">] = </span><span class="s2">&quot;main&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MALIGNMARK&quot;</span><span class="s1">] = </span><span class="s2">&quot;malignmark&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MARQUEE&quot;</span><span class="s1">] = </span><span class="s2">&quot;marquee&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MATH&quot;</span><span class="s1">] = </span><span class="s2">&quot;math&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MENU&quot;</span><span class="s1">] = </span><span class="s2">&quot;menu&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;META&quot;</span><span class="s1">] = </span><span class="s2">&quot;meta&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MGLYPH&quot;</span><span class="s1">] = </span><span class="s2">&quot;mglyph&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MI&quot;</span><span class="s1">] = </span><span class="s2">&quot;mi&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MO&quot;</span><span class="s1">] = </span><span class="s2">&quot;mo&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MN&quot;</span><span class="s1">] = </span><span class="s2">&quot;mn&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MS&quot;</span><span class="s1">] = </span><span class="s2">&quot;ms&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;MTEXT&quot;</span><span class="s1">] = </span><span class="s2">&quot;mtext&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;NAV&quot;</span><span class="s1">] = </span><span class="s2">&quot;nav&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;NOBR&quot;</span><span class="s1">] = </span><span class="s2">&quot;nobr&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;NOFRAMES&quot;</span><span class="s1">] = </span><span class="s2">&quot;noframes&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;NOEMBED&quot;</span><span class="s1">] = </span><span class="s2">&quot;noembed&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;NOSCRIPT&quot;</span><span class="s1">] = </span><span class="s2">&quot;noscript&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;OBJECT&quot;</span><span class="s1">] = </span><span class="s2">&quot;object&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;OL&quot;</span><span class="s1">] = </span><span class="s2">&quot;ol&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;OPTGROUP&quot;</span><span class="s1">] = </span><span class="s2">&quot;optgroup&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;OPTION&quot;</span><span class="s1">] = </span><span class="s2">&quot;option&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;P&quot;</span><span class="s1">] = </span><span class="s2">&quot;p&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;PARAM&quot;</span><span class="s1">] = </span><span class="s2">&quot;param&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;PLAINTEXT&quot;</span><span class="s1">] = </span><span class="s2">&quot;plaintext&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;PRE&quot;</span><span class="s1">] = </span><span class="s2">&quot;pre&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;RB&quot;</span><span class="s1">] = </span><span class="s2">&quot;rb&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;RP&quot;</span><span class="s1">] = </span><span class="s2">&quot;rp&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;RT&quot;</span><span class="s1">] = </span><span class="s2">&quot;rt&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;RTC&quot;</span><span class="s1">] = </span><span class="s2">&quot;rtc&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;RUBY&quot;</span><span class="s1">] = </span><span class="s2">&quot;ruby&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;S&quot;</span><span class="s1">] = </span><span class="s2">&quot;s&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;SCRIPT&quot;</span><span class="s1">] = </span><span class="s2">&quot;script&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;SECTION&quot;</span><span class="s1">] = </span><span class="s2">&quot;section&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;SELECT&quot;</span><span class="s1">] = </span><span class="s2">&quot;select&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;SOURCE&quot;</span><span class="s1">] = </span><span class="s2">&quot;source&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;SMALL&quot;</span><span class="s1">] = </span><span class="s2">&quot;small&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;SPAN&quot;</span><span class="s1">] = </span><span class="s2">&quot;span&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;STRIKE&quot;</span><span class="s1">] = </span><span class="s2">&quot;strike&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;STRONG&quot;</span><span class="s1">] = </span><span class="s2">&quot;strong&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;STYLE&quot;</span><span class="s1">] = </span><span class="s2">&quot;style&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;SUB&quot;</span><span class="s1">] = </span><span class="s2">&quot;sub&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;SUMMARY&quot;</span><span class="s1">] = </span><span class="s2">&quot;summary&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;SUP&quot;</span><span class="s1">] = </span><span class="s2">&quot;sup&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TABLE&quot;</span><span class="s1">] = </span><span class="s2">&quot;table&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TBODY&quot;</span><span class="s1">] = </span><span class="s2">&quot;tbody&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TEMPLATE&quot;</span><span class="s1">] = </span><span class="s2">&quot;template&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TEXTAREA&quot;</span><span class="s1">] = </span><span class="s2">&quot;textarea&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TFOOT&quot;</span><span class="s1">] = </span><span class="s2">&quot;tfoot&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TD&quot;</span><span class="s1">] = </span><span class="s2">&quot;td&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TH&quot;</span><span class="s1">] = </span><span class="s2">&quot;th&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;THEAD&quot;</span><span class="s1">] = </span><span class="s2">&quot;thead&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TITLE&quot;</span><span class="s1">] = </span><span class="s2">&quot;title&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TR&quot;</span><span class="s1">] = </span><span class="s2">&quot;tr&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TRACK&quot;</span><span class="s1">] = </span><span class="s2">&quot;track&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;TT&quot;</span><span class="s1">] = </span><span class="s2">&quot;tt&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;U&quot;</span><span class="s1">] = </span><span class="s2">&quot;u&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;UL&quot;</span><span class="s1">] = </span><span class="s2">&quot;ul&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;SVG&quot;</span><span class="s1">] = </span><span class="s2">&quot;svg&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;VAR&quot;</span><span class="s1">] = </span><span class="s2">&quot;var&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;WBR&quot;</span><span class="s1">] = </span><span class="s2">&quot;wbr&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_NAMES[</span><span class="s2">&quot;XMP&quot;</span><span class="s1">] = </span><span class="s2">&quot;xmp&quot;</span><span class="s0">;</span>
<span class="s1">})(TAG_NAMES = TAG_NAMES || (TAG_NAMES = {}))</span><span class="s0">;</span>
<span class="s5">/**</span>
 <span class="s5">* Tag IDs are numeric IDs for known tag names.</span>
 <span class="s5">*</span>
 <span class="s5">* We use tag IDs to improve the performance of tag name comparisons.</span>
 <span class="s5">*/</span>
<span class="s0">var </span><span class="s1">TAG_ID</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(TAG_ID) {</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;UNKNOWN&quot;</span><span class="s1">] = </span><span class="s3">0</span><span class="s1">] = </span><span class="s2">&quot;UNKNOWN&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;A&quot;</span><span class="s1">] = </span><span class="s3">1</span><span class="s1">] = </span><span class="s2">&quot;A&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;ADDRESS&quot;</span><span class="s1">] = </span><span class="s3">2</span><span class="s1">] = </span><span class="s2">&quot;ADDRESS&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;ANNOTATION_XML&quot;</span><span class="s1">] = </span><span class="s3">3</span><span class="s1">] = </span><span class="s2">&quot;ANNOTATION_XML&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;APPLET&quot;</span><span class="s1">] = </span><span class="s3">4</span><span class="s1">] = </span><span class="s2">&quot;APPLET&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;AREA&quot;</span><span class="s1">] = </span><span class="s3">5</span><span class="s1">] = </span><span class="s2">&quot;AREA&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;ARTICLE&quot;</span><span class="s1">] = </span><span class="s3">6</span><span class="s1">] = </span><span class="s2">&quot;ARTICLE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;ASIDE&quot;</span><span class="s1">] = </span><span class="s3">7</span><span class="s1">] = </span><span class="s2">&quot;ASIDE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;B&quot;</span><span class="s1">] = </span><span class="s3">8</span><span class="s1">] = </span><span class="s2">&quot;B&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;BASE&quot;</span><span class="s1">] = </span><span class="s3">9</span><span class="s1">] = </span><span class="s2">&quot;BASE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;BASEFONT&quot;</span><span class="s1">] = </span><span class="s3">10</span><span class="s1">] = </span><span class="s2">&quot;BASEFONT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;BGSOUND&quot;</span><span class="s1">] = </span><span class="s3">11</span><span class="s1">] = </span><span class="s2">&quot;BGSOUND&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;BIG&quot;</span><span class="s1">] = </span><span class="s3">12</span><span class="s1">] = </span><span class="s2">&quot;BIG&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;BLOCKQUOTE&quot;</span><span class="s1">] = </span><span class="s3">13</span><span class="s1">] = </span><span class="s2">&quot;BLOCKQUOTE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;BODY&quot;</span><span class="s1">] = </span><span class="s3">14</span><span class="s1">] = </span><span class="s2">&quot;BODY&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;BR&quot;</span><span class="s1">] = </span><span class="s3">15</span><span class="s1">] = </span><span class="s2">&quot;BR&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;BUTTON&quot;</span><span class="s1">] = </span><span class="s3">16</span><span class="s1">] = </span><span class="s2">&quot;BUTTON&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;CAPTION&quot;</span><span class="s1">] = </span><span class="s3">17</span><span class="s1">] = </span><span class="s2">&quot;CAPTION&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;CENTER&quot;</span><span class="s1">] = </span><span class="s3">18</span><span class="s1">] = </span><span class="s2">&quot;CENTER&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;CODE&quot;</span><span class="s1">] = </span><span class="s3">19</span><span class="s1">] = </span><span class="s2">&quot;CODE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;COL&quot;</span><span class="s1">] = </span><span class="s3">20</span><span class="s1">] = </span><span class="s2">&quot;COL&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;COLGROUP&quot;</span><span class="s1">] = </span><span class="s3">21</span><span class="s1">] = </span><span class="s2">&quot;COLGROUP&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;DD&quot;</span><span class="s1">] = </span><span class="s3">22</span><span class="s1">] = </span><span class="s2">&quot;DD&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;DESC&quot;</span><span class="s1">] = </span><span class="s3">23</span><span class="s1">] = </span><span class="s2">&quot;DESC&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;DETAILS&quot;</span><span class="s1">] = </span><span class="s3">24</span><span class="s1">] = </span><span class="s2">&quot;DETAILS&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;DIALOG&quot;</span><span class="s1">] = </span><span class="s3">25</span><span class="s1">] = </span><span class="s2">&quot;DIALOG&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;DIR&quot;</span><span class="s1">] = </span><span class="s3">26</span><span class="s1">] = </span><span class="s2">&quot;DIR&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;DIV&quot;</span><span class="s1">] = </span><span class="s3">27</span><span class="s1">] = </span><span class="s2">&quot;DIV&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;DL&quot;</span><span class="s1">] = </span><span class="s3">28</span><span class="s1">] = </span><span class="s2">&quot;DL&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;DT&quot;</span><span class="s1">] = </span><span class="s3">29</span><span class="s1">] = </span><span class="s2">&quot;DT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;EM&quot;</span><span class="s1">] = </span><span class="s3">30</span><span class="s1">] = </span><span class="s2">&quot;EM&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;EMBED&quot;</span><span class="s1">] = </span><span class="s3">31</span><span class="s1">] = </span><span class="s2">&quot;EMBED&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;FIELDSET&quot;</span><span class="s1">] = </span><span class="s3">32</span><span class="s1">] = </span><span class="s2">&quot;FIELDSET&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;FIGCAPTION&quot;</span><span class="s1">] = </span><span class="s3">33</span><span class="s1">] = </span><span class="s2">&quot;FIGCAPTION&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;FIGURE&quot;</span><span class="s1">] = </span><span class="s3">34</span><span class="s1">] = </span><span class="s2">&quot;FIGURE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;FONT&quot;</span><span class="s1">] = </span><span class="s3">35</span><span class="s1">] = </span><span class="s2">&quot;FONT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;FOOTER&quot;</span><span class="s1">] = </span><span class="s3">36</span><span class="s1">] = </span><span class="s2">&quot;FOOTER&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;FOREIGN_OBJECT&quot;</span><span class="s1">] = </span><span class="s3">37</span><span class="s1">] = </span><span class="s2">&quot;FOREIGN_OBJECT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;FORM&quot;</span><span class="s1">] = </span><span class="s3">38</span><span class="s1">] = </span><span class="s2">&quot;FORM&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;FRAME&quot;</span><span class="s1">] = </span><span class="s3">39</span><span class="s1">] = </span><span class="s2">&quot;FRAME&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;FRAMESET&quot;</span><span class="s1">] = </span><span class="s3">40</span><span class="s1">] = </span><span class="s2">&quot;FRAMESET&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;H1&quot;</span><span class="s1">] = </span><span class="s3">41</span><span class="s1">] = </span><span class="s2">&quot;H1&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;H2&quot;</span><span class="s1">] = </span><span class="s3">42</span><span class="s1">] = </span><span class="s2">&quot;H2&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;H3&quot;</span><span class="s1">] = </span><span class="s3">43</span><span class="s1">] = </span><span class="s2">&quot;H3&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;H4&quot;</span><span class="s1">] = </span><span class="s3">44</span><span class="s1">] = </span><span class="s2">&quot;H4&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;H5&quot;</span><span class="s1">] = </span><span class="s3">45</span><span class="s1">] = </span><span class="s2">&quot;H5&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;H6&quot;</span><span class="s1">] = </span><span class="s3">46</span><span class="s1">] = </span><span class="s2">&quot;H6&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;HEAD&quot;</span><span class="s1">] = </span><span class="s3">47</span><span class="s1">] = </span><span class="s2">&quot;HEAD&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;HEADER&quot;</span><span class="s1">] = </span><span class="s3">48</span><span class="s1">] = </span><span class="s2">&quot;HEADER&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;HGROUP&quot;</span><span class="s1">] = </span><span class="s3">49</span><span class="s1">] = </span><span class="s2">&quot;HGROUP&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;HR&quot;</span><span class="s1">] = </span><span class="s3">50</span><span class="s1">] = </span><span class="s2">&quot;HR&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;HTML&quot;</span><span class="s1">] = </span><span class="s3">51</span><span class="s1">] = </span><span class="s2">&quot;HTML&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;I&quot;</span><span class="s1">] = </span><span class="s3">52</span><span class="s1">] = </span><span class="s2">&quot;I&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;IMG&quot;</span><span class="s1">] = </span><span class="s3">53</span><span class="s1">] = </span><span class="s2">&quot;IMG&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;IMAGE&quot;</span><span class="s1">] = </span><span class="s3">54</span><span class="s1">] = </span><span class="s2">&quot;IMAGE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;INPUT&quot;</span><span class="s1">] = </span><span class="s3">55</span><span class="s1">] = </span><span class="s2">&quot;INPUT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;IFRAME&quot;</span><span class="s1">] = </span><span class="s3">56</span><span class="s1">] = </span><span class="s2">&quot;IFRAME&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;KEYGEN&quot;</span><span class="s1">] = </span><span class="s3">57</span><span class="s1">] = </span><span class="s2">&quot;KEYGEN&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;LABEL&quot;</span><span class="s1">] = </span><span class="s3">58</span><span class="s1">] = </span><span class="s2">&quot;LABEL&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;LI&quot;</span><span class="s1">] = </span><span class="s3">59</span><span class="s1">] = </span><span class="s2">&quot;LI&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;LINK&quot;</span><span class="s1">] = </span><span class="s3">60</span><span class="s1">] = </span><span class="s2">&quot;LINK&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;LISTING&quot;</span><span class="s1">] = </span><span class="s3">61</span><span class="s1">] = </span><span class="s2">&quot;LISTING&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MAIN&quot;</span><span class="s1">] = </span><span class="s3">62</span><span class="s1">] = </span><span class="s2">&quot;MAIN&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MALIGNMARK&quot;</span><span class="s1">] = </span><span class="s3">63</span><span class="s1">] = </span><span class="s2">&quot;MALIGNMARK&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MARQUEE&quot;</span><span class="s1">] = </span><span class="s3">64</span><span class="s1">] = </span><span class="s2">&quot;MARQUEE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MATH&quot;</span><span class="s1">] = </span><span class="s3">65</span><span class="s1">] = </span><span class="s2">&quot;MATH&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MENU&quot;</span><span class="s1">] = </span><span class="s3">66</span><span class="s1">] = </span><span class="s2">&quot;MENU&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;META&quot;</span><span class="s1">] = </span><span class="s3">67</span><span class="s1">] = </span><span class="s2">&quot;META&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MGLYPH&quot;</span><span class="s1">] = </span><span class="s3">68</span><span class="s1">] = </span><span class="s2">&quot;MGLYPH&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MI&quot;</span><span class="s1">] = </span><span class="s3">69</span><span class="s1">] = </span><span class="s2">&quot;MI&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MO&quot;</span><span class="s1">] = </span><span class="s3">70</span><span class="s1">] = </span><span class="s2">&quot;MO&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MN&quot;</span><span class="s1">] = </span><span class="s3">71</span><span class="s1">] = </span><span class="s2">&quot;MN&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MS&quot;</span><span class="s1">] = </span><span class="s3">72</span><span class="s1">] = </span><span class="s2">&quot;MS&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;MTEXT&quot;</span><span class="s1">] = </span><span class="s3">73</span><span class="s1">] = </span><span class="s2">&quot;MTEXT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;NAV&quot;</span><span class="s1">] = </span><span class="s3">74</span><span class="s1">] = </span><span class="s2">&quot;NAV&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;NOBR&quot;</span><span class="s1">] = </span><span class="s3">75</span><span class="s1">] = </span><span class="s2">&quot;NOBR&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;NOFRAMES&quot;</span><span class="s1">] = </span><span class="s3">76</span><span class="s1">] = </span><span class="s2">&quot;NOFRAMES&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;NOEMBED&quot;</span><span class="s1">] = </span><span class="s3">77</span><span class="s1">] = </span><span class="s2">&quot;NOEMBED&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;NOSCRIPT&quot;</span><span class="s1">] = </span><span class="s3">78</span><span class="s1">] = </span><span class="s2">&quot;NOSCRIPT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;OBJECT&quot;</span><span class="s1">] = </span><span class="s3">79</span><span class="s1">] = </span><span class="s2">&quot;OBJECT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;OL&quot;</span><span class="s1">] = </span><span class="s3">80</span><span class="s1">] = </span><span class="s2">&quot;OL&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;OPTGROUP&quot;</span><span class="s1">] = </span><span class="s3">81</span><span class="s1">] = </span><span class="s2">&quot;OPTGROUP&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;OPTION&quot;</span><span class="s1">] = </span><span class="s3">82</span><span class="s1">] = </span><span class="s2">&quot;OPTION&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;P&quot;</span><span class="s1">] = </span><span class="s3">83</span><span class="s1">] = </span><span class="s2">&quot;P&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;PARAM&quot;</span><span class="s1">] = </span><span class="s3">84</span><span class="s1">] = </span><span class="s2">&quot;PARAM&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;PLAINTEXT&quot;</span><span class="s1">] = </span><span class="s3">85</span><span class="s1">] = </span><span class="s2">&quot;PLAINTEXT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;PRE&quot;</span><span class="s1">] = </span><span class="s3">86</span><span class="s1">] = </span><span class="s2">&quot;PRE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;RB&quot;</span><span class="s1">] = </span><span class="s3">87</span><span class="s1">] = </span><span class="s2">&quot;RB&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;RP&quot;</span><span class="s1">] = </span><span class="s3">88</span><span class="s1">] = </span><span class="s2">&quot;RP&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;RT&quot;</span><span class="s1">] = </span><span class="s3">89</span><span class="s1">] = </span><span class="s2">&quot;RT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;RTC&quot;</span><span class="s1">] = </span><span class="s3">90</span><span class="s1">] = </span><span class="s2">&quot;RTC&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;RUBY&quot;</span><span class="s1">] = </span><span class="s3">91</span><span class="s1">] = </span><span class="s2">&quot;RUBY&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;S&quot;</span><span class="s1">] = </span><span class="s3">92</span><span class="s1">] = </span><span class="s2">&quot;S&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;SCRIPT&quot;</span><span class="s1">] = </span><span class="s3">93</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;SECTION&quot;</span><span class="s1">] = </span><span class="s3">94</span><span class="s1">] = </span><span class="s2">&quot;SECTION&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;SELECT&quot;</span><span class="s1">] = </span><span class="s3">95</span><span class="s1">] = </span><span class="s2">&quot;SELECT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;SOURCE&quot;</span><span class="s1">] = </span><span class="s3">96</span><span class="s1">] = </span><span class="s2">&quot;SOURCE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;SMALL&quot;</span><span class="s1">] = </span><span class="s3">97</span><span class="s1">] = </span><span class="s2">&quot;SMALL&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;SPAN&quot;</span><span class="s1">] = </span><span class="s3">98</span><span class="s1">] = </span><span class="s2">&quot;SPAN&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;STRIKE&quot;</span><span class="s1">] = </span><span class="s3">99</span><span class="s1">] = </span><span class="s2">&quot;STRIKE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;STRONG&quot;</span><span class="s1">] = </span><span class="s3">100</span><span class="s1">] = </span><span class="s2">&quot;STRONG&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;STYLE&quot;</span><span class="s1">] = </span><span class="s3">101</span><span class="s1">] = </span><span class="s2">&quot;STYLE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;SUB&quot;</span><span class="s1">] = </span><span class="s3">102</span><span class="s1">] = </span><span class="s2">&quot;SUB&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;SUMMARY&quot;</span><span class="s1">] = </span><span class="s3">103</span><span class="s1">] = </span><span class="s2">&quot;SUMMARY&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;SUP&quot;</span><span class="s1">] = </span><span class="s3">104</span><span class="s1">] = </span><span class="s2">&quot;SUP&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TABLE&quot;</span><span class="s1">] = </span><span class="s3">105</span><span class="s1">] = </span><span class="s2">&quot;TABLE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TBODY&quot;</span><span class="s1">] = </span><span class="s3">106</span><span class="s1">] = </span><span class="s2">&quot;TBODY&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TEMPLATE&quot;</span><span class="s1">] = </span><span class="s3">107</span><span class="s1">] = </span><span class="s2">&quot;TEMPLATE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TEXTAREA&quot;</span><span class="s1">] = </span><span class="s3">108</span><span class="s1">] = </span><span class="s2">&quot;TEXTAREA&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TFOOT&quot;</span><span class="s1">] = </span><span class="s3">109</span><span class="s1">] = </span><span class="s2">&quot;TFOOT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TD&quot;</span><span class="s1">] = </span><span class="s3">110</span><span class="s1">] = </span><span class="s2">&quot;TD&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TH&quot;</span><span class="s1">] = </span><span class="s3">111</span><span class="s1">] = </span><span class="s2">&quot;TH&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;THEAD&quot;</span><span class="s1">] = </span><span class="s3">112</span><span class="s1">] = </span><span class="s2">&quot;THEAD&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TITLE&quot;</span><span class="s1">] = </span><span class="s3">113</span><span class="s1">] = </span><span class="s2">&quot;TITLE&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TR&quot;</span><span class="s1">] = </span><span class="s3">114</span><span class="s1">] = </span><span class="s2">&quot;TR&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TRACK&quot;</span><span class="s1">] = </span><span class="s3">115</span><span class="s1">] = </span><span class="s2">&quot;TRACK&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;TT&quot;</span><span class="s1">] = </span><span class="s3">116</span><span class="s1">] = </span><span class="s2">&quot;TT&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;U&quot;</span><span class="s1">] = </span><span class="s3">117</span><span class="s1">] = </span><span class="s2">&quot;U&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;UL&quot;</span><span class="s1">] = </span><span class="s3">118</span><span class="s1">] = </span><span class="s2">&quot;UL&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;SVG&quot;</span><span class="s1">] = </span><span class="s3">119</span><span class="s1">] = </span><span class="s2">&quot;SVG&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;VAR&quot;</span><span class="s1">] = </span><span class="s3">120</span><span class="s1">] = </span><span class="s2">&quot;VAR&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;WBR&quot;</span><span class="s1">] = </span><span class="s3">121</span><span class="s1">] = </span><span class="s2">&quot;WBR&quot;</span><span class="s0">;</span>
    <span class="s1">TAG_ID[TAG_ID[</span><span class="s2">&quot;XMP&quot;</span><span class="s1">] = </span><span class="s3">122</span><span class="s1">] = </span><span class="s2">&quot;XMP&quot;</span><span class="s0">;</span>
<span class="s1">})(TAG_ID = TAG_ID || (TAG_ID = {}))</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">TAG_NAME_TO_ID = </span><span class="s0">new </span><span class="s1">Map([</span>
    <span class="s1">[TAG_NAMES.A</span><span class="s0">, </span><span class="s1">TAG_ID.A]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.ADDRESS</span><span class="s0">, </span><span class="s1">TAG_ID.ADDRESS]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.ANNOTATION_XML</span><span class="s0">, </span><span class="s1">TAG_ID.ANNOTATION_XML]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.APPLET</span><span class="s0">, </span><span class="s1">TAG_ID.APPLET]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.AREA</span><span class="s0">, </span><span class="s1">TAG_ID.AREA]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.ARTICLE</span><span class="s0">, </span><span class="s1">TAG_ID.ARTICLE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.ASIDE</span><span class="s0">, </span><span class="s1">TAG_ID.ASIDE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.B</span><span class="s0">, </span><span class="s1">TAG_ID.B]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.BASE</span><span class="s0">, </span><span class="s1">TAG_ID.BASE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.BASEFONT</span><span class="s0">, </span><span class="s1">TAG_ID.BASEFONT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.BGSOUND</span><span class="s0">, </span><span class="s1">TAG_ID.BGSOUND]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.BIG</span><span class="s0">, </span><span class="s1">TAG_ID.BIG]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.BLOCKQUOTE</span><span class="s0">, </span><span class="s1">TAG_ID.BLOCKQUOTE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.BODY</span><span class="s0">, </span><span class="s1">TAG_ID.BODY]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.BR</span><span class="s0">, </span><span class="s1">TAG_ID.BR]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.BUTTON</span><span class="s0">, </span><span class="s1">TAG_ID.BUTTON]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.CAPTION</span><span class="s0">, </span><span class="s1">TAG_ID.CAPTION]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.CENTER</span><span class="s0">, </span><span class="s1">TAG_ID.CENTER]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.CODE</span><span class="s0">, </span><span class="s1">TAG_ID.CODE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.COL</span><span class="s0">, </span><span class="s1">TAG_ID.COL]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.COLGROUP</span><span class="s0">, </span><span class="s1">TAG_ID.COLGROUP]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.DD</span><span class="s0">, </span><span class="s1">TAG_ID.DD]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.DESC</span><span class="s0">, </span><span class="s1">TAG_ID.DESC]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.DETAILS</span><span class="s0">, </span><span class="s1">TAG_ID.DETAILS]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.DIALOG</span><span class="s0">, </span><span class="s1">TAG_ID.DIALOG]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.DIR</span><span class="s0">, </span><span class="s1">TAG_ID.DIR]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.DIV</span><span class="s0">, </span><span class="s1">TAG_ID.DIV]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.DL</span><span class="s0">, </span><span class="s1">TAG_ID.DL]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.DT</span><span class="s0">, </span><span class="s1">TAG_ID.DT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.EM</span><span class="s0">, </span><span class="s1">TAG_ID.EM]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.EMBED</span><span class="s0">, </span><span class="s1">TAG_ID.EMBED]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.FIELDSET</span><span class="s0">, </span><span class="s1">TAG_ID.FIELDSET]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.FIGCAPTION</span><span class="s0">, </span><span class="s1">TAG_ID.FIGCAPTION]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.FIGURE</span><span class="s0">, </span><span class="s1">TAG_ID.FIGURE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.FONT</span><span class="s0">, </span><span class="s1">TAG_ID.FONT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.FOOTER</span><span class="s0">, </span><span class="s1">TAG_ID.FOOTER]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.FOREIGN_OBJECT</span><span class="s0">, </span><span class="s1">TAG_ID.FOREIGN_OBJECT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.FORM</span><span class="s0">, </span><span class="s1">TAG_ID.FORM]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.FRAME</span><span class="s0">, </span><span class="s1">TAG_ID.FRAME]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.FRAMESET</span><span class="s0">, </span><span class="s1">TAG_ID.FRAMESET]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.H1</span><span class="s0">, </span><span class="s1">TAG_ID.H1]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.H2</span><span class="s0">, </span><span class="s1">TAG_ID.H2]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.H3</span><span class="s0">, </span><span class="s1">TAG_ID.H3]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.H4</span><span class="s0">, </span><span class="s1">TAG_ID.H4]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.H5</span><span class="s0">, </span><span class="s1">TAG_ID.H5]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.H6</span><span class="s0">, </span><span class="s1">TAG_ID.H6]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.HEAD</span><span class="s0">, </span><span class="s1">TAG_ID.HEAD]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.HEADER</span><span class="s0">, </span><span class="s1">TAG_ID.HEADER]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.HGROUP</span><span class="s0">, </span><span class="s1">TAG_ID.HGROUP]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.HR</span><span class="s0">, </span><span class="s1">TAG_ID.HR]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.HTML</span><span class="s0">, </span><span class="s1">TAG_ID.HTML]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.I</span><span class="s0">, </span><span class="s1">TAG_ID.I]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.IMG</span><span class="s0">, </span><span class="s1">TAG_ID.IMG]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.IMAGE</span><span class="s0">, </span><span class="s1">TAG_ID.IMAGE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.INPUT</span><span class="s0">, </span><span class="s1">TAG_ID.INPUT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.IFRAME</span><span class="s0">, </span><span class="s1">TAG_ID.IFRAME]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.KEYGEN</span><span class="s0">, </span><span class="s1">TAG_ID.KEYGEN]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.LABEL</span><span class="s0">, </span><span class="s1">TAG_ID.LABEL]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.LI</span><span class="s0">, </span><span class="s1">TAG_ID.LI]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.LINK</span><span class="s0">, </span><span class="s1">TAG_ID.LINK]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.LISTING</span><span class="s0">, </span><span class="s1">TAG_ID.LISTING]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MAIN</span><span class="s0">, </span><span class="s1">TAG_ID.MAIN]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MALIGNMARK</span><span class="s0">, </span><span class="s1">TAG_ID.MALIGNMARK]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MARQUEE</span><span class="s0">, </span><span class="s1">TAG_ID.MARQUEE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MATH</span><span class="s0">, </span><span class="s1">TAG_ID.MATH]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MENU</span><span class="s0">, </span><span class="s1">TAG_ID.MENU]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.META</span><span class="s0">, </span><span class="s1">TAG_ID.META]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MGLYPH</span><span class="s0">, </span><span class="s1">TAG_ID.MGLYPH]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MI</span><span class="s0">, </span><span class="s1">TAG_ID.MI]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MO</span><span class="s0">, </span><span class="s1">TAG_ID.MO]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MN</span><span class="s0">, </span><span class="s1">TAG_ID.MN]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MS</span><span class="s0">, </span><span class="s1">TAG_ID.MS]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.MTEXT</span><span class="s0">, </span><span class="s1">TAG_ID.MTEXT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.NAV</span><span class="s0">, </span><span class="s1">TAG_ID.NAV]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.NOBR</span><span class="s0">, </span><span class="s1">TAG_ID.NOBR]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.NOFRAMES</span><span class="s0">, </span><span class="s1">TAG_ID.NOFRAMES]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.NOEMBED</span><span class="s0">, </span><span class="s1">TAG_ID.NOEMBED]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.NOSCRIPT</span><span class="s0">, </span><span class="s1">TAG_ID.NOSCRIPT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.OBJECT</span><span class="s0">, </span><span class="s1">TAG_ID.OBJECT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.OL</span><span class="s0">, </span><span class="s1">TAG_ID.OL]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.OPTGROUP</span><span class="s0">, </span><span class="s1">TAG_ID.OPTGROUP]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.OPTION</span><span class="s0">, </span><span class="s1">TAG_ID.OPTION]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.P</span><span class="s0">, </span><span class="s1">TAG_ID.P]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.PARAM</span><span class="s0">, </span><span class="s1">TAG_ID.PARAM]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.PLAINTEXT</span><span class="s0">, </span><span class="s1">TAG_ID.PLAINTEXT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.PRE</span><span class="s0">, </span><span class="s1">TAG_ID.PRE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.RB</span><span class="s0">, </span><span class="s1">TAG_ID.RB]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.RP</span><span class="s0">, </span><span class="s1">TAG_ID.RP]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.RT</span><span class="s0">, </span><span class="s1">TAG_ID.RT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.RTC</span><span class="s0">, </span><span class="s1">TAG_ID.RTC]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.RUBY</span><span class="s0">, </span><span class="s1">TAG_ID.RUBY]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.S</span><span class="s0">, </span><span class="s1">TAG_ID.S]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.SCRIPT</span><span class="s0">, </span><span class="s1">TAG_ID.SCRIPT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.SECTION</span><span class="s0">, </span><span class="s1">TAG_ID.SECTION]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.SELECT</span><span class="s0">, </span><span class="s1">TAG_ID.SELECT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.SOURCE</span><span class="s0">, </span><span class="s1">TAG_ID.SOURCE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.SMALL</span><span class="s0">, </span><span class="s1">TAG_ID.SMALL]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.SPAN</span><span class="s0">, </span><span class="s1">TAG_ID.SPAN]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.STRIKE</span><span class="s0">, </span><span class="s1">TAG_ID.STRIKE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.STRONG</span><span class="s0">, </span><span class="s1">TAG_ID.STRONG]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.STYLE</span><span class="s0">, </span><span class="s1">TAG_ID.STYLE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.SUB</span><span class="s0">, </span><span class="s1">TAG_ID.SUB]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.SUMMARY</span><span class="s0">, </span><span class="s1">TAG_ID.SUMMARY]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.SUP</span><span class="s0">, </span><span class="s1">TAG_ID.SUP]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TABLE</span><span class="s0">, </span><span class="s1">TAG_ID.TABLE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TBODY</span><span class="s0">, </span><span class="s1">TAG_ID.TBODY]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TEMPLATE</span><span class="s0">, </span><span class="s1">TAG_ID.TEMPLATE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TEXTAREA</span><span class="s0">, </span><span class="s1">TAG_ID.TEXTAREA]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TFOOT</span><span class="s0">, </span><span class="s1">TAG_ID.TFOOT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TD</span><span class="s0">, </span><span class="s1">TAG_ID.TD]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TH</span><span class="s0">, </span><span class="s1">TAG_ID.TH]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.THEAD</span><span class="s0">, </span><span class="s1">TAG_ID.THEAD]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TITLE</span><span class="s0">, </span><span class="s1">TAG_ID.TITLE]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TR</span><span class="s0">, </span><span class="s1">TAG_ID.TR]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TRACK</span><span class="s0">, </span><span class="s1">TAG_ID.TRACK]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.TT</span><span class="s0">, </span><span class="s1">TAG_ID.TT]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.U</span><span class="s0">, </span><span class="s1">TAG_ID.U]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.UL</span><span class="s0">, </span><span class="s1">TAG_ID.UL]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.SVG</span><span class="s0">, </span><span class="s1">TAG_ID.SVG]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.VAR</span><span class="s0">, </span><span class="s1">TAG_ID.VAR]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.WBR</span><span class="s0">, </span><span class="s1">TAG_ID.WBR]</span><span class="s0">,</span>
    <span class="s1">[TAG_NAMES.XMP</span><span class="s0">, </span><span class="s1">TAG_ID.XMP]</span><span class="s0">,</span>
<span class="s1">])</span><span class="s0">;</span>
<span class="s0">function </span><span class="s1">getTagID(tagName) {</span>
    <span class="s0">var </span><span class="s1">_a</span><span class="s0">;</span>
    <span class="s0">return </span><span class="s1">(_a = TAG_NAME_TO_ID.get(tagName)) !== </span><span class="s0">null </span><span class="s1">&amp;&amp; _a !== </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? _a : TAG_ID.UNKNOWN</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">const </span><span class="s1">$ = TAG_ID</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">SPECIAL_ELEMENTS = {</span>
    <span class="s1">[NS.HTML]: </span><span class="s0">new </span><span class="s1">Set([</span>
        <span class="s1">$.ADDRESS</span><span class="s0">,</span>
        <span class="s1">$.APPLET</span><span class="s0">,</span>
        <span class="s1">$.AREA</span><span class="s0">,</span>
        <span class="s1">$.ARTICLE</span><span class="s0">,</span>
        <span class="s1">$.ASIDE</span><span class="s0">,</span>
        <span class="s1">$.BASE</span><span class="s0">,</span>
        <span class="s1">$.BASEFONT</span><span class="s0">,</span>
        <span class="s1">$.BGSOUND</span><span class="s0">,</span>
        <span class="s1">$.BLOCKQUOTE</span><span class="s0">,</span>
        <span class="s1">$.BODY</span><span class="s0">,</span>
        <span class="s1">$.BR</span><span class="s0">,</span>
        <span class="s1">$.BUTTON</span><span class="s0">,</span>
        <span class="s1">$.CAPTION</span><span class="s0">,</span>
        <span class="s1">$.CENTER</span><span class="s0">,</span>
        <span class="s1">$.COL</span><span class="s0">,</span>
        <span class="s1">$.COLGROUP</span><span class="s0">,</span>
        <span class="s1">$.DD</span><span class="s0">,</span>
        <span class="s1">$.DETAILS</span><span class="s0">,</span>
        <span class="s1">$.DIR</span><span class="s0">,</span>
        <span class="s1">$.DIV</span><span class="s0">,</span>
        <span class="s1">$.DL</span><span class="s0">,</span>
        <span class="s1">$.DT</span><span class="s0">,</span>
        <span class="s1">$.EMBED</span><span class="s0">,</span>
        <span class="s1">$.FIELDSET</span><span class="s0">,</span>
        <span class="s1">$.FIGCAPTION</span><span class="s0">,</span>
        <span class="s1">$.FIGURE</span><span class="s0">,</span>
        <span class="s1">$.FOOTER</span><span class="s0">,</span>
        <span class="s1">$.FORM</span><span class="s0">,</span>
        <span class="s1">$.FRAME</span><span class="s0">,</span>
        <span class="s1">$.FRAMESET</span><span class="s0">,</span>
        <span class="s1">$.H1</span><span class="s0">,</span>
        <span class="s1">$.H2</span><span class="s0">,</span>
        <span class="s1">$.H3</span><span class="s0">,</span>
        <span class="s1">$.H4</span><span class="s0">,</span>
        <span class="s1">$.H5</span><span class="s0">,</span>
        <span class="s1">$.H6</span><span class="s0">,</span>
        <span class="s1">$.HEAD</span><span class="s0">,</span>
        <span class="s1">$.HEADER</span><span class="s0">,</span>
        <span class="s1">$.HGROUP</span><span class="s0">,</span>
        <span class="s1">$.HR</span><span class="s0">,</span>
        <span class="s1">$.HTML</span><span class="s0">,</span>
        <span class="s1">$.IFRAME</span><span class="s0">,</span>
        <span class="s1">$.IMG</span><span class="s0">,</span>
        <span class="s1">$.INPUT</span><span class="s0">,</span>
        <span class="s1">$.LI</span><span class="s0">,</span>
        <span class="s1">$.LINK</span><span class="s0">,</span>
        <span class="s1">$.LISTING</span><span class="s0">,</span>
        <span class="s1">$.MAIN</span><span class="s0">,</span>
        <span class="s1">$.MARQUEE</span><span class="s0">,</span>
        <span class="s1">$.MENU</span><span class="s0">,</span>
        <span class="s1">$.META</span><span class="s0">,</span>
        <span class="s1">$.NAV</span><span class="s0">,</span>
        <span class="s1">$.NOEMBED</span><span class="s0">,</span>
        <span class="s1">$.NOFRAMES</span><span class="s0">,</span>
        <span class="s1">$.NOSCRIPT</span><span class="s0">,</span>
        <span class="s1">$.OBJECT</span><span class="s0">,</span>
        <span class="s1">$.OL</span><span class="s0">,</span>
        <span class="s1">$.P</span><span class="s0">,</span>
        <span class="s1">$.PARAM</span><span class="s0">,</span>
        <span class="s1">$.PLAINTEXT</span><span class="s0">,</span>
        <span class="s1">$.PRE</span><span class="s0">,</span>
        <span class="s1">$.SCRIPT</span><span class="s0">,</span>
        <span class="s1">$.SECTION</span><span class="s0">,</span>
        <span class="s1">$.SELECT</span><span class="s0">,</span>
        <span class="s1">$.SOURCE</span><span class="s0">,</span>
        <span class="s1">$.STYLE</span><span class="s0">,</span>
        <span class="s1">$.SUMMARY</span><span class="s0">,</span>
        <span class="s1">$.TABLE</span><span class="s0">,</span>
        <span class="s1">$.TBODY</span><span class="s0">,</span>
        <span class="s1">$.TD</span><span class="s0">,</span>
        <span class="s1">$.TEMPLATE</span><span class="s0">,</span>
        <span class="s1">$.TEXTAREA</span><span class="s0">,</span>
        <span class="s1">$.TFOOT</span><span class="s0">,</span>
        <span class="s1">$.TH</span><span class="s0">,</span>
        <span class="s1">$.THEAD</span><span class="s0">,</span>
        <span class="s1">$.TITLE</span><span class="s0">,</span>
        <span class="s1">$.TR</span><span class="s0">,</span>
        <span class="s1">$.TRACK</span><span class="s0">,</span>
        <span class="s1">$.UL</span><span class="s0">,</span>
        <span class="s1">$.WBR</span><span class="s0">,</span>
        <span class="s1">$.XMP</span><span class="s0">,</span>
    <span class="s1">])</span><span class="s0">,</span>
    <span class="s1">[NS.MATHML]: </span><span class="s0">new </span><span class="s1">Set([$.MI</span><span class="s0">, </span><span class="s1">$.MO</span><span class="s0">, </span><span class="s1">$.MN</span><span class="s0">, </span><span class="s1">$.MS</span><span class="s0">, </span><span class="s1">$.MTEXT</span><span class="s0">, </span><span class="s1">$.ANNOTATION_XML])</span><span class="s0">,</span>
    <span class="s1">[NS.SVG]: </span><span class="s0">new </span><span class="s1">Set([$.TITLE</span><span class="s0">, </span><span class="s1">$.FOREIGN_OBJECT</span><span class="s0">, </span><span class="s1">$.DESC])</span><span class="s0">,</span>
    <span class="s1">[NS.XLINK]: </span><span class="s0">new </span><span class="s1">Set()</span><span class="s0">,</span>
    <span class="s1">[NS.XML]: </span><span class="s0">new </span><span class="s1">Set()</span><span class="s0">,</span>
    <span class="s1">[NS.XMLNS]: </span><span class="s0">new </span><span class="s1">Set()</span><span class="s0">,</span>
<span class="s1">}</span><span class="s0">;</span>
<span class="s0">function </span><span class="s1">isNumberedHeader(tn) {</span>
    <span class="s0">return </span><span class="s1">tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">const </span><span class="s1">UNESCAPED_TEXT = </span><span class="s0">new </span><span class="s1">Set([</span>
    <span class="s1">TAG_NAMES.STYLE</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.SCRIPT</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.XMP</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.IFRAME</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.NOEMBED</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.NOFRAMES</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.PLAINTEXT</span><span class="s0">,</span>
<span class="s1">])</span><span class="s0">;</span>
<span class="s0">function </span><span class="s1">hasUnescapedText(tn</span><span class="s0">, </span><span class="s1">scriptingEnabled) {</span>
    <span class="s0">return </span><span class="s1">UNESCAPED_TEXT.has(tn) || (scriptingEnabled &amp;&amp; tn === TAG_NAMES.NOSCRIPT)</span><span class="s0">;</span>
<span class="s1">}</span>

<span class="s0">var </span><span class="s1">html = {</span>
    <span class="s1">__proto__: </span><span class="s0">null,</span>
    <span class="s1">get ATTRS () { </span><span class="s0">return </span><span class="s1">ATTRS</span><span class="s0">; </span><span class="s1">}</span><span class="s0">,</span>
    <span class="s1">get DOCUMENT_MODE () { </span><span class="s0">return </span><span class="s1">DOCUMENT_MODE</span><span class="s0">; </span><span class="s1">}</span><span class="s0">,</span>
    <span class="s1">get NS () { </span><span class="s0">return </span><span class="s1">NS</span><span class="s0">; </span><span class="s1">}</span><span class="s0">,</span>
    <span class="s1">SPECIAL_ELEMENTS: SPECIAL_ELEMENTS</span><span class="s0">,</span>
    <span class="s1">get TAG_ID () { </span><span class="s0">return </span><span class="s1">TAG_ID</span><span class="s0">; </span><span class="s1">}</span><span class="s0">,</span>
    <span class="s1">get TAG_NAMES () { </span><span class="s0">return </span><span class="s1">TAG_NAMES</span><span class="s0">; </span><span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getTagID: getTagID</span><span class="s0">,</span>
    <span class="s1">hasUnescapedText: hasUnescapedText</span><span class="s0">,</span>
    <span class="s1">isNumberedHeader: isNumberedHeader</span>
<span class="s1">}</span><span class="s0">;</span>

<span class="s4">//C1 Unicode control character reference replacements</span>
<span class="s0">const </span><span class="s1">C1_CONTROLS_REFERENCE_REPLACEMENTS = </span><span class="s0">new </span><span class="s1">Map([</span>
    <span class="s1">[</span><span class="s3">0x80</span><span class="s0">, </span><span class="s3">8364</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x82</span><span class="s0">, </span><span class="s3">8218</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x83</span><span class="s0">, </span><span class="s3">402</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x84</span><span class="s0">, </span><span class="s3">8222</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x85</span><span class="s0">, </span><span class="s3">8230</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x86</span><span class="s0">, </span><span class="s3">8224</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x87</span><span class="s0">, </span><span class="s3">8225</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x88</span><span class="s0">, </span><span class="s3">710</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x89</span><span class="s0">, </span><span class="s3">8240</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x8a</span><span class="s0">, </span><span class="s3">352</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x8b</span><span class="s0">, </span><span class="s3">8249</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x8c</span><span class="s0">, </span><span class="s3">338</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x8e</span><span class="s0">, </span><span class="s3">381</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x91</span><span class="s0">, </span><span class="s3">8216</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x92</span><span class="s0">, </span><span class="s3">8217</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x93</span><span class="s0">, </span><span class="s3">8220</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x94</span><span class="s0">, </span><span class="s3">8221</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x95</span><span class="s0">, </span><span class="s3">8226</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x96</span><span class="s0">, </span><span class="s3">8211</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x97</span><span class="s0">, </span><span class="s3">8212</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x98</span><span class="s0">, </span><span class="s3">732</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x99</span><span class="s0">, </span><span class="s3">8482</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x9a</span><span class="s0">, </span><span class="s3">353</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x9b</span><span class="s0">, </span><span class="s3">8250</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x9c</span><span class="s0">, </span><span class="s3">339</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x9e</span><span class="s0">, </span><span class="s3">382</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">0x9f</span><span class="s0">, </span><span class="s3">376</span><span class="s1">]</span><span class="s0">,</span>
<span class="s1">])</span><span class="s0">;</span>
<span class="s4">//States</span>
<span class="s0">var </span><span class="s1">State</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(State) {</span>
    <span class="s1">State[State[</span><span class="s2">&quot;DATA&quot;</span><span class="s1">] = </span><span class="s3">0</span><span class="s1">] = </span><span class="s2">&quot;DATA&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;RCDATA&quot;</span><span class="s1">] = </span><span class="s3">1</span><span class="s1">] = </span><span class="s2">&quot;RCDATA&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;RAWTEXT&quot;</span><span class="s1">] = </span><span class="s3">2</span><span class="s1">] = </span><span class="s2">&quot;RAWTEXT&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA&quot;</span><span class="s1">] = </span><span class="s3">3</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;PLAINTEXT&quot;</span><span class="s1">] = </span><span class="s3">4</span><span class="s1">] = </span><span class="s2">&quot;PLAINTEXT&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;TAG_OPEN&quot;</span><span class="s1">] = </span><span class="s3">5</span><span class="s1">] = </span><span class="s2">&quot;TAG_OPEN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;END_TAG_OPEN&quot;</span><span class="s1">] = </span><span class="s3">6</span><span class="s1">] = </span><span class="s2">&quot;END_TAG_OPEN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;TAG_NAME&quot;</span><span class="s1">] = </span><span class="s3">7</span><span class="s1">] = </span><span class="s2">&quot;TAG_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;RCDATA_LESS_THAN_SIGN&quot;</span><span class="s1">] = </span><span class="s3">8</span><span class="s1">] = </span><span class="s2">&quot;RCDATA_LESS_THAN_SIGN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;RCDATA_END_TAG_OPEN&quot;</span><span class="s1">] = </span><span class="s3">9</span><span class="s1">] = </span><span class="s2">&quot;RCDATA_END_TAG_OPEN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;RCDATA_END_TAG_NAME&quot;</span><span class="s1">] = </span><span class="s3">10</span><span class="s1">] = </span><span class="s2">&quot;RCDATA_END_TAG_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;RAWTEXT_LESS_THAN_SIGN&quot;</span><span class="s1">] = </span><span class="s3">11</span><span class="s1">] = </span><span class="s2">&quot;RAWTEXT_LESS_THAN_SIGN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;RAWTEXT_END_TAG_OPEN&quot;</span><span class="s1">] = </span><span class="s3">12</span><span class="s1">] = </span><span class="s2">&quot;RAWTEXT_END_TAG_OPEN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;RAWTEXT_END_TAG_NAME&quot;</span><span class="s1">] = </span><span class="s3">13</span><span class="s1">] = </span><span class="s2">&quot;RAWTEXT_END_TAG_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_LESS_THAN_SIGN&quot;</span><span class="s1">] = </span><span class="s3">14</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_LESS_THAN_SIGN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_END_TAG_OPEN&quot;</span><span class="s1">] = </span><span class="s3">15</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_END_TAG_OPEN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_END_TAG_NAME&quot;</span><span class="s1">] = </span><span class="s3">16</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_END_TAG_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_ESCAPE_START&quot;</span><span class="s1">] = </span><span class="s3">17</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_ESCAPE_START&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_ESCAPE_START_DASH&quot;</span><span class="s1">] = </span><span class="s3">18</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_ESCAPE_START_DASH&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_ESCAPED&quot;</span><span class="s1">] = </span><span class="s3">19</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_ESCAPED&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_ESCAPED_DASH&quot;</span><span class="s1">] = </span><span class="s3">20</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_ESCAPED_DASH&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_ESCAPED_DASH_DASH&quot;</span><span class="s1">] = </span><span class="s3">21</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_ESCAPED_DASH_DASH&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN&quot;</span><span class="s1">] = </span><span class="s3">22</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_ESCAPED_END_TAG_OPEN&quot;</span><span class="s1">] = </span><span class="s3">23</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_ESCAPED_END_TAG_OPEN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_ESCAPED_END_TAG_NAME&quot;</span><span class="s1">] = </span><span class="s3">24</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_ESCAPED_END_TAG_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPE_START&quot;</span><span class="s1">] = </span><span class="s3">25</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPE_START&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPED&quot;</span><span class="s1">] = </span><span class="s3">26</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPED&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPED_DASH&quot;</span><span class="s1">] = </span><span class="s3">27</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPED_DASH&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH&quot;</span><span class="s1">] = </span><span class="s3">28</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN&quot;</span><span class="s1">] = </span><span class="s3">29</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPE_END&quot;</span><span class="s1">] = </span><span class="s3">30</span><span class="s1">] = </span><span class="s2">&quot;SCRIPT_DATA_DOUBLE_ESCAPE_END&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;BEFORE_ATTRIBUTE_NAME&quot;</span><span class="s1">] = </span><span class="s3">31</span><span class="s1">] = </span><span class="s2">&quot;BEFORE_ATTRIBUTE_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;ATTRIBUTE_NAME&quot;</span><span class="s1">] = </span><span class="s3">32</span><span class="s1">] = </span><span class="s2">&quot;ATTRIBUTE_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;AFTER_ATTRIBUTE_NAME&quot;</span><span class="s1">] = </span><span class="s3">33</span><span class="s1">] = </span><span class="s2">&quot;AFTER_ATTRIBUTE_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;BEFORE_ATTRIBUTE_VALUE&quot;</span><span class="s1">] = </span><span class="s3">34</span><span class="s1">] = </span><span class="s2">&quot;BEFORE_ATTRIBUTE_VALUE&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;ATTRIBUTE_VALUE_DOUBLE_QUOTED&quot;</span><span class="s1">] = </span><span class="s3">35</span><span class="s1">] = </span><span class="s2">&quot;ATTRIBUTE_VALUE_DOUBLE_QUOTED&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;ATTRIBUTE_VALUE_SINGLE_QUOTED&quot;</span><span class="s1">] = </span><span class="s3">36</span><span class="s1">] = </span><span class="s2">&quot;ATTRIBUTE_VALUE_SINGLE_QUOTED&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;ATTRIBUTE_VALUE_UNQUOTED&quot;</span><span class="s1">] = </span><span class="s3">37</span><span class="s1">] = </span><span class="s2">&quot;ATTRIBUTE_VALUE_UNQUOTED&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;AFTER_ATTRIBUTE_VALUE_QUOTED&quot;</span><span class="s1">] = </span><span class="s3">38</span><span class="s1">] = </span><span class="s2">&quot;AFTER_ATTRIBUTE_VALUE_QUOTED&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;SELF_CLOSING_START_TAG&quot;</span><span class="s1">] = </span><span class="s3">39</span><span class="s1">] = </span><span class="s2">&quot;SELF_CLOSING_START_TAG&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;BOGUS_COMMENT&quot;</span><span class="s1">] = </span><span class="s3">40</span><span class="s1">] = </span><span class="s2">&quot;BOGUS_COMMENT&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;MARKUP_DECLARATION_OPEN&quot;</span><span class="s1">] = </span><span class="s3">41</span><span class="s1">] = </span><span class="s2">&quot;MARKUP_DECLARATION_OPEN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;COMMENT_START&quot;</span><span class="s1">] = </span><span class="s3">42</span><span class="s1">] = </span><span class="s2">&quot;COMMENT_START&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;COMMENT_START_DASH&quot;</span><span class="s1">] = </span><span class="s3">43</span><span class="s1">] = </span><span class="s2">&quot;COMMENT_START_DASH&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;COMMENT&quot;</span><span class="s1">] = </span><span class="s3">44</span><span class="s1">] = </span><span class="s2">&quot;COMMENT&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;COMMENT_LESS_THAN_SIGN&quot;</span><span class="s1">] = </span><span class="s3">45</span><span class="s1">] = </span><span class="s2">&quot;COMMENT_LESS_THAN_SIGN&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;COMMENT_LESS_THAN_SIGN_BANG&quot;</span><span class="s1">] = </span><span class="s3">46</span><span class="s1">] = </span><span class="s2">&quot;COMMENT_LESS_THAN_SIGN_BANG&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;COMMENT_LESS_THAN_SIGN_BANG_DASH&quot;</span><span class="s1">] = </span><span class="s3">47</span><span class="s1">] = </span><span class="s2">&quot;COMMENT_LESS_THAN_SIGN_BANG_DASH&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH&quot;</span><span class="s1">] = </span><span class="s3">48</span><span class="s1">] = </span><span class="s2">&quot;COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;COMMENT_END_DASH&quot;</span><span class="s1">] = </span><span class="s3">49</span><span class="s1">] = </span><span class="s2">&quot;COMMENT_END_DASH&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;COMMENT_END&quot;</span><span class="s1">] = </span><span class="s3">50</span><span class="s1">] = </span><span class="s2">&quot;COMMENT_END&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;COMMENT_END_BANG&quot;</span><span class="s1">] = </span><span class="s3">51</span><span class="s1">] = </span><span class="s2">&quot;COMMENT_END_BANG&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;DOCTYPE&quot;</span><span class="s1">] = </span><span class="s3">52</span><span class="s1">] = </span><span class="s2">&quot;DOCTYPE&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;BEFORE_DOCTYPE_NAME&quot;</span><span class="s1">] = </span><span class="s3">53</span><span class="s1">] = </span><span class="s2">&quot;BEFORE_DOCTYPE_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;DOCTYPE_NAME&quot;</span><span class="s1">] = </span><span class="s3">54</span><span class="s1">] = </span><span class="s2">&quot;DOCTYPE_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;AFTER_DOCTYPE_NAME&quot;</span><span class="s1">] = </span><span class="s3">55</span><span class="s1">] = </span><span class="s2">&quot;AFTER_DOCTYPE_NAME&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;AFTER_DOCTYPE_PUBLIC_KEYWORD&quot;</span><span class="s1">] = </span><span class="s3">56</span><span class="s1">] = </span><span class="s2">&quot;AFTER_DOCTYPE_PUBLIC_KEYWORD&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;BEFORE_DOCTYPE_PUBLIC_IDENTIFIER&quot;</span><span class="s1">] = </span><span class="s3">57</span><span class="s1">] = </span><span class="s2">&quot;BEFORE_DOCTYPE_PUBLIC_IDENTIFIER&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED&quot;</span><span class="s1">] = </span><span class="s3">58</span><span class="s1">] = </span><span class="s2">&quot;DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED&quot;</span><span class="s1">] = </span><span class="s3">59</span><span class="s1">] = </span><span class="s2">&quot;DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;AFTER_DOCTYPE_PUBLIC_IDENTIFIER&quot;</span><span class="s1">] = </span><span class="s3">60</span><span class="s1">] = </span><span class="s2">&quot;AFTER_DOCTYPE_PUBLIC_IDENTIFIER&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS&quot;</span><span class="s1">] = </span><span class="s3">61</span><span class="s1">] = </span><span class="s2">&quot;BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;AFTER_DOCTYPE_SYSTEM_KEYWORD&quot;</span><span class="s1">] = </span><span class="s3">62</span><span class="s1">] = </span><span class="s2">&quot;AFTER_DOCTYPE_SYSTEM_KEYWORD&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;BEFORE_DOCTYPE_SYSTEM_IDENTIFIER&quot;</span><span class="s1">] = </span><span class="s3">63</span><span class="s1">] = </span><span class="s2">&quot;BEFORE_DOCTYPE_SYSTEM_IDENTIFIER&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED&quot;</span><span class="s1">] = </span><span class="s3">64</span><span class="s1">] = </span><span class="s2">&quot;DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED&quot;</span><span class="s1">] = </span><span class="s3">65</span><span class="s1">] = </span><span class="s2">&quot;DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;AFTER_DOCTYPE_SYSTEM_IDENTIFIER&quot;</span><span class="s1">] = </span><span class="s3">66</span><span class="s1">] = </span><span class="s2">&quot;AFTER_DOCTYPE_SYSTEM_IDENTIFIER&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;BOGUS_DOCTYPE&quot;</span><span class="s1">] = </span><span class="s3">67</span><span class="s1">] = </span><span class="s2">&quot;BOGUS_DOCTYPE&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;CDATA_SECTION&quot;</span><span class="s1">] = </span><span class="s3">68</span><span class="s1">] = </span><span class="s2">&quot;CDATA_SECTION&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;CDATA_SECTION_BRACKET&quot;</span><span class="s1">] = </span><span class="s3">69</span><span class="s1">] = </span><span class="s2">&quot;CDATA_SECTION_BRACKET&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;CDATA_SECTION_END&quot;</span><span class="s1">] = </span><span class="s3">70</span><span class="s1">] = </span><span class="s2">&quot;CDATA_SECTION_END&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;CHARACTER_REFERENCE&quot;</span><span class="s1">] = </span><span class="s3">71</span><span class="s1">] = </span><span class="s2">&quot;CHARACTER_REFERENCE&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;NAMED_CHARACTER_REFERENCE&quot;</span><span class="s1">] = </span><span class="s3">72</span><span class="s1">] = </span><span class="s2">&quot;NAMED_CHARACTER_REFERENCE&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;AMBIGUOUS_AMPERSAND&quot;</span><span class="s1">] = </span><span class="s3">73</span><span class="s1">] = </span><span class="s2">&quot;AMBIGUOUS_AMPERSAND&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;NUMERIC_CHARACTER_REFERENCE&quot;</span><span class="s1">] = </span><span class="s3">74</span><span class="s1">] = </span><span class="s2">&quot;NUMERIC_CHARACTER_REFERENCE&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;HEXADEMICAL_CHARACTER_REFERENCE_START&quot;</span><span class="s1">] = </span><span class="s3">75</span><span class="s1">] = </span><span class="s2">&quot;HEXADEMICAL_CHARACTER_REFERENCE_START&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;HEXADEMICAL_CHARACTER_REFERENCE&quot;</span><span class="s1">] = </span><span class="s3">76</span><span class="s1">] = </span><span class="s2">&quot;HEXADEMICAL_CHARACTER_REFERENCE&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;DECIMAL_CHARACTER_REFERENCE&quot;</span><span class="s1">] = </span><span class="s3">77</span><span class="s1">] = </span><span class="s2">&quot;DECIMAL_CHARACTER_REFERENCE&quot;</span><span class="s0">;</span>
    <span class="s1">State[State[</span><span class="s2">&quot;NUMERIC_CHARACTER_REFERENCE_END&quot;</span><span class="s1">] = </span><span class="s3">78</span><span class="s1">] = </span><span class="s2">&quot;NUMERIC_CHARACTER_REFERENCE_END&quot;</span><span class="s0">;</span>
<span class="s1">})(State || (State = {}))</span><span class="s0">;</span>
<span class="s4">//Tokenizer initial states for different modes</span>
<span class="s0">const </span><span class="s1">TokenizerMode = {</span>
    <span class="s1">DATA: State.DATA</span><span class="s0">,</span>
    <span class="s1">RCDATA: State.RCDATA</span><span class="s0">,</span>
    <span class="s1">RAWTEXT: State.RAWTEXT</span><span class="s0">,</span>
    <span class="s1">SCRIPT_DATA: State.SCRIPT_DATA</span><span class="s0">,</span>
    <span class="s1">PLAINTEXT: State.PLAINTEXT</span><span class="s0">,</span>
    <span class="s1">CDATA_SECTION: State.CDATA_SECTION</span><span class="s0">,</span>
<span class="s1">}</span><span class="s0">;</span>
<span class="s4">//Utils</span>
<span class="s4">//OPTIMIZATION: these utility functions should not be moved out of this module. V8 Crankshaft will not inline</span>
<span class="s4">//this functions if they will be situated in another module due to context switch.</span>
<span class="s4">//Always perform inlining check before modifying this functions ('node --trace-inlining').</span>
<span class="s0">function </span><span class="s1">isAsciiDigit(cp) {</span>
    <span class="s0">return </span><span class="s1">cp &gt;= CODE_POINTS.DIGIT_0 &amp;&amp; cp &lt;= CODE_POINTS.DIGIT_9</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isAsciiUpper(cp) {</span>
    <span class="s0">return </span><span class="s1">cp &gt;= CODE_POINTS.LATIN_CAPITAL_A &amp;&amp; cp &lt;= CODE_POINTS.LATIN_CAPITAL_Z</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isAsciiLower(cp) {</span>
    <span class="s0">return </span><span class="s1">cp &gt;= CODE_POINTS.LATIN_SMALL_A &amp;&amp; cp &lt;= CODE_POINTS.LATIN_SMALL_Z</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isAsciiLetter(cp) {</span>
    <span class="s0">return </span><span class="s1">isAsciiLower(cp) || isAsciiUpper(cp)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isAsciiAlphaNumeric(cp) {</span>
    <span class="s0">return </span><span class="s1">isAsciiLetter(cp) || isAsciiDigit(cp)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isAsciiUpperHexDigit(cp) {</span>
    <span class="s0">return </span><span class="s1">cp &gt;= CODE_POINTS.LATIN_CAPITAL_A &amp;&amp; cp &lt;= CODE_POINTS.LATIN_CAPITAL_F</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isAsciiLowerHexDigit(cp) {</span>
    <span class="s0">return </span><span class="s1">cp &gt;= CODE_POINTS.LATIN_SMALL_A &amp;&amp; cp &lt;= CODE_POINTS.LATIN_SMALL_F</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isAsciiHexDigit(cp) {</span>
    <span class="s0">return </span><span class="s1">isAsciiDigit(cp) || isAsciiUpperHexDigit(cp) || isAsciiLowerHexDigit(cp)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">toAsciiLower(cp) {</span>
    <span class="s0">return </span><span class="s1">cp + </span><span class="s3">32</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isWhitespace(cp) {</span>
    <span class="s0">return </span><span class="s1">cp === CODE_POINTS.SPACE || cp === CODE_POINTS.LINE_FEED || cp === CODE_POINTS.TABULATION || cp === CODE_POINTS.FORM_FEED</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isEntityInAttributeInvalidEnd(nextCp) {</span>
    <span class="s0">return </span><span class="s1">nextCp === CODE_POINTS.EQUALS_SIGN || isAsciiAlphaNumeric(nextCp)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isScriptDataDoubleEscapeSequenceEnd(cp) {</span>
    <span class="s0">return </span><span class="s1">isWhitespace(cp) || cp === CODE_POINTS.SOLIDUS || cp === CODE_POINTS.GREATER_THAN_SIGN</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">//Tokenizer</span>
<span class="s0">class </span><span class="s1">Tokenizer {</span>
    <span class="s1">constructor(options</span><span class="s0">, </span><span class="s1">handler) {</span>
        <span class="s0">this</span><span class="s1">.options = options</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.handler = handler</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.paused = </span><span class="s0">false;</span>
        <span class="s5">/** Ensures that the parsing loop isn't run multiple times at once. */</span>
        <span class="s0">this</span><span class="s1">.inLoop = </span><span class="s0">false;</span>
        <span class="s5">/**</span>
         <span class="s5">* Indicates that the current adjusted node exists, is not an element in the HTML namespace,</span>
         <span class="s5">* and that it is not an integration point for either MathML or HTML.</span>
         <span class="s5">*</span>
         <span class="s5">* </span><span class="s6">@see </span><span class="s5">{</span><span class="s6">@link </span><span class="s5">https://html.spec.whatwg.org/multipage/parsing.html#tree-construction}</span>
         <span class="s5">*/</span>
        <span class="s0">this</span><span class="s1">.inForeignNode = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.lastStartTagName = </span><span class="s2">''</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.active = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.returnState = State.DATA</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.charRefCode = -</span><span class="s3">1</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.consumedAfterSnapshot = -</span><span class="s3">1</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.currentCharacterToken = </span><span class="s0">null;</span>
        <span class="s0">this</span><span class="s1">.currentToken = </span><span class="s0">null;</span>
        <span class="s0">this</span><span class="s1">.currentAttr = { name: </span><span class="s2">''</span><span class="s0">, </span><span class="s1">value: </span><span class="s2">'' </span><span class="s1">}</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.preprocessor = </span><span class="s0">new </span><span class="s1">Preprocessor(handler)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.currentLocation = </span><span class="s0">this</span><span class="s1">.getCurrentLocation(-</span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Errors</span>
    <span class="s1">_err(code) {</span>
        <span class="s0">var </span><span class="s1">_a</span><span class="s0">, </span><span class="s1">_b</span><span class="s0">;</span>
        <span class="s1">(_b = (_a = </span><span class="s0">this</span><span class="s1">.handler).onParseError) === </span><span class="s0">null </span><span class="s1">|| _b === </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">: _b.call(_a</span><span class="s0">, this</span><span class="s1">.preprocessor.getError(code))</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">// NOTE: `offset` may never run across line boundaries.</span>
    <span class="s1">getCurrentLocation(offset) {</span>
        <span class="s0">if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">.options.sourceCodeLocationInfo) {</span>
            <span class="s0">return null;</span>
        <span class="s1">}</span>
        <span class="s0">return </span><span class="s1">{</span>
            <span class="s1">startLine: </span><span class="s0">this</span><span class="s1">.preprocessor.line</span><span class="s0">,</span>
            <span class="s1">startCol: </span><span class="s0">this</span><span class="s1">.preprocessor.col - offset</span><span class="s0">,</span>
            <span class="s1">startOffset: </span><span class="s0">this</span><span class="s1">.preprocessor.offset - offset</span><span class="s0">,</span>
            <span class="s1">endLine: -</span><span class="s3">1</span><span class="s0">,</span>
            <span class="s1">endCol: -</span><span class="s3">1</span><span class="s0">,</span>
            <span class="s1">endOffset: -</span><span class="s3">1</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_runParsingLoop() {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.inLoop)</span>
            <span class="s0">return;</span>
        <span class="s0">this</span><span class="s1">.inLoop = </span><span class="s0">true;</span>
        <span class="s0">while </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.active &amp;&amp; !</span><span class="s0">this</span><span class="s1">.paused) {</span>
            <span class="s0">this</span><span class="s1">.consumedAfterSnapshot = </span><span class="s3">0</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">cp = </span><span class="s0">this</span><span class="s1">._consume()</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">._ensureHibernation()) {</span>
                <span class="s0">this</span><span class="s1">._callState(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.inLoop = </span><span class="s0">false;</span>
    <span class="s1">}</span>
    <span class="s4">//API</span>
    <span class="s1">pause() {</span>
        <span class="s0">this</span><span class="s1">.paused = </span><span class="s0">true;</span>
    <span class="s1">}</span>
    <span class="s1">resume(writeCallback) {</span>
        <span class="s0">if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">.paused) {</span>
            <span class="s0">throw new </span><span class="s1">Error(</span><span class="s2">'Parser was already resumed'</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.paused = </span><span class="s0">false;</span>
        <span class="s4">// Necessary for synchronous resume.</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.inLoop)</span>
            <span class="s0">return;</span>
        <span class="s0">this</span><span class="s1">._runParsingLoop()</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">.paused) {</span>
            <span class="s1">writeCallback === </span><span class="s0">null </span><span class="s1">|| writeCallback === </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">: writeCallback()</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">write(chunk</span><span class="s0">, </span><span class="s1">isLastChunk</span><span class="s0">, </span><span class="s1">writeCallback) {</span>
        <span class="s0">this</span><span class="s1">.active = </span><span class="s0">true;</span>
        <span class="s0">this</span><span class="s1">.preprocessor.write(chunk</span><span class="s0">, </span><span class="s1">isLastChunk)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._runParsingLoop()</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">.paused) {</span>
            <span class="s1">writeCallback === </span><span class="s0">null </span><span class="s1">|| writeCallback === </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">: writeCallback()</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">insertHtmlAtCurrentPos(chunk) {</span>
        <span class="s0">this</span><span class="s1">.active = </span><span class="s0">true;</span>
        <span class="s0">this</span><span class="s1">.preprocessor.insertHtmlAtCurrentPos(chunk)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._runParsingLoop()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Hibernation</span>
    <span class="s1">_ensureHibernation() {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.preprocessor.endOfChunkHit) {</span>
            <span class="s0">this</span><span class="s1">._unconsume(</span><span class="s0">this</span><span class="s1">.consumedAfterSnapshot)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.active = </span><span class="s0">false;</span>
            <span class="s0">return true;</span>
        <span class="s1">}</span>
        <span class="s0">return false;</span>
    <span class="s1">}</span>
    <span class="s4">//Consumption</span>
    <span class="s1">_consume() {</span>
        <span class="s0">this</span><span class="s1">.consumedAfterSnapshot++</span><span class="s0">;</span>
        <span class="s0">return this</span><span class="s1">.preprocessor.advance()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_unconsume(count) {</span>
        <span class="s0">this</span><span class="s1">.consumedAfterSnapshot -= count</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.preprocessor.retreat(count)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_reconsumeInState(state</span><span class="s0">, </span><span class="s1">cp) {</span>
        <span class="s0">this</span><span class="s1">.state = state</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._callState(cp)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_advanceBy(count) {</span>
        <span class="s0">this</span><span class="s1">.consumedAfterSnapshot += count</span><span class="s0">;</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; count</span><span class="s0">; </span><span class="s1">i++) {</span>
            <span class="s0">this</span><span class="s1">.preprocessor.advance()</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_consumeSequenceIfMatch(pattern</span><span class="s0">, </span><span class="s1">caseSensitive) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.preprocessor.startsWith(pattern</span><span class="s0">, </span><span class="s1">caseSensitive)) {</span>
            <span class="s4">// We will already have consumed one character before calling this method.</span>
            <span class="s0">this</span><span class="s1">._advanceBy(pattern.length - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">return true;</span>
        <span class="s1">}</span>
        <span class="s0">return false;</span>
    <span class="s1">}</span>
    <span class="s4">//Token creation</span>
    <span class="s1">_createStartTagToken() {</span>
        <span class="s0">this</span><span class="s1">.currentToken = {</span>
            <span class="s1">type: TokenType.START_TAG</span><span class="s0">,</span>
            <span class="s1">tagName: </span><span class="s2">''</span><span class="s0">,</span>
            <span class="s1">tagID: TAG_ID.UNKNOWN</span><span class="s0">,</span>
            <span class="s1">selfClosing: </span><span class="s0">false,</span>
            <span class="s1">ackSelfClosing: </span><span class="s0">false,</span>
            <span class="s1">attrs: []</span><span class="s0">,</span>
            <span class="s1">location: </span><span class="s0">this</span><span class="s1">.getCurrentLocation(</span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_createEndTagToken() {</span>
        <span class="s0">this</span><span class="s1">.currentToken = {</span>
            <span class="s1">type: TokenType.END_TAG</span><span class="s0">,</span>
            <span class="s1">tagName: </span><span class="s2">''</span><span class="s0">,</span>
            <span class="s1">tagID: TAG_ID.UNKNOWN</span><span class="s0">,</span>
            <span class="s1">selfClosing: </span><span class="s0">false,</span>
            <span class="s1">ackSelfClosing: </span><span class="s0">false,</span>
            <span class="s1">attrs: []</span><span class="s0">,</span>
            <span class="s1">location: </span><span class="s0">this</span><span class="s1">.getCurrentLocation(</span><span class="s3">2</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_createCommentToken(offset) {</span>
        <span class="s0">this</span><span class="s1">.currentToken = {</span>
            <span class="s1">type: TokenType.COMMENT</span><span class="s0">,</span>
            <span class="s1">data: </span><span class="s2">''</span><span class="s0">,</span>
            <span class="s1">location: </span><span class="s0">this</span><span class="s1">.getCurrentLocation(offset)</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_createDoctypeToken(initialName) {</span>
        <span class="s0">this</span><span class="s1">.currentToken = {</span>
            <span class="s1">type: TokenType.DOCTYPE</span><span class="s0">,</span>
            <span class="s1">name: initialName</span><span class="s0">,</span>
            <span class="s1">forceQuirks: </span><span class="s0">false,</span>
            <span class="s1">publicId: </span><span class="s0">null,</span>
            <span class="s1">systemId: </span><span class="s0">null,</span>
            <span class="s1">location: </span><span class="s0">this</span><span class="s1">.currentLocation</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_createCharacterToken(type</span><span class="s0">, </span><span class="s1">chars) {</span>
        <span class="s0">this</span><span class="s1">.currentCharacterToken = {</span>
            <span class="s1">type</span><span class="s0">,</span>
            <span class="s1">chars</span><span class="s0">,</span>
            <span class="s1">location: </span><span class="s0">this</span><span class="s1">.currentLocation</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Tag attributes</span>
    <span class="s1">_createAttr(attrNameFirstCh) {</span>
        <span class="s0">this</span><span class="s1">.currentAttr = {</span>
            <span class="s1">name: attrNameFirstCh</span><span class="s0">,</span>
            <span class="s1">value: </span><span class="s2">''</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.currentLocation = </span><span class="s0">this</span><span class="s1">.getCurrentLocation(</span><span class="s3">0</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_leaveAttrName() {</span>
        <span class="s0">var </span><span class="s1">_a</span><span class="s0">;</span>
        <span class="s0">var </span><span class="s1">_b</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(getTokenAttr(token</span><span class="s0">, this</span><span class="s1">.currentAttr.name) === </span><span class="s0">null</span><span class="s1">) {</span>
            <span class="s1">token.attrs.push(</span><span class="s0">this</span><span class="s1">.currentAttr)</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(token.location &amp;&amp; </span><span class="s0">this</span><span class="s1">.currentLocation) {</span>
                <span class="s0">const </span><span class="s1">attrLocations = ((_a = (_b = token.location).attrs) !== </span><span class="s0">null </span><span class="s1">&amp;&amp; _a !== </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? _a : (_b.attrs = Object.create(</span><span class="s0">null</span><span class="s1">)))</span><span class="s0">;</span>
                <span class="s1">attrLocations[</span><span class="s0">this</span><span class="s1">.currentAttr.name] = </span><span class="s0">this</span><span class="s1">.currentLocation</span><span class="s0">;</span>
                <span class="s4">// Set end location</span>
                <span class="s0">this</span><span class="s1">._leaveAttrValue()</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._err(ERR.duplicateAttribute)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_leaveAttrValue() {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.currentLocation) {</span>
            <span class="s0">this</span><span class="s1">.currentLocation.endLine = </span><span class="s0">this</span><span class="s1">.preprocessor.line</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.currentLocation.endCol = </span><span class="s0">this</span><span class="s1">.preprocessor.col</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.currentLocation.endOffset = </span><span class="s0">this</span><span class="s1">.preprocessor.offset</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">//Token emission</span>
    <span class="s1">prepareToken(ct) {</span>
        <span class="s0">this</span><span class="s1">._emitCurrentCharacterToken(ct.location)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.currentToken = </span><span class="s0">null;</span>
        <span class="s0">if </span><span class="s1">(ct.location) {</span>
            <span class="s1">ct.location.endLine = </span><span class="s0">this</span><span class="s1">.preprocessor.line</span><span class="s0">;</span>
            <span class="s1">ct.location.endCol = </span><span class="s0">this</span><span class="s1">.preprocessor.col + </span><span class="s3">1</span><span class="s0">;</span>
            <span class="s1">ct.location.endOffset = </span><span class="s0">this</span><span class="s1">.preprocessor.offset + </span><span class="s3">1</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.currentLocation = </span><span class="s0">this</span><span class="s1">.getCurrentLocation(-</span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">emitCurrentTagToken() {</span>
        <span class="s0">const </span><span class="s1">ct = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.prepareToken(ct)</span><span class="s0">;</span>
        <span class="s1">ct.tagID = getTagID(ct.tagName)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(ct.type === TokenType.START_TAG) {</span>
            <span class="s0">this</span><span class="s1">.lastStartTagName = ct.tagName</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.handler.onStartTag(ct)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">if </span><span class="s1">(ct.attrs.length &gt; </span><span class="s3">0</span><span class="s1">) {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.endTagWithAttributes)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(ct.selfClosing) {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.endTagWithTrailingSolidus)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">this</span><span class="s1">.handler.onEndTag(ct)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.preprocessor.dropParsedChunk()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">emitCurrentComment(ct) {</span>
        <span class="s0">this</span><span class="s1">.prepareToken(ct)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.handler.onComment(ct)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.preprocessor.dropParsedChunk()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">emitCurrentDoctype(ct) {</span>
        <span class="s0">this</span><span class="s1">.prepareToken(ct)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.handler.onDoctype(ct)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.preprocessor.dropParsedChunk()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_emitCurrentCharacterToken(nextLocation) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.currentCharacterToken) {</span>
            <span class="s4">//NOTE: if we have a pending character token, make it's end location equal to the</span>
            <span class="s4">//current token's start location.</span>
            <span class="s0">if </span><span class="s1">(nextLocation &amp;&amp; </span><span class="s0">this</span><span class="s1">.currentCharacterToken.location) {</span>
                <span class="s0">this</span><span class="s1">.currentCharacterToken.location.endLine = nextLocation.startLine</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.currentCharacterToken.location.endCol = nextLocation.startCol</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.currentCharacterToken.location.endOffset = nextLocation.startOffset</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.currentCharacterToken.type) {</span>
                <span class="s0">case </span><span class="s1">TokenType.CHARACTER: {</span>
                    <span class="s0">this</span><span class="s1">.handler.onCharacter(</span><span class="s0">this</span><span class="s1">.currentCharacterToken)</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TokenType.NULL_CHARACTER: {</span>
                    <span class="s0">this</span><span class="s1">.handler.onNullCharacter(</span><span class="s0">this</span><span class="s1">.currentCharacterToken)</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TokenType.WHITESPACE_CHARACTER: {</span>
                    <span class="s0">this</span><span class="s1">.handler.onWhitespaceCharacter(</span><span class="s0">this</span><span class="s1">.currentCharacterToken)</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s0">this</span><span class="s1">.currentCharacterToken = </span><span class="s0">null;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_emitEOFToken() {</span>
        <span class="s0">const </span><span class="s1">location = </span><span class="s0">this</span><span class="s1">.getCurrentLocation(</span><span class="s3">0</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(location) {</span>
            <span class="s1">location.endLine = location.startLine</span><span class="s0">;</span>
            <span class="s1">location.endCol = location.startCol</span><span class="s0">;</span>
            <span class="s1">location.endOffset = location.startOffset</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">._emitCurrentCharacterToken(location)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.handler.onEof({ type: TokenType.EOF</span><span class="s0">, </span><span class="s1">location })</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.active = </span><span class="s0">false;</span>
    <span class="s1">}</span>
    <span class="s4">//Characters emission</span>
    <span class="s4">//OPTIMIZATION: specification uses only one type of character tokens (one token per character).</span>
    <span class="s4">//This causes a huge memory overhead and a lot of unnecessary parser loops. parse5 uses 3 groups of characters.</span>
    <span class="s4">//If we have a sequence of characters that belong to the same group, the parser can process it</span>
    <span class="s4">//as a single solid character token.</span>
    <span class="s4">//So, there are 3 types of character tokens in parse5:</span>
    <span class="s4">//1)TokenType.NULL_CHARACTER - \u0000-character sequences (e.g. '\u0000\u0000\u0000')</span>
    <span class="s4">//2)TokenType.WHITESPACE_CHARACTER - any whitespace/new-line character sequences (e.g. '\n  \r\t   \f')</span>
    <span class="s4">//3)TokenType.CHARACTER - any character sequence which don't belong to groups 1 and 2 (e.g. 'abcdef1234@@#$%^')</span>
    <span class="s1">_appendCharToCurrentCharacterToken(type</span><span class="s0">, </span><span class="s1">ch) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.currentCharacterToken) {</span>
            <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.currentCharacterToken.type !== type) {</span>
                <span class="s0">this</span><span class="s1">.currentLocation = </span><span class="s0">this</span><span class="s1">.getCurrentLocation(</span><span class="s3">0</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitCurrentCharacterToken(</span><span class="s0">this</span><span class="s1">.currentLocation)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.preprocessor.dropParsedChunk()</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">else </span><span class="s1">{</span>
                <span class="s0">this</span><span class="s1">.currentCharacterToken.chars += ch</span><span class="s0">;</span>
                <span class="s0">return;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">._createCharacterToken(type</span><span class="s0">, </span><span class="s1">ch)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_emitCodePoint(cp) {</span>
        <span class="s0">const </span><span class="s1">type = isWhitespace(cp)</span>
            <span class="s1">? TokenType.WHITESPACE_CHARACTER</span>
            <span class="s1">: cp === CODE_POINTS.NULL</span>
                <span class="s1">? TokenType.NULL_CHARACTER</span>
                <span class="s1">: TokenType.CHARACTER</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._appendCharToCurrentCharacterToken(type</span><span class="s0">, </span><span class="s1">String.fromCodePoint(cp))</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//NOTE: used when we emit characters explicitly.</span>
    <span class="s4">//This is always for non-whitespace and non-null characters, which allows us to avoid additional checks.</span>
    <span class="s1">_emitChars(ch) {</span>
        <span class="s0">this</span><span class="s1">._appendCharToCurrentCharacterToken(TokenType.CHARACTER</span><span class="s0">, </span><span class="s1">ch)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">// Character reference helpers</span>
    <span class="s1">_matchNamedCharacterReference(cp) {</span>
        <span class="s0">let </span><span class="s1">result = </span><span class="s0">null;</span>
        <span class="s0">let </span><span class="s1">excess = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s0">let </span><span class="s1">withoutSemicolon = </span><span class="s0">false;</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">, </span><span class="s1">current = htmlDecodeTree[</span><span class="s3">0</span><span class="s1">]</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">cp = </span><span class="s0">this</span><span class="s1">._consume()) {</span>
            <span class="s1">i = determineBranch(htmlDecodeTree</span><span class="s0">, </span><span class="s1">current</span><span class="s0">, </span><span class="s1">i + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">cp)</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(i &lt; </span><span class="s3">0</span><span class="s1">)</span>
                <span class="s0">break;</span>
            <span class="s1">excess += </span><span class="s3">1</span><span class="s0">;</span>
            <span class="s1">current = htmlDecodeTree[i]</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">masked = current &amp; BinTrieFlags.VALUE_LENGTH</span><span class="s0">;</span>
            <span class="s4">// If the branch is a value, store it and continue</span>
            <span class="s0">if </span><span class="s1">(masked) {</span>
                <span class="s4">// The mask is the number of bytes of the value, including the current byte.</span>
                <span class="s0">const </span><span class="s1">valueLength = (masked &gt;&gt; </span><span class="s3">14</span><span class="s1">) - </span><span class="s3">1</span><span class="s0">;</span>
                <span class="s4">// Attribute values that aren't terminated properly aren't parsed, and shouldn't lead to a parser error.</span>
                <span class="s4">// See the example in https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state</span>
                <span class="s0">if </span><span class="s1">(cp !== CODE_POINTS.SEMICOLON &amp;&amp;</span>
                    <span class="s0">this</span><span class="s1">._isCharacterReferenceInAttribute() &amp;&amp;</span>
                    <span class="s1">isEntityInAttributeInvalidEnd(</span><span class="s0">this</span><span class="s1">.preprocessor.peek(</span><span class="s3">1</span><span class="s1">))) {</span>
                    <span class="s4">//NOTE: we don't flush all consumed code points here, and instead switch back to the original state after</span>
                    <span class="s4">//emitting an ampersand. This is fine, as alphanumeric characters won't be parsed differently in attributes.</span>
                    <span class="s1">result = [CODE_POINTS.AMPERSAND]</span><span class="s0">;</span>
                    <span class="s4">// Skip over the value.</span>
                    <span class="s1">i += valueLength</span><span class="s0">;</span>
                <span class="s1">}</span>
                <span class="s0">else </span><span class="s1">{</span>
                    <span class="s4">// If this is a surrogate pair, consume the next two bytes.</span>
                    <span class="s1">result =</span>
                        <span class="s1">valueLength === </span><span class="s3">0</span>
                            <span class="s1">? [htmlDecodeTree[i] &amp; ~BinTrieFlags.VALUE_LENGTH]</span>
                            <span class="s1">: valueLength === </span><span class="s3">1</span>
                                <span class="s1">? [htmlDecodeTree[++i]]</span>
                                <span class="s1">: [htmlDecodeTree[++i]</span><span class="s0">, </span><span class="s1">htmlDecodeTree[++i]]</span><span class="s0">;</span>
                    <span class="s1">excess = </span><span class="s3">0</span><span class="s0">;</span>
                    <span class="s1">withoutSemicolon = cp !== CODE_POINTS.SEMICOLON</span><span class="s0">;</span>
                <span class="s1">}</span>
                <span class="s0">if </span><span class="s1">(valueLength === </span><span class="s3">0</span><span class="s1">) {</span>
                    <span class="s4">// If the value is zero-length, we're done.</span>
                    <span class="s0">this</span><span class="s1">._consume()</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">._unconsume(excess)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(withoutSemicolon &amp;&amp; !</span><span class="s0">this</span><span class="s1">.preprocessor.endOfChunkHit) {</span>
            <span class="s0">this</span><span class="s1">._err(ERR.missingSemicolonAfterCharacterReference)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s4">// We want to emit the error above on the code point after the entity.</span>
        <span class="s4">// We always consume one code point too many in the loop, and we wait to</span>
        <span class="s4">// unconsume it until after the error is emitted.</span>
        <span class="s0">this</span><span class="s1">._unconsume(</span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">result</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_isCharacterReferenceInAttribute() {</span>
        <span class="s0">return </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.returnState === State.ATTRIBUTE_VALUE_DOUBLE_QUOTED ||</span>
            <span class="s0">this</span><span class="s1">.returnState === State.ATTRIBUTE_VALUE_SINGLE_QUOTED ||</span>
            <span class="s0">this</span><span class="s1">.returnState === State.ATTRIBUTE_VALUE_UNQUOTED)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_flushCodePointConsumedAsCharacterReference(cp) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">._isCharacterReferenceInAttribute()) {</span>
            <span class="s0">this</span><span class="s1">.currentAttr.value += String.fromCodePoint(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Calling states this way turns out to be much faster than any other approach.</span>
    <span class="s1">_callState(cp) {</span>
        <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.state) {</span>
            <span class="s0">case </span><span class="s1">State.DATA: {</span>
                <span class="s0">this</span><span class="s1">._stateData(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.RCDATA: {</span>
                <span class="s0">this</span><span class="s1">._stateRcdata(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.RAWTEXT: {</span>
                <span class="s0">this</span><span class="s1">._stateRawtext(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptData(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.PLAINTEXT: {</span>
                <span class="s0">this</span><span class="s1">._statePlaintext(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.TAG_OPEN: {</span>
                <span class="s0">this</span><span class="s1">._stateTagOpen(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.END_TAG_OPEN: {</span>
                <span class="s0">this</span><span class="s1">._stateEndTagOpen(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.TAG_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateTagName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.RCDATA_LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._stateRcdataLessThanSign(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.RCDATA_END_TAG_OPEN: {</span>
                <span class="s0">this</span><span class="s1">._stateRcdataEndTagOpen(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.RCDATA_END_TAG_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateRcdataEndTagName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.RAWTEXT_LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._stateRawtextLessThanSign(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.RAWTEXT_END_TAG_OPEN: {</span>
                <span class="s0">this</span><span class="s1">._stateRawtextEndTagOpen(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.RAWTEXT_END_TAG_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateRawtextEndTagName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataLessThanSign(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_END_TAG_OPEN: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataEndTagOpen(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_END_TAG_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataEndTagName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_ESCAPE_START: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataEscapeStart(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_ESCAPE_START_DASH: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataEscapeStartDash(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_ESCAPED: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataEscaped(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_ESCAPED_DASH: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataEscapedDash(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_ESCAPED_DASH_DASH: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataEscapedDashDash(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataEscapedLessThanSign(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_ESCAPED_END_TAG_OPEN: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataEscapedEndTagOpen(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_ESCAPED_END_TAG_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataEscapedEndTagName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_DOUBLE_ESCAPE_START: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataDoubleEscapeStart(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_DOUBLE_ESCAPED: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataDoubleEscaped(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataDoubleEscapedDash(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataDoubleEscapedDashDash(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataDoubleEscapedLessThanSign(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SCRIPT_DATA_DOUBLE_ESCAPE_END: {</span>
                <span class="s0">this</span><span class="s1">._stateScriptDataDoubleEscapeEnd(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.BEFORE_ATTRIBUTE_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateBeforeAttributeName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.ATTRIBUTE_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateAttributeName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.AFTER_ATTRIBUTE_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateAfterAttributeName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.BEFORE_ATTRIBUTE_VALUE: {</span>
                <span class="s0">this</span><span class="s1">._stateBeforeAttributeValue(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.ATTRIBUTE_VALUE_DOUBLE_QUOTED: {</span>
                <span class="s0">this</span><span class="s1">._stateAttributeValueDoubleQuoted(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.ATTRIBUTE_VALUE_SINGLE_QUOTED: {</span>
                <span class="s0">this</span><span class="s1">._stateAttributeValueSingleQuoted(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.ATTRIBUTE_VALUE_UNQUOTED: {</span>
                <span class="s0">this</span><span class="s1">._stateAttributeValueUnquoted(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.AFTER_ATTRIBUTE_VALUE_QUOTED: {</span>
                <span class="s0">this</span><span class="s1">._stateAfterAttributeValueQuoted(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.SELF_CLOSING_START_TAG: {</span>
                <span class="s0">this</span><span class="s1">._stateSelfClosingStartTag(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.BOGUS_COMMENT: {</span>
                <span class="s0">this</span><span class="s1">._stateBogusComment(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.MARKUP_DECLARATION_OPEN: {</span>
                <span class="s0">this</span><span class="s1">._stateMarkupDeclarationOpen(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.COMMENT_START: {</span>
                <span class="s0">this</span><span class="s1">._stateCommentStart(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.COMMENT_START_DASH: {</span>
                <span class="s0">this</span><span class="s1">._stateCommentStartDash(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.COMMENT: {</span>
                <span class="s0">this</span><span class="s1">._stateComment(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.COMMENT_LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._stateCommentLessThanSign(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.COMMENT_LESS_THAN_SIGN_BANG: {</span>
                <span class="s0">this</span><span class="s1">._stateCommentLessThanSignBang(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.COMMENT_LESS_THAN_SIGN_BANG_DASH: {</span>
                <span class="s0">this</span><span class="s1">._stateCommentLessThanSignBangDash(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH: {</span>
                <span class="s0">this</span><span class="s1">._stateCommentLessThanSignBangDashDash(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.COMMENT_END_DASH: {</span>
                <span class="s0">this</span><span class="s1">._stateCommentEndDash(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.COMMENT_END: {</span>
                <span class="s0">this</span><span class="s1">._stateCommentEnd(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.COMMENT_END_BANG: {</span>
                <span class="s0">this</span><span class="s1">._stateCommentEndBang(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.DOCTYPE: {</span>
                <span class="s0">this</span><span class="s1">._stateDoctype(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.BEFORE_DOCTYPE_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateBeforeDoctypeName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.DOCTYPE_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateDoctypeName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.AFTER_DOCTYPE_NAME: {</span>
                <span class="s0">this</span><span class="s1">._stateAfterDoctypeName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.AFTER_DOCTYPE_PUBLIC_KEYWORD: {</span>
                <span class="s0">this</span><span class="s1">._stateAfterDoctypePublicKeyword(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER: {</span>
                <span class="s0">this</span><span class="s1">._stateBeforeDoctypePublicIdentifier(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED: {</span>
                <span class="s0">this</span><span class="s1">._stateDoctypePublicIdentifierDoubleQuoted(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED: {</span>
                <span class="s0">this</span><span class="s1">._stateDoctypePublicIdentifierSingleQuoted(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.AFTER_DOCTYPE_PUBLIC_IDENTIFIER: {</span>
                <span class="s0">this</span><span class="s1">._stateAfterDoctypePublicIdentifier(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS: {</span>
                <span class="s0">this</span><span class="s1">._stateBetweenDoctypePublicAndSystemIdentifiers(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.AFTER_DOCTYPE_SYSTEM_KEYWORD: {</span>
                <span class="s0">this</span><span class="s1">._stateAfterDoctypeSystemKeyword(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER: {</span>
                <span class="s0">this</span><span class="s1">._stateBeforeDoctypeSystemIdentifier(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED: {</span>
                <span class="s0">this</span><span class="s1">._stateDoctypeSystemIdentifierDoubleQuoted(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED: {</span>
                <span class="s0">this</span><span class="s1">._stateDoctypeSystemIdentifierSingleQuoted(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.AFTER_DOCTYPE_SYSTEM_IDENTIFIER: {</span>
                <span class="s0">this</span><span class="s1">._stateAfterDoctypeSystemIdentifier(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.BOGUS_DOCTYPE: {</span>
                <span class="s0">this</span><span class="s1">._stateBogusDoctype(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.CDATA_SECTION: {</span>
                <span class="s0">this</span><span class="s1">._stateCdataSection(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.CDATA_SECTION_BRACKET: {</span>
                <span class="s0">this</span><span class="s1">._stateCdataSectionBracket(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.CDATA_SECTION_END: {</span>
                <span class="s0">this</span><span class="s1">._stateCdataSectionEnd(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.CHARACTER_REFERENCE: {</span>
                <span class="s0">this</span><span class="s1">._stateCharacterReference(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.NAMED_CHARACTER_REFERENCE: {</span>
                <span class="s0">this</span><span class="s1">._stateNamedCharacterReference(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.AMBIGUOUS_AMPERSAND: {</span>
                <span class="s0">this</span><span class="s1">._stateAmbiguousAmpersand(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.NUMERIC_CHARACTER_REFERENCE: {</span>
                <span class="s0">this</span><span class="s1">._stateNumericCharacterReference(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.HEXADEMICAL_CHARACTER_REFERENCE_START: {</span>
                <span class="s0">this</span><span class="s1">._stateHexademicalCharacterReferenceStart(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.HEXADEMICAL_CHARACTER_REFERENCE: {</span>
                <span class="s0">this</span><span class="s1">._stateHexademicalCharacterReference(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.DECIMAL_CHARACTER_REFERENCE: {</span>
                <span class="s0">this</span><span class="s1">._stateDecimalCharacterReference(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">State.NUMERIC_CHARACTER_REFERENCE_END: {</span>
                <span class="s0">this</span><span class="s1">._stateNumericCharacterReferenceEnd(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">throw new </span><span class="s1">Error(</span><span class="s2">'Unknown state'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// State machine</span>
    <span class="s4">// Data state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateData(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.TAG_OPEN</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.AMPERSAND: {</span>
                <span class="s0">this</span><span class="s1">.returnState = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.CHARACTER_REFERENCE</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">//  RCDATA state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateRcdata(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.AMPERSAND: {</span>
                <span class="s0">this</span><span class="s1">.returnState = State.RCDATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.CHARACTER_REFERENCE</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.RCDATA_LESS_THAN_SIGN</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// RAWTEXT state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateRawtext(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.RAWTEXT_LESS_THAN_SIGN</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptData(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_LESS_THAN_SIGN</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// PLAINTEXT state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_statePlaintext(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Tag open state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateTagOpen(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiLetter(cp)) {</span>
            <span class="s0">this</span><span class="s1">._createStartTagToken()</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.TAG_NAME</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateTagName(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else</span>
            <span class="s0">switch </span><span class="s1">(cp) {</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.EXCLAMATION_MARK: {</span>
                    <span class="s0">this</span><span class="s1">.state = State.MARKUP_DECLARATION_OPEN</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.SOLIDUS: {</span>
                    <span class="s0">this</span><span class="s1">.state = State.END_TAG_OPEN</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.QUESTION_MARK: {</span>
                    <span class="s0">this</span><span class="s1">._err(ERR.unexpectedQuestionMarkInsteadOfTagName)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._createCommentToken(</span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">.state = State.BOGUS_COMMENT</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._stateBogusComment(cp)</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                    <span class="s0">this</span><span class="s1">._err(ERR.eofBeforeTagName)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;'</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">default</span><span class="s1">: {</span>
                    <span class="s0">this</span><span class="s1">._err(ERR.invalidFirstCharacterOfTagName)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;'</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._stateData(cp)</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// End tag open state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateEndTagOpen(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiLetter(cp)) {</span>
            <span class="s0">this</span><span class="s1">._createEndTagToken()</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.TAG_NAME</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateTagName(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else</span>
            <span class="s0">switch </span><span class="s1">(cp) {</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                    <span class="s0">this</span><span class="s1">._err(ERR.missingEndTagName)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                    <span class="s0">this</span><span class="s1">._err(ERR.eofBeforeTagName)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;/'</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">default</span><span class="s1">: {</span>
                    <span class="s0">this</span><span class="s1">._err(ERR.invalidFirstCharacterOfTagName)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._createCommentToken(</span><span class="s3">2</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">.state = State.BOGUS_COMMENT</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._stateBogusComment(cp)</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Tag name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateTagName(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SOLIDUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SELF_CLOSING_START_TAG</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentTagToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s1">token.tagName += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInTag)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.tagName += String.fromCodePoint(isAsciiUpper(cp) ? toAsciiLower(cp) : cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// RCDATA less-than sign state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateRcdataLessThanSign(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.SOLIDUS) {</span>
            <span class="s0">this</span><span class="s1">.state = State.RCDATA_END_TAG_OPEN</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.RCDATA</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateRcdata(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// RCDATA end tag open state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateRcdataEndTagOpen(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiLetter(cp)) {</span>
            <span class="s0">this</span><span class="s1">.state = State.RCDATA_END_TAG_NAME</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateRcdataEndTagName(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;/'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.RCDATA</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateRcdata(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">handleSpecialEndTag(_cp) {</span>
        <span class="s0">if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">.preprocessor.startsWith(</span><span class="s0">this</span><span class="s1">.lastStartTagName</span><span class="s0">, false</span><span class="s1">)) {</span>
            <span class="s0">return </span><span class="s1">!</span><span class="s0">this</span><span class="s1">._ensureHibernation()</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">._createEndTagToken()</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s1">token.tagName = </span><span class="s0">this</span><span class="s1">.lastStartTagName</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">cp = </span><span class="s0">this</span><span class="s1">.preprocessor.peek(</span><span class="s0">this</span><span class="s1">.lastStartTagName.length)</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s0">this</span><span class="s1">._advanceBy(</span><span class="s0">this</span><span class="s1">.lastStartTagName.length)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SOLIDUS: {</span>
                <span class="s0">this</span><span class="s1">._advanceBy(</span><span class="s0">this</span><span class="s1">.lastStartTagName.length)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.SELF_CLOSING_START_TAG</span><span class="s0">;</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._advanceBy(</span><span class="s0">this</span><span class="s1">.lastStartTagName.length)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentTagToken()</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">return </span><span class="s1">!</span><span class="s0">this</span><span class="s1">._ensureHibernation()</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// RCDATA end tag name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateRcdataEndTagName(cp) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.handleSpecialEndTag(cp)) {</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;/'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.RCDATA</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateRcdata(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// RAWTEXT less-than sign state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateRawtextLessThanSign(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.SOLIDUS) {</span>
            <span class="s0">this</span><span class="s1">.state = State.RAWTEXT_END_TAG_OPEN</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.RAWTEXT</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateRawtext(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// RAWTEXT end tag open state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateRawtextEndTagOpen(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiLetter(cp)) {</span>
            <span class="s0">this</span><span class="s1">.state = State.RAWTEXT_END_TAG_NAME</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateRawtextEndTagName(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;/'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.RAWTEXT</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateRawtext(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// RAWTEXT end tag name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateRawtextEndTagName(cp) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.handleSpecialEndTag(cp)) {</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;/'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.RAWTEXT</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateRawtext(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data less-than sign state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataLessThanSign(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SOLIDUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_END_TAG_OPEN</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EXCLAMATION_MARK: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPE_START</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;!'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateScriptData(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data end tag open state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataEndTagOpen(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiLetter(cp)) {</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_END_TAG_NAME</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptDataEndTagName(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;/'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptData(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data end tag name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataEndTagName(cp) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.handleSpecialEndTag(cp)) {</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;/'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptData(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data escape start state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataEscapeStart(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.HYPHEN_MINUS) {</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPE_START_DASH</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'-'</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptData(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data escape start dash state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataEscapeStartDash(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.HYPHEN_MINUS) {</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED_DASH_DASH</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'-'</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptData(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data escaped state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataEscaped(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED_DASH</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'-'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInScriptHtmlCommentLikeText)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data escaped dash state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataEscapedDash(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED_DASH_DASH</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'-'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInScriptHtmlCommentLikeText)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data escaped dash dash state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataEscapedDashDash(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'-'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&gt;'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInScriptHtmlCommentLikeText)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data escaped less-than sign state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataEscapedLessThanSign(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.SOLIDUS) {</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED_END_TAG_OPEN</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(isAsciiLetter(cp)) {</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPE_START</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptDataDoubleEscapeStart(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptDataEscaped(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data escaped end tag open state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataEscapedEndTagOpen(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiLetter(cp)) {</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED_END_TAG_NAME</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptDataEscapedEndTagName(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;/'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptDataEscaped(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data escaped end tag name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataEscapedEndTagName(cp) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.handleSpecialEndTag(cp)) {</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;/'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptDataEscaped(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data double escape start state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataDoubleEscapeStart(cp) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.preprocessor.startsWith(SEQUENCES.SCRIPT</span><span class="s0">, false</span><span class="s1">) &amp;&amp;</span>
            <span class="s1">isScriptDataDoubleEscapeSequenceEnd(</span><span class="s0">this</span><span class="s1">.preprocessor.peek(SEQUENCES.SCRIPT.length))) {</span>
            <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; SEQUENCES.SCRIPT.length</span><span class="s0">; </span><span class="s1">i++) {</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(</span><span class="s0">this</span><span class="s1">._consume())</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">._ensureHibernation()) {</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptDataEscaped(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data double escaped state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataDoubleEscaped(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'-'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInScriptHtmlCommentLikeText)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data double escaped dash state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataDoubleEscapedDash(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'-'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInScriptHtmlCommentLikeText)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data double escaped dash dash state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataDoubleEscapedDashDash(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'-'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&lt;'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'&gt;'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitChars(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInScriptHtmlCommentLikeText)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data double escaped less-than sign state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataDoubleEscapedLessThanSign(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.SOLIDUS) {</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPE_END</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">'/'</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptDataDoubleEscaped(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Script data double escape end state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateScriptDataDoubleEscapeEnd(cp) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.preprocessor.startsWith(SEQUENCES.SCRIPT</span><span class="s0">, false</span><span class="s1">) &amp;&amp;</span>
            <span class="s1">isScriptDataDoubleEscapeSequenceEnd(</span><span class="s0">this</span><span class="s1">.preprocessor.peek(SEQUENCES.SCRIPT.length))) {</span>
            <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; SEQUENCES.SCRIPT.length</span><span class="s0">; </span><span class="s1">i++) {</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(</span><span class="s0">this</span><span class="s1">._consume())</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_ESCAPED</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">._ensureHibernation()) {</span>
            <span class="s0">this</span><span class="s1">.state = State.SCRIPT_DATA_DOUBLE_ESCAPED</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateScriptDataDoubleEscaped(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Before attribute name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateBeforeAttributeName(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s4">// Ignore whitespace</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SOLIDUS:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">.state = State.AFTER_ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateAfterAttributeName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EQUALS_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedEqualsSignBeforeAttributeName)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._createAttr(</span><span class="s2">'='</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._createAttr(</span><span class="s2">''</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateAttributeName(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Attribute name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAttributeName(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SOLIDUS:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._leaveAttrName()</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.AFTER_ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateAfterAttributeName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EQUALS_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._leaveAttrName()</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_ATTRIBUTE_VALUE</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedCharacterInAttributeName)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.currentAttr.name += String.fromCodePoint(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.currentAttr.name += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.currentAttr.name += String.fromCodePoint(isAsciiUpper(cp) ? toAsciiLower(cp) : cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// After attribute name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAfterAttributeName(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s4">// Ignore whitespace</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SOLIDUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.SELF_CLOSING_START_TAG</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EQUALS_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_ATTRIBUTE_VALUE</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentTagToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInTag)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._createAttr(</span><span class="s2">''</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateAttributeName(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Before attribute value state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateBeforeAttributeValue(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s4">// Ignore whitespace</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK: {</span>
                <span class="s0">this</span><span class="s1">.state = State.ATTRIBUTE_VALUE_DOUBLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE: {</span>
                <span class="s0">this</span><span class="s1">.state = State.ATTRIBUTE_VALUE_SINGLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingAttributeValue)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentTagToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.state = State.ATTRIBUTE_VALUE_UNQUOTED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateAttributeValueUnquoted(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Attribute value (double-quoted) state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAttributeValueDoubleQuoted(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK: {</span>
                <span class="s0">this</span><span class="s1">.state = State.AFTER_ATTRIBUTE_VALUE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.AMPERSAND: {</span>
                <span class="s0">this</span><span class="s1">.returnState = State.ATTRIBUTE_VALUE_DOUBLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.CHARACTER_REFERENCE</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.currentAttr.value += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInTag)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.currentAttr.value += String.fromCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Attribute value (single-quoted) state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAttributeValueSingleQuoted(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE: {</span>
                <span class="s0">this</span><span class="s1">.state = State.AFTER_ATTRIBUTE_VALUE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.AMPERSAND: {</span>
                <span class="s0">this</span><span class="s1">.returnState = State.ATTRIBUTE_VALUE_SINGLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.CHARACTER_REFERENCE</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.currentAttr.value += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInTag)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.currentAttr.value += String.fromCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Attribute value (unquoted) state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAttributeValueUnquoted(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s0">this</span><span class="s1">._leaveAttrValue()</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.AMPERSAND: {</span>
                <span class="s0">this</span><span class="s1">.returnState = State.ATTRIBUTE_VALUE_UNQUOTED</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.CHARACTER_REFERENCE</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._leaveAttrValue()</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentTagToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.currentAttr.value += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EQUALS_SIGN:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GRAVE_ACCENT: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedCharacterInUnquotedAttributeValue)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.currentAttr.value += String.fromCodePoint(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInTag)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.currentAttr.value += String.fromCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// After attribute value (quoted) state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAfterAttributeValueQuoted(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s0">this</span><span class="s1">._leaveAttrValue()</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SOLIDUS: {</span>
                <span class="s0">this</span><span class="s1">._leaveAttrValue()</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.SELF_CLOSING_START_TAG</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._leaveAttrValue()</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentTagToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInTag)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingWhitespaceBetweenAttributes)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBeforeAttributeName(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Self-closing start tag state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateSelfClosingStartTag(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
                <span class="s1">token.selfClosing = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentTagToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInTag)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedSolidusInTag)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_ATTRIBUTE_NAME</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBeforeAttributeName(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Bogus comment state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateBogusComment(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s1">token.data += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.data += String.fromCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Markup declaration open state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateMarkupDeclarationOpen(cp) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">._consumeSequenceIfMatch(SEQUENCES.DASH_DASH</span><span class="s0">, true</span><span class="s1">)) {</span>
            <span class="s0">this</span><span class="s1">._createCommentToken(SEQUENCES.DASH_DASH.length + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.COMMENT_START</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">._consumeSequenceIfMatch(SEQUENCES.DOCTYPE</span><span class="s0">, false</span><span class="s1">)) {</span>
            <span class="s4">// NOTE: Doctypes tokens are created without fixed offsets. We keep track of the moment a doctype *might* start here.</span>
            <span class="s0">this</span><span class="s1">.currentLocation = </span><span class="s0">this</span><span class="s1">.getCurrentLocation(SEQUENCES.DOCTYPE.length + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.DOCTYPE</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">._consumeSequenceIfMatch(SEQUENCES.CDATA_START</span><span class="s0">, true</span><span class="s1">)) {</span>
            <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.inForeignNode) {</span>
                <span class="s0">this</span><span class="s1">.state = State.CDATA_SECTION</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">else </span><span class="s1">{</span>
                <span class="s0">this</span><span class="s1">._err(ERR.cdataInHtmlContent)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._createCommentToken(SEQUENCES.CDATA_START.length + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.currentToken.data = </span><span class="s2">'[CDATA['</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.BOGUS_COMMENT</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s4">//NOTE: Sequence lookups can be abrupted by hibernation. In that case, lookup</span>
        <span class="s4">//results are no longer valid and we will need to start over.</span>
        <span class="s0">else if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">._ensureHibernation()) {</span>
            <span class="s0">this</span><span class="s1">._err(ERR.incorrectlyOpenedComment)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._createCommentToken(</span><span class="s3">2</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.BOGUS_COMMENT</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateBogusComment(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Comment start state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCommentStart(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT_START_DASH</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.abruptClosingOfEmptyComment)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateComment(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Comment start dash state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCommentStartDash(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT_END</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.abruptClosingOfEmptyComment)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInComment)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.data += </span><span class="s2">'-'</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateComment(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Comment state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateComment(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT_END_DASH</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s1">token.data += </span><span class="s2">'&lt;'</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT_LESS_THAN_SIGN</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s1">token.data += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInComment)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.data += String.fromCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Comment less-than sign state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCommentLessThanSign(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EXCLAMATION_MARK: {</span>
                <span class="s1">token.data += </span><span class="s2">'!'</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT_LESS_THAN_SIGN_BANG</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LESS_THAN_SIGN: {</span>
                <span class="s1">token.data += </span><span class="s2">'&lt;'</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateComment(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Comment less-than sign bang state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCommentLessThanSignBang(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.HYPHEN_MINUS) {</span>
            <span class="s0">this</span><span class="s1">.state = State.COMMENT_LESS_THAN_SIGN_BANG_DASH</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">.state = State.COMMENT</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateComment(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Comment less-than sign bang dash state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCommentLessThanSignBangDash(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.HYPHEN_MINUS) {</span>
            <span class="s0">this</span><span class="s1">.state = State.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">.state = State.COMMENT_END_DASH</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateCommentEndDash(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Comment less-than sign bang dash dash state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCommentLessThanSignBangDashDash(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp !== CODE_POINTS.GREATER_THAN_SIGN &amp;&amp; cp !== CODE_POINTS.EOF) {</span>
            <span class="s0">this</span><span class="s1">._err(ERR.nestedComment)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.state = State.COMMENT_END</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._stateCommentEnd(cp)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">// Comment end dash state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCommentEndDash(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT_END</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInComment)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.data += </span><span class="s2">'-'</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateComment(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Comment end state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCommentEnd(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EXCLAMATION_MARK: {</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT_END_BANG</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s1">token.data += </span><span class="s2">'-'</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInComment)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.data += </span><span class="s2">'--'</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateComment(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Comment end bang state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCommentEndBang(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.HYPHEN_MINUS: {</span>
                <span class="s1">token.data += </span><span class="s2">'--!'</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT_END_DASH</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.incorrectlyClosedComment)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInComment)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentComment(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.data += </span><span class="s2">'--!'</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.COMMENT</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateComment(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// DOCTYPE state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateDoctype(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_DOCTYPE_NAME</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_DOCTYPE_NAME</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBeforeDoctypeName(cp)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._createDoctypeToken(</span><span class="s0">null</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingWhitespaceBeforeDoctypeName)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_DOCTYPE_NAME</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBeforeDoctypeName(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Before DOCTYPE name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateBeforeDoctypeName(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiUpper(cp)) {</span>
            <span class="s0">this</span><span class="s1">._createDoctypeToken(String.fromCharCode(toAsciiLower(cp)))</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_NAME</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else</span>
            <span class="s0">switch </span><span class="s1">(cp) {</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                    <span class="s4">// Ignore whitespace</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                    <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._createDoctypeToken(REPLACEMENT_CHARACTER)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_NAME</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                    <span class="s0">this</span><span class="s1">._err(ERR.missingDoctypeName)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._createDoctypeToken(</span><span class="s0">null</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
                    <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                    <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                    <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._createDoctypeToken(</span><span class="s0">null</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
                    <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                    <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">default</span><span class="s1">: {</span>
                    <span class="s0">this</span><span class="s1">._createDoctypeToken(String.fromCodePoint(cp))</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_NAME</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// DOCTYPE name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateDoctypeName(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s0">this</span><span class="s1">.state = State.AFTER_DOCTYPE_NAME</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s1">token.name += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.name += String.fromCodePoint(isAsciiUpper(cp) ? toAsciiLower(cp) : cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// After DOCTYPE name state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAfterDoctypeName(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s4">// Ignore whitespace</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">._consumeSequenceIfMatch(SEQUENCES.PUBLIC</span><span class="s0">, false</span><span class="s1">)) {</span>
                    <span class="s0">this</span><span class="s1">.state = State.AFTER_DOCTYPE_PUBLIC_KEYWORD</span><span class="s0">;</span>
                <span class="s1">}</span>
                <span class="s0">else if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">._consumeSequenceIfMatch(SEQUENCES.SYSTEM</span><span class="s0">, false</span><span class="s1">)) {</span>
                    <span class="s0">this</span><span class="s1">.state = State.AFTER_DOCTYPE_SYSTEM_KEYWORD</span><span class="s0">;</span>
                <span class="s1">}</span>
                <span class="s4">//NOTE: sequence lookup can be abrupted by hibernation. In that case lookup</span>
                <span class="s4">//results are no longer valid and we will need to start over.</span>
                <span class="s0">else if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">._ensureHibernation()) {</span>
                    <span class="s0">this</span><span class="s1">._err(ERR.invalidCharacterSequenceAfterDoctypeName)</span><span class="s0">;</span>
                    <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                    <span class="s0">this</span><span class="s1">.state = State.BOGUS_DOCTYPE</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">._stateBogusDoctype(cp)</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// After DOCTYPE public keyword state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAfterDoctypePublicKeyword(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingWhitespaceAfterDoctypePublicKeyword)</span><span class="s0">;</span>
                <span class="s1">token.publicId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingWhitespaceAfterDoctypePublicKeyword)</span><span class="s0">;</span>
                <span class="s1">token.publicId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingDoctypePublicIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingQuoteBeforeDoctypePublicIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.BOGUS_DOCTYPE</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBogusDoctype(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Before DOCTYPE public identifier state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateBeforeDoctypePublicIdentifier(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s4">// Ignore whitespace</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK: {</span>
                <span class="s1">token.publicId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE: {</span>
                <span class="s1">token.publicId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingDoctypePublicIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingQuoteBeforeDoctypePublicIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.BOGUS_DOCTYPE</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBogusDoctype(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// DOCTYPE public identifier (double-quoted) state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateDoctypePublicIdentifierDoubleQuoted(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK: {</span>
                <span class="s0">this</span><span class="s1">.state = State.AFTER_DOCTYPE_PUBLIC_IDENTIFIER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s1">token.publicId += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.abruptDoctypePublicIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.publicId += String.fromCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// DOCTYPE public identifier (single-quoted) state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateDoctypePublicIdentifierSingleQuoted(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE: {</span>
                <span class="s0">this</span><span class="s1">.state = State.AFTER_DOCTYPE_PUBLIC_IDENTIFIER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s1">token.publicId += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.abruptDoctypePublicIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.publicId += String.fromCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// After DOCTYPE public identifier state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAfterDoctypePublicIdentifier(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s0">this</span><span class="s1">.state = State.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers)</span><span class="s0">;</span>
                <span class="s1">token.systemId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers)</span><span class="s0">;</span>
                <span class="s1">token.systemId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.BOGUS_DOCTYPE</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBogusDoctype(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Between DOCTYPE public and system identifiers state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateBetweenDoctypePublicAndSystemIdentifiers(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s4">// Ignore whitespace</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK: {</span>
                <span class="s1">token.systemId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE: {</span>
                <span class="s1">token.systemId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.BOGUS_DOCTYPE</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBogusDoctype(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// After DOCTYPE system keyword state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAfterDoctypeSystemKeyword(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s0">this</span><span class="s1">.state = State.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword)</span><span class="s0">;</span>
                <span class="s1">token.systemId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword)</span><span class="s0">;</span>
                <span class="s1">token.systemId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingDoctypeSystemIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.BOGUS_DOCTYPE</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBogusDoctype(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Before DOCTYPE system identifier state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateBeforeDoctypeSystemIdentifier(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s4">// Ignore whitespace</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK: {</span>
                <span class="s1">token.systemId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE: {</span>
                <span class="s1">token.systemId = </span><span class="s2">''</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingDoctypeSystemIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.state = State.BOGUS_DOCTYPE</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBogusDoctype(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// DOCTYPE system identifier (double-quoted) state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateDoctypeSystemIdentifierDoubleQuoted(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.QUOTATION_MARK: {</span>
                <span class="s0">this</span><span class="s1">.state = State.AFTER_DOCTYPE_SYSTEM_IDENTIFIER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s1">token.systemId += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.abruptDoctypeSystemIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.systemId += String.fromCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// DOCTYPE system identifier (single-quoted) state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateDoctypeSystemIdentifierSingleQuoted(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.APOSTROPHE: {</span>
                <span class="s0">this</span><span class="s1">.state = State.AFTER_DOCTYPE_SYSTEM_IDENTIFIER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s1">token.systemId += REPLACEMENT_CHARACTER</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.abruptDoctypeSystemIdentifier)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s1">token.systemId += String.fromCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// After DOCTYPE system identifier state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAfterDoctypeSystemIdentifier(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.SPACE:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.LINE_FEED:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.TABULATION:</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.FORM_FEED: {</span>
                <span class="s4">// Ignore whitespace</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInDoctype)</span><span class="s0">;</span>
                <span class="s1">token.forceQuirks = </span><span class="s0">true;</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedCharacterAfterDoctypeSystemIdentifier)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.BOGUS_DOCTYPE</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateBogusDoctype(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Bogus DOCTYPE state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateBogusDoctype(cp) {</span>
        <span class="s0">const </span><span class="s1">token = </span><span class="s0">this</span><span class="s1">.currentToken</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.NULL: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unexpectedNullCharacter)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">.emitCurrentDoctype(token)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Do nothing</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// CDATA section state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCdataSection(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.RIGHT_SQUARE_BRACKET: {</span>
                <span class="s0">this</span><span class="s1">.state = State.CDATA_SECTION_BRACKET</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.EOF: {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.eofInCdata)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._emitEOFToken()</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._emitCodePoint(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// CDATA section bracket state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCdataSectionBracket(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.RIGHT_SQUARE_BRACKET) {</span>
            <span class="s0">this</span><span class="s1">.state = State.CDATA_SECTION_END</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">']'</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.CDATA_SECTION</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateCdataSection(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// CDATA section end state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCdataSectionEnd(cp) {</span>
        <span class="s0">switch </span><span class="s1">(cp) {</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.GREATER_THAN_SIGN: {</span>
                <span class="s0">this</span><span class="s1">.state = State.DATA</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">CODE_POINTS.RIGHT_SQUARE_BRACKET: {</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">']'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">: {</span>
                <span class="s0">this</span><span class="s1">._emitChars(</span><span class="s2">']]'</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.state = State.CDATA_SECTION</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._stateCdataSection(cp)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Character reference state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateCharacterReference(cp) {</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.NUMBER_SIGN) {</span>
            <span class="s0">this</span><span class="s1">.state = State.NUMERIC_CHARACTER_REFERENCE</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(isAsciiAlphaNumeric(cp)) {</span>
            <span class="s0">this</span><span class="s1">.state = State.NAMED_CHARACTER_REFERENCE</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateNamedCharacterReference(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._reconsumeInState(</span><span class="s0">this</span><span class="s1">.returnState</span><span class="s0">, </span><span class="s1">cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Named character reference state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateNamedCharacterReference(cp) {</span>
        <span class="s0">const </span><span class="s1">matchResult = </span><span class="s0">this</span><span class="s1">._matchNamedCharacterReference(cp)</span><span class="s0">;</span>
        <span class="s4">//NOTE: Matching can be abrupted by hibernation. In that case, match</span>
        <span class="s4">//results are no longer valid and we will need to start over.</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">._ensureHibernation()) </span><span class="s0">;</span>
        <span class="s0">else if </span><span class="s1">(matchResult) {</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; matchResult.length</span><span class="s0">; </span><span class="s1">i++) {</span>
                <span class="s0">this</span><span class="s1">._flushCodePointConsumedAsCharacterReference(matchResult[i])</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">this</span><span class="s1">.state = </span><span class="s0">this</span><span class="s1">.returnState</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.AMBIGUOUS_AMPERSAND</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Ambiguos ampersand state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateAmbiguousAmpersand(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiAlphaNumeric(cp)) {</span>
            <span class="s0">this</span><span class="s1">._flushCodePointConsumedAsCharacterReference(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.SEMICOLON) {</span>
                <span class="s0">this</span><span class="s1">._err(ERR.unknownNamedCharacterReference)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">this</span><span class="s1">._reconsumeInState(</span><span class="s0">this</span><span class="s1">.returnState</span><span class="s0">, </span><span class="s1">cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Numeric character reference state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateNumericCharacterReference(cp) {</span>
        <span class="s0">this</span><span class="s1">.charRefCode = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(cp === CODE_POINTS.LATIN_SMALL_X || cp === CODE_POINTS.LATIN_CAPITAL_X) {</span>
            <span class="s0">this</span><span class="s1">.state = State.HEXADEMICAL_CHARACTER_REFERENCE_START</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s4">// Inlined decimal character reference start state</span>
        <span class="s0">else if </span><span class="s1">(isAsciiDigit(cp)) {</span>
            <span class="s0">this</span><span class="s1">.state = State.DECIMAL_CHARACTER_REFERENCE</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateDecimalCharacterReference(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._err(ERR.absenceOfDigitsInNumericCharacterReference)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._flushCodePointConsumedAsCharacterReference(CODE_POINTS.NUMBER_SIGN)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._reconsumeInState(</span><span class="s0">this</span><span class="s1">.returnState</span><span class="s0">, </span><span class="s1">cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Hexademical character reference start state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateHexademicalCharacterReferenceStart(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiHexDigit(cp)) {</span>
            <span class="s0">this</span><span class="s1">.state = State.HEXADEMICAL_CHARACTER_REFERENCE</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateHexademicalCharacterReference(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._err(ERR.absenceOfDigitsInNumericCharacterReference)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._flushCodePointConsumedAsCharacterReference(CODE_POINTS.NUMBER_SIGN)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._unconsume(</span><span class="s3">2</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = </span><span class="s0">this</span><span class="s1">.returnState</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Hexademical character reference state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateHexademicalCharacterReference(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiUpperHexDigit(cp)) {</span>
            <span class="s0">this</span><span class="s1">.charRefCode = </span><span class="s0">this</span><span class="s1">.charRefCode * </span><span class="s3">16 </span><span class="s1">+ cp - </span><span class="s3">0x37</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(isAsciiLowerHexDigit(cp)) {</span>
            <span class="s0">this</span><span class="s1">.charRefCode = </span><span class="s0">this</span><span class="s1">.charRefCode * </span><span class="s3">16 </span><span class="s1">+ cp - </span><span class="s3">0x57</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(isAsciiDigit(cp)) {</span>
            <span class="s0">this</span><span class="s1">.charRefCode = </span><span class="s0">this</span><span class="s1">.charRefCode * </span><span class="s3">16 </span><span class="s1">+ cp - </span><span class="s3">0x30</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(cp === CODE_POINTS.SEMICOLON) {</span>
            <span class="s0">this</span><span class="s1">.state = State.NUMERIC_CHARACTER_REFERENCE_END</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._err(ERR.missingSemicolonAfterCharacterReference)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.NUMERIC_CHARACTER_REFERENCE_END</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateNumericCharacterReferenceEnd(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Decimal character reference state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateDecimalCharacterReference(cp) {</span>
        <span class="s0">if </span><span class="s1">(isAsciiDigit(cp)) {</span>
            <span class="s0">this</span><span class="s1">.charRefCode = </span><span class="s0">this</span><span class="s1">.charRefCode * </span><span class="s3">10 </span><span class="s1">+ cp - </span><span class="s3">0x30</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(cp === CODE_POINTS.SEMICOLON) {</span>
            <span class="s0">this</span><span class="s1">.state = State.NUMERIC_CHARACTER_REFERENCE_END</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._err(ERR.missingSemicolonAfterCharacterReference)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.state = State.NUMERIC_CHARACTER_REFERENCE_END</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._stateNumericCharacterReferenceEnd(cp)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Numeric character reference end state</span>
    <span class="s4">//------------------------------------------------------------------</span>
    <span class="s1">_stateNumericCharacterReferenceEnd(cp) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.charRefCode === CODE_POINTS.NULL) {</span>
            <span class="s0">this</span><span class="s1">._err(ERR.nullCharacterReference)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.charRefCode = CODE_POINTS.REPLACEMENT_CHARACTER</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.charRefCode &gt; </span><span class="s3">1114111</span><span class="s1">) {</span>
            <span class="s0">this</span><span class="s1">._err(ERR.characterReferenceOutsideUnicodeRange)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.charRefCode = CODE_POINTS.REPLACEMENT_CHARACTER</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(isSurrogate(</span><span class="s0">this</span><span class="s1">.charRefCode)) {</span>
            <span class="s0">this</span><span class="s1">._err(ERR.surrogateCharacterReference)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.charRefCode = CODE_POINTS.REPLACEMENT_CHARACTER</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(isUndefinedCodePoint(</span><span class="s0">this</span><span class="s1">.charRefCode)) {</span>
            <span class="s0">this</span><span class="s1">._err(ERR.noncharacterCharacterReference)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(isControlCodePoint(</span><span class="s0">this</span><span class="s1">.charRefCode) || </span><span class="s0">this</span><span class="s1">.charRefCode === CODE_POINTS.CARRIAGE_RETURN) {</span>
            <span class="s0">this</span><span class="s1">._err(ERR.controlCharacterReference)</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">replacement = C1_CONTROLS_REFERENCE_REPLACEMENTS.get(</span><span class="s0">this</span><span class="s1">.charRefCode)</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(replacement !== undefined) {</span>
                <span class="s0">this</span><span class="s1">.charRefCode = replacement</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">._flushCodePointConsumedAsCharacterReference(</span><span class="s0">this</span><span class="s1">.charRefCode)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._reconsumeInState(</span><span class="s0">this</span><span class="s1">.returnState</span><span class="s0">, </span><span class="s1">cp)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s4">//Element utils</span>
<span class="s0">const </span><span class="s1">IMPLICIT_END_TAG_REQUIRED = </span><span class="s0">new </span><span class="s1">Set([TAG_ID.DD</span><span class="s0">, </span><span class="s1">TAG_ID.DT</span><span class="s0">, </span><span class="s1">TAG_ID.LI</span><span class="s0">, </span><span class="s1">TAG_ID.OPTGROUP</span><span class="s0">, </span><span class="s1">TAG_ID.OPTION</span><span class="s0">, </span><span class="s1">TAG_ID.P</span><span class="s0">, </span><span class="s1">TAG_ID.RB</span><span class="s0">, </span><span class="s1">TAG_ID.RP</span><span class="s0">, </span><span class="s1">TAG_ID.RT</span><span class="s0">, </span><span class="s1">TAG_ID.RTC])</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">IMPLICIT_END_TAG_REQUIRED_THOROUGHLY = </span><span class="s0">new </span><span class="s1">Set([</span>
    <span class="s1">...IMPLICIT_END_TAG_REQUIRED</span><span class="s0">,</span>
    <span class="s1">TAG_ID.CAPTION</span><span class="s0">,</span>
    <span class="s1">TAG_ID.COLGROUP</span><span class="s0">,</span>
    <span class="s1">TAG_ID.TBODY</span><span class="s0">,</span>
    <span class="s1">TAG_ID.TD</span><span class="s0">,</span>
    <span class="s1">TAG_ID.TFOOT</span><span class="s0">,</span>
    <span class="s1">TAG_ID.TH</span><span class="s0">,</span>
    <span class="s1">TAG_ID.THEAD</span><span class="s0">,</span>
    <span class="s1">TAG_ID.TR</span><span class="s0">,</span>
<span class="s1">])</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">SCOPING_ELEMENT_NS = </span><span class="s0">new </span><span class="s1">Map([</span>
    <span class="s1">[TAG_ID.APPLET</span><span class="s0">, </span><span class="s1">NS.HTML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.CAPTION</span><span class="s0">, </span><span class="s1">NS.HTML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.HTML</span><span class="s0">, </span><span class="s1">NS.HTML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.MARQUEE</span><span class="s0">, </span><span class="s1">NS.HTML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.OBJECT</span><span class="s0">, </span><span class="s1">NS.HTML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.TABLE</span><span class="s0">, </span><span class="s1">NS.HTML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.TD</span><span class="s0">, </span><span class="s1">NS.HTML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.TEMPLATE</span><span class="s0">, </span><span class="s1">NS.HTML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.TH</span><span class="s0">, </span><span class="s1">NS.HTML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.ANNOTATION_XML</span><span class="s0">, </span><span class="s1">NS.MATHML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.MI</span><span class="s0">, </span><span class="s1">NS.MATHML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.MN</span><span class="s0">, </span><span class="s1">NS.MATHML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.MO</span><span class="s0">, </span><span class="s1">NS.MATHML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.MS</span><span class="s0">, </span><span class="s1">NS.MATHML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.MTEXT</span><span class="s0">, </span><span class="s1">NS.MATHML]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.DESC</span><span class="s0">, </span><span class="s1">NS.SVG]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.FOREIGN_OBJECT</span><span class="s0">, </span><span class="s1">NS.SVG]</span><span class="s0">,</span>
    <span class="s1">[TAG_ID.TITLE</span><span class="s0">, </span><span class="s1">NS.SVG]</span><span class="s0">,</span>
<span class="s1">])</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">NAMED_HEADERS = [TAG_ID.H1</span><span class="s0">, </span><span class="s1">TAG_ID.H2</span><span class="s0">, </span><span class="s1">TAG_ID.H3</span><span class="s0">, </span><span class="s1">TAG_ID.H4</span><span class="s0">, </span><span class="s1">TAG_ID.H5</span><span class="s0">, </span><span class="s1">TAG_ID.H6]</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">TABLE_ROW_CONTEXT = [TAG_ID.TR</span><span class="s0">, </span><span class="s1">TAG_ID.TEMPLATE</span><span class="s0">, </span><span class="s1">TAG_ID.HTML]</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">TABLE_BODY_CONTEXT = [TAG_ID.TBODY</span><span class="s0">, </span><span class="s1">TAG_ID.TFOOT</span><span class="s0">, </span><span class="s1">TAG_ID.THEAD</span><span class="s0">, </span><span class="s1">TAG_ID.TEMPLATE</span><span class="s0">, </span><span class="s1">TAG_ID.HTML]</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">TABLE_CONTEXT = [TAG_ID.TABLE</span><span class="s0">, </span><span class="s1">TAG_ID.TEMPLATE</span><span class="s0">, </span><span class="s1">TAG_ID.HTML]</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">TABLE_CELLS = [TAG_ID.TD</span><span class="s0">, </span><span class="s1">TAG_ID.TH]</span><span class="s0">;</span>
<span class="s4">//Stack of open elements</span>
<span class="s0">class </span><span class="s1">OpenElementStack {</span>
    <span class="s1">get currentTmplContentOrNode() {</span>
        <span class="s0">return this</span><span class="s1">._isInTemplate() ? </span><span class="s0">this</span><span class="s1">.treeAdapter.getTemplateContent(</span><span class="s0">this</span><span class="s1">.current) : </span><span class="s0">this</span><span class="s1">.current</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">constructor(document</span><span class="s0">, </span><span class="s1">treeAdapter</span><span class="s0">, </span><span class="s1">handler) {</span>
        <span class="s0">this</span><span class="s1">.treeAdapter = treeAdapter</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.handler = handler</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.items = []</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.tagIDs = []</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.stackTop = -</span><span class="s3">1</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.tmplCount = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.currentTagId = TAG_ID.UNKNOWN</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.current = document</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Index of element</span>
    <span class="s1">_indexOf(element) {</span>
        <span class="s0">return this</span><span class="s1">.items.lastIndexOf(element</span><span class="s0">, this</span><span class="s1">.stackTop)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Update current element</span>
    <span class="s1">_isInTemplate() {</span>
        <span class="s0">return this</span><span class="s1">.currentTagId === TAG_ID.TEMPLATE &amp;&amp; </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.current) === NS.HTML</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_updateCurrentElement() {</span>
        <span class="s0">this</span><span class="s1">.current = </span><span class="s0">this</span><span class="s1">.items[</span><span class="s0">this</span><span class="s1">.stackTop]</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.currentTagId = </span><span class="s0">this</span><span class="s1">.tagIDs[</span><span class="s0">this</span><span class="s1">.stackTop]</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Mutations</span>
    <span class="s1">push(element</span><span class="s0">, </span><span class="s1">tagID) {</span>
        <span class="s0">this</span><span class="s1">.stackTop++</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.items[</span><span class="s0">this</span><span class="s1">.stackTop] = element</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.current = element</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.tagIDs[</span><span class="s0">this</span><span class="s1">.stackTop] = tagID</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.currentTagId = tagID</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">._isInTemplate()) {</span>
            <span class="s0">this</span><span class="s1">.tmplCount++</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.handler.onItemPush(element</span><span class="s0">, </span><span class="s1">tagID</span><span class="s0">, true</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">pop() {</span>
        <span class="s0">const </span><span class="s1">popped = </span><span class="s0">this</span><span class="s1">.current</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.tmplCount &gt; </span><span class="s3">0 </span><span class="s1">&amp;&amp; </span><span class="s0">this</span><span class="s1">._isInTemplate()) {</span>
            <span class="s0">this</span><span class="s1">.tmplCount--</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.stackTop--</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._updateCurrentElement()</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.handler.onItemPop(popped</span><span class="s0">, true</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">replace(oldElement</span><span class="s0">, </span><span class="s1">newElement) {</span>
        <span class="s0">const </span><span class="s1">idx = </span><span class="s0">this</span><span class="s1">._indexOf(oldElement)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.items[idx] = newElement</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(idx === </span><span class="s0">this</span><span class="s1">.stackTop) {</span>
            <span class="s0">this</span><span class="s1">.current = newElement</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">insertAfter(referenceElement</span><span class="s0">, </span><span class="s1">newElement</span><span class="s0">, </span><span class="s1">newElementID) {</span>
        <span class="s0">const </span><span class="s1">insertionIdx = </span><span class="s0">this</span><span class="s1">._indexOf(referenceElement) + </span><span class="s3">1</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.items.splice(insertionIdx</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s1">newElement)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.tagIDs.splice(insertionIdx</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s1">newElementID)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.stackTop++</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(insertionIdx === </span><span class="s0">this</span><span class="s1">.stackTop) {</span>
            <span class="s0">this</span><span class="s1">._updateCurrentElement()</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.handler.onItemPush(</span><span class="s0">this</span><span class="s1">.current</span><span class="s0">, this</span><span class="s1">.currentTagId</span><span class="s0">, </span><span class="s1">insertionIdx === </span><span class="s0">this</span><span class="s1">.stackTop)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">popUntilTagNamePopped(tagName) {</span>
        <span class="s0">let </span><span class="s1">targetIdx = </span><span class="s0">this</span><span class="s1">.stackTop + </span><span class="s3">1</span><span class="s0">;</span>
        <span class="s0">do </span><span class="s1">{</span>
            <span class="s1">targetIdx = </span><span class="s0">this</span><span class="s1">.tagIDs.lastIndexOf(tagName</span><span class="s0">, </span><span class="s1">targetIdx - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">} </span><span class="s0">while </span><span class="s1">(targetIdx &gt; </span><span class="s3">0 </span><span class="s1">&amp;&amp; </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.items[targetIdx]) !== NS.HTML)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.shortenToLength(targetIdx &lt; </span><span class="s3">0 </span><span class="s1">? </span><span class="s3">0 </span><span class="s1">: targetIdx)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">shortenToLength(idx) {</span>
        <span class="s0">while </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.stackTop &gt;= idx) {</span>
            <span class="s0">const </span><span class="s1">popped = </span><span class="s0">this</span><span class="s1">.current</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.tmplCount &gt; </span><span class="s3">0 </span><span class="s1">&amp;&amp; </span><span class="s0">this</span><span class="s1">._isInTemplate()) {</span>
                <span class="s0">this</span><span class="s1">.tmplCount -= </span><span class="s3">1</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">this</span><span class="s1">.stackTop--</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">._updateCurrentElement()</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.handler.onItemPop(popped</span><span class="s0">, this</span><span class="s1">.stackTop &lt; idx)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">popUntilElementPopped(element) {</span>
        <span class="s0">const </span><span class="s1">idx = </span><span class="s0">this</span><span class="s1">._indexOf(element)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.shortenToLength(idx &lt; </span><span class="s3">0 </span><span class="s1">? </span><span class="s3">0 </span><span class="s1">: idx)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">popUntilPopped(tagNames</span><span class="s0">, </span><span class="s1">targetNS) {</span>
        <span class="s0">const </span><span class="s1">idx = </span><span class="s0">this</span><span class="s1">._indexOfTagNames(tagNames</span><span class="s0">, </span><span class="s1">targetNS)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.shortenToLength(idx &lt; </span><span class="s3">0 </span><span class="s1">? </span><span class="s3">0 </span><span class="s1">: idx)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">popUntilNumberedHeaderPopped() {</span>
        <span class="s0">this</span><span class="s1">.popUntilPopped(NAMED_HEADERS</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">popUntilTableCellPopped() {</span>
        <span class="s0">this</span><span class="s1">.popUntilPopped(TABLE_CELLS</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">popAllUpToHtmlElement() {</span>
        <span class="s4">//NOTE: here we assume that the root &lt;html&gt; element is always first in the open element stack, so</span>
        <span class="s4">//we perform this fast stack clean up.</span>
        <span class="s0">this</span><span class="s1">.tmplCount = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.shortenToLength(</span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_indexOfTagNames(tagNames</span><span class="s0">, </span><span class="s1">namespace) {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s0">this</span><span class="s1">.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s0">if </span><span class="s1">(tagNames.includes(</span><span class="s0">this</span><span class="s1">.tagIDs[i]) &amp;&amp; </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.items[i]) === namespace) {</span>
                <span class="s0">return </span><span class="s1">i</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return </span><span class="s1">-</span><span class="s3">1</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">clearBackTo(tagNames</span><span class="s0">, </span><span class="s1">targetNS) {</span>
        <span class="s0">const </span><span class="s1">idx = </span><span class="s0">this</span><span class="s1">._indexOfTagNames(tagNames</span><span class="s0">, </span><span class="s1">targetNS)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.shortenToLength(idx + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">clearBackToTableContext() {</span>
        <span class="s0">this</span><span class="s1">.clearBackTo(TABLE_CONTEXT</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">clearBackToTableBodyContext() {</span>
        <span class="s0">this</span><span class="s1">.clearBackTo(TABLE_BODY_CONTEXT</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">clearBackToTableRowContext() {</span>
        <span class="s0">this</span><span class="s1">.clearBackTo(TABLE_ROW_CONTEXT</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">remove(element) {</span>
        <span class="s0">const </span><span class="s1">idx = </span><span class="s0">this</span><span class="s1">._indexOf(element)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(idx &gt;= </span><span class="s3">0</span><span class="s1">) {</span>
            <span class="s0">if </span><span class="s1">(idx === </span><span class="s0">this</span><span class="s1">.stackTop) {</span>
                <span class="s0">this</span><span class="s1">.pop()</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">else </span><span class="s1">{</span>
                <span class="s0">this</span><span class="s1">.items.splice(idx</span><span class="s0">, </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.tagIDs.splice(idx</span><span class="s0">, </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.stackTop--</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._updateCurrentElement()</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">.handler.onItemPop(element</span><span class="s0">, false</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">//Search</span>
    <span class="s1">tryPeekProperlyNestedBodyElement() {</span>
        <span class="s4">//Properly nested &lt;body&gt; element (should be second element in stack).</span>
        <span class="s0">return this</span><span class="s1">.stackTop &gt;= </span><span class="s3">1 </span><span class="s1">&amp;&amp; </span><span class="s0">this</span><span class="s1">.tagIDs[</span><span class="s3">1</span><span class="s1">] === TAG_ID.BODY ? </span><span class="s0">this</span><span class="s1">.items[</span><span class="s3">1</span><span class="s1">] : </span><span class="s0">null;</span>
    <span class="s1">}</span>
    <span class="s1">contains(element) {</span>
        <span class="s0">return this</span><span class="s1">._indexOf(element) &gt; -</span><span class="s3">1</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">getCommonAncestor(element) {</span>
        <span class="s0">const </span><span class="s1">elementIdx = </span><span class="s0">this</span><span class="s1">._indexOf(element) - </span><span class="s3">1</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">elementIdx &gt;= </span><span class="s3">0 </span><span class="s1">? </span><span class="s0">this</span><span class="s1">.items[elementIdx] : </span><span class="s0">null;</span>
    <span class="s1">}</span>
    <span class="s1">isRootHtmlElementCurrent() {</span>
        <span class="s0">return this</span><span class="s1">.stackTop === </span><span class="s3">0 </span><span class="s1">&amp;&amp; </span><span class="s0">this</span><span class="s1">.tagIDs[</span><span class="s3">0</span><span class="s1">] === TAG_ID.HTML</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Element in scope</span>
    <span class="s1">hasInScope(tagName) {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s0">this</span><span class="s1">.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s0">const </span><span class="s1">tn = </span><span class="s0">this</span><span class="s1">.tagIDs[i]</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">ns = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.items[i])</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(tn === tagName &amp;&amp; ns === NS.HTML) {</span>
                <span class="s0">return true;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(SCOPING_ELEMENT_NS.get(tn) === ns) {</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return true;</span>
    <span class="s1">}</span>
    <span class="s1">hasNumberedHeaderInScope() {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s0">this</span><span class="s1">.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s0">const </span><span class="s1">tn = </span><span class="s0">this</span><span class="s1">.tagIDs[i]</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">ns = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.items[i])</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(isNumberedHeader(tn) &amp;&amp; ns === NS.HTML) {</span>
                <span class="s0">return true;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(SCOPING_ELEMENT_NS.get(tn) === ns) {</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return true;</span>
    <span class="s1">}</span>
    <span class="s1">hasInListItemScope(tagName) {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s0">this</span><span class="s1">.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s0">const </span><span class="s1">tn = </span><span class="s0">this</span><span class="s1">.tagIDs[i]</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">ns = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.items[i])</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(tn === tagName &amp;&amp; ns === NS.HTML) {</span>
                <span class="s0">return true;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(((tn === TAG_ID.UL || tn === TAG_ID.OL) &amp;&amp; ns === NS.HTML) || SCOPING_ELEMENT_NS.get(tn) === ns) {</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return true;</span>
    <span class="s1">}</span>
    <span class="s1">hasInButtonScope(tagName) {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s0">this</span><span class="s1">.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s0">const </span><span class="s1">tn = </span><span class="s0">this</span><span class="s1">.tagIDs[i]</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">ns = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.items[i])</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(tn === tagName &amp;&amp; ns === NS.HTML) {</span>
                <span class="s0">return true;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">((tn === TAG_ID.BUTTON &amp;&amp; ns === NS.HTML) || SCOPING_ELEMENT_NS.get(tn) === ns) {</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return true;</span>
    <span class="s1">}</span>
    <span class="s1">hasInTableScope(tagName) {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s0">this</span><span class="s1">.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s0">const </span><span class="s1">tn = </span><span class="s0">this</span><span class="s1">.tagIDs[i]</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">ns = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.items[i])</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(ns !== NS.HTML) {</span>
                <span class="s0">continue;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(tn === tagName) {</span>
                <span class="s0">return true;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(tn === TAG_ID.TABLE || tn === TAG_ID.TEMPLATE || tn === TAG_ID.HTML) {</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return true;</span>
    <span class="s1">}</span>
    <span class="s1">hasTableBodyContextInTableScope() {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s0">this</span><span class="s1">.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s0">const </span><span class="s1">tn = </span><span class="s0">this</span><span class="s1">.tagIDs[i]</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">ns = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.items[i])</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(ns !== NS.HTML) {</span>
                <span class="s0">continue;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(tn === TAG_ID.TBODY || tn === TAG_ID.THEAD || tn === TAG_ID.TFOOT) {</span>
                <span class="s0">return true;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(tn === TAG_ID.TABLE || tn === TAG_ID.HTML) {</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return true;</span>
    <span class="s1">}</span>
    <span class="s1">hasInSelectScope(tagName) {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s0">this</span><span class="s1">.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s0">const </span><span class="s1">tn = </span><span class="s0">this</span><span class="s1">.tagIDs[i]</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">ns = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.items[i])</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(ns !== NS.HTML) {</span>
                <span class="s0">continue;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(tn === tagName) {</span>
                <span class="s0">return true;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(tn !== TAG_ID.OPTION &amp;&amp; tn !== TAG_ID.OPTGROUP) {</span>
                <span class="s0">return false;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return true;</span>
    <span class="s1">}</span>
    <span class="s4">//Implied end tags</span>
    <span class="s1">generateImpliedEndTags() {</span>
        <span class="s0">while </span><span class="s1">(IMPLICIT_END_TAG_REQUIRED.has(</span><span class="s0">this</span><span class="s1">.currentTagId)) {</span>
            <span class="s0">this</span><span class="s1">.pop()</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">generateImpliedEndTagsThoroughly() {</span>
        <span class="s0">while </span><span class="s1">(IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(</span><span class="s0">this</span><span class="s1">.currentTagId)) {</span>
            <span class="s0">this</span><span class="s1">.pop()</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">generateImpliedEndTagsWithExclusion(exclusionId) {</span>
        <span class="s0">while </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.currentTagId !== exclusionId &amp;&amp; IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(</span><span class="s0">this</span><span class="s1">.currentTagId)) {</span>
            <span class="s0">this</span><span class="s1">.pop()</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s4">//Const</span>
<span class="s0">const </span><span class="s1">NOAH_ARK_CAPACITY = </span><span class="s3">3</span><span class="s0">;</span>
<span class="s0">var </span><span class="s1">EntryType</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(EntryType) {</span>
    <span class="s1">EntryType[EntryType[</span><span class="s2">&quot;Marker&quot;</span><span class="s1">] = </span><span class="s3">0</span><span class="s1">] = </span><span class="s2">&quot;Marker&quot;</span><span class="s0">;</span>
    <span class="s1">EntryType[EntryType[</span><span class="s2">&quot;Element&quot;</span><span class="s1">] = </span><span class="s3">1</span><span class="s1">] = </span><span class="s2">&quot;Element&quot;</span><span class="s0">;</span>
<span class="s1">})(EntryType = EntryType || (EntryType = {}))</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">MARKER = { type: EntryType.Marker }</span><span class="s0">;</span>
<span class="s4">//List of formatting elements</span>
<span class="s0">class </span><span class="s1">FormattingElementList {</span>
    <span class="s1">constructor(treeAdapter) {</span>
        <span class="s0">this</span><span class="s1">.treeAdapter = treeAdapter</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.entries = []</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.bookmark = </span><span class="s0">null;</span>
    <span class="s1">}</span>
    <span class="s4">//Noah Ark's condition</span>
    <span class="s4">//OPTIMIZATION: at first we try to find possible candidates for exclusion using</span>
    <span class="s4">//lightweight heuristics without thorough attributes check.</span>
    <span class="s1">_getNoahArkConditionCandidates(newElement</span><span class="s0">, </span><span class="s1">neAttrs) {</span>
        <span class="s0">const </span><span class="s1">candidates = []</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">neAttrsLength = neAttrs.length</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">neTagName = </span><span class="s0">this</span><span class="s1">.treeAdapter.getTagName(newElement)</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">neNamespaceURI = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(newElement)</span><span class="s0">;</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; </span><span class="s0">this</span><span class="s1">.entries.length</span><span class="s0">; </span><span class="s1">i++) {</span>
            <span class="s0">const </span><span class="s1">entry = </span><span class="s0">this</span><span class="s1">.entries[i]</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(entry.type === EntryType.Marker) {</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">const </span><span class="s1">{ element } = entry</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.treeAdapter.getTagName(element) === neTagName &amp;&amp;</span>
                <span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(element) === neNamespaceURI) {</span>
                <span class="s0">const </span><span class="s1">elementAttrs = </span><span class="s0">this</span><span class="s1">.treeAdapter.getAttrList(element)</span><span class="s0">;</span>
                <span class="s0">if </span><span class="s1">(elementAttrs.length === neAttrsLength) {</span>
                    <span class="s1">candidates.push({ idx: i</span><span class="s0">, </span><span class="s1">attrs: elementAttrs })</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return </span><span class="s1">candidates</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_ensureNoahArkCondition(newElement) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.entries.length &lt; NOAH_ARK_CAPACITY)</span>
            <span class="s0">return;</span>
        <span class="s0">const </span><span class="s1">neAttrs = </span><span class="s0">this</span><span class="s1">.treeAdapter.getAttrList(newElement)</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">candidates = </span><span class="s0">this</span><span class="s1">._getNoahArkConditionCandidates(newElement</span><span class="s0">, </span><span class="s1">neAttrs)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(candidates.length &lt; NOAH_ARK_CAPACITY)</span>
            <span class="s0">return;</span>
        <span class="s4">//NOTE: build attrs map for the new element, so we can perform fast lookups</span>
        <span class="s0">const </span><span class="s1">neAttrsMap = </span><span class="s0">new </span><span class="s1">Map(neAttrs.map((neAttr) =&gt; [neAttr.name</span><span class="s0">, </span><span class="s1">neAttr.value]))</span><span class="s0">;</span>
        <span class="s0">let </span><span class="s1">validCandidates = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s4">//NOTE: remove bottommost candidates, until Noah's Ark condition will not be met</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; candidates.length</span><span class="s0">; </span><span class="s1">i++) {</span>
            <span class="s0">const </span><span class="s1">candidate = candidates[i]</span><span class="s0">;</span>
            <span class="s4">// We know that `candidate.attrs.length === neAttrs.length`</span>
            <span class="s0">if </span><span class="s1">(candidate.attrs.every((cAttr) =&gt; neAttrsMap.get(cAttr.name) === cAttr.value)) {</span>
                <span class="s1">validCandidates += </span><span class="s3">1</span><span class="s0">;</span>
                <span class="s0">if </span><span class="s1">(validCandidates &gt;= NOAH_ARK_CAPACITY) {</span>
                    <span class="s0">this</span><span class="s1">.entries.splice(candidate.idx</span><span class="s0">, </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">//Mutations</span>
    <span class="s1">insertMarker() {</span>
        <span class="s0">this</span><span class="s1">.entries.unshift(MARKER)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">pushElement(element</span><span class="s0">, </span><span class="s1">token) {</span>
        <span class="s0">this</span><span class="s1">._ensureNoahArkCondition(element)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.entries.unshift({</span>
            <span class="s1">type: EntryType.Element</span><span class="s0">,</span>
            <span class="s1">element</span><span class="s0">,</span>
            <span class="s1">token</span><span class="s0">,</span>
        <span class="s1">})</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">insertElementAfterBookmark(element</span><span class="s0">, </span><span class="s1">token) {</span>
        <span class="s0">const </span><span class="s1">bookmarkIdx = </span><span class="s0">this</span><span class="s1">.entries.indexOf(</span><span class="s0">this</span><span class="s1">.bookmark)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.entries.splice(bookmarkIdx</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s1">{</span>
            <span class="s1">type: EntryType.Element</span><span class="s0">,</span>
            <span class="s1">element</span><span class="s0">,</span>
            <span class="s1">token</span><span class="s0">,</span>
        <span class="s1">})</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">removeEntry(entry) {</span>
        <span class="s0">const </span><span class="s1">entryIndex = </span><span class="s0">this</span><span class="s1">.entries.indexOf(entry)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(entryIndex &gt;= </span><span class="s3">0</span><span class="s1">) {</span>
            <span class="s0">this</span><span class="s1">.entries.splice(entryIndex</span><span class="s0">, </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s5">/**</span>
     <span class="s5">* Clears the list of formatting elements up to the last marker.</span>
     <span class="s5">*</span>
     <span class="s5">* </span><span class="s6">@see </span><span class="s5">https://html.spec.whatwg.org/multipage/parsing.html#clear-the-list-of-active-formatting-elements-up-to-the-last-marker</span>
     <span class="s5">*/</span>
    <span class="s1">clearToLastMarker() {</span>
        <span class="s0">const </span><span class="s1">markerIdx = </span><span class="s0">this</span><span class="s1">.entries.indexOf(MARKER)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(markerIdx &gt;= </span><span class="s3">0</span><span class="s1">) {</span>
            <span class="s0">this</span><span class="s1">.entries.splice(</span><span class="s3">0</span><span class="s0">, </span><span class="s1">markerIdx + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">.entries.length = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">//Search</span>
    <span class="s1">getElementEntryInScopeWithTagName(tagName) {</span>
        <span class="s0">const </span><span class="s1">entry = </span><span class="s0">this</span><span class="s1">.entries.find((entry) =&gt; entry.type === EntryType.Marker || </span><span class="s0">this</span><span class="s1">.treeAdapter.getTagName(entry.element) === tagName)</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">entry &amp;&amp; entry.type === EntryType.Element ? entry : </span><span class="s0">null;</span>
    <span class="s1">}</span>
    <span class="s1">getElementEntry(element) {</span>
        <span class="s0">return this</span><span class="s1">.entries.find((entry) =&gt; entry.type === EntryType.Element &amp;&amp; entry.element === element)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s0">function </span><span class="s1">createTextNode(value) {</span>
    <span class="s0">return </span><span class="s1">{</span>
        <span class="s1">nodeName: </span><span class="s2">'#text'</span><span class="s0">,</span>
        <span class="s1">value</span><span class="s0">,</span>
        <span class="s1">parentNode: </span><span class="s0">null,</span>
    <span class="s1">}</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">const </span><span class="s1">defaultTreeAdapter = {</span>
    <span class="s4">//Node construction</span>
    <span class="s1">createDocument() {</span>
        <span class="s0">return </span><span class="s1">{</span>
            <span class="s1">nodeName: </span><span class="s2">'#document'</span><span class="s0">,</span>
            <span class="s1">mode: DOCUMENT_MODE.NO_QUIRKS</span><span class="s0">,</span>
            <span class="s1">childNodes: []</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">createDocumentFragment() {</span>
        <span class="s0">return </span><span class="s1">{</span>
            <span class="s1">nodeName: </span><span class="s2">'#document-fragment'</span><span class="s0">,</span>
            <span class="s1">childNodes: []</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">createElement(tagName</span><span class="s0">, </span><span class="s1">namespaceURI</span><span class="s0">, </span><span class="s1">attrs) {</span>
        <span class="s0">return </span><span class="s1">{</span>
            <span class="s1">nodeName: tagName</span><span class="s0">,</span>
            <span class="s1">tagName</span><span class="s0">,</span>
            <span class="s1">attrs</span><span class="s0">,</span>
            <span class="s1">namespaceURI</span><span class="s0">,</span>
            <span class="s1">childNodes: []</span><span class="s0">,</span>
            <span class="s1">parentNode: </span><span class="s0">null,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">createCommentNode(data) {</span>
        <span class="s0">return </span><span class="s1">{</span>
            <span class="s1">nodeName: </span><span class="s2">'#comment'</span><span class="s0">,</span>
            <span class="s1">data</span><span class="s0">,</span>
            <span class="s1">parentNode: </span><span class="s0">null,</span>
        <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s4">//Tree mutation</span>
    <span class="s1">appendChild(parentNode</span><span class="s0">, </span><span class="s1">newNode) {</span>
        <span class="s1">parentNode.childNodes.push(newNode)</span><span class="s0">;</span>
        <span class="s1">newNode.parentNode = parentNode</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">insertBefore(parentNode</span><span class="s0">, </span><span class="s1">newNode</span><span class="s0">, </span><span class="s1">referenceNode) {</span>
        <span class="s0">const </span><span class="s1">insertionIdx = parentNode.childNodes.indexOf(referenceNode)</span><span class="s0">;</span>
        <span class="s1">parentNode.childNodes.splice(insertionIdx</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s1">newNode)</span><span class="s0">;</span>
        <span class="s1">newNode.parentNode = parentNode</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">setTemplateContent(templateElement</span><span class="s0">, </span><span class="s1">contentElement) {</span>
        <span class="s1">templateElement.content = contentElement</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getTemplateContent(templateElement) {</span>
        <span class="s0">return </span><span class="s1">templateElement.content</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">setDocumentType(document</span><span class="s0">, </span><span class="s1">name</span><span class="s0">, </span><span class="s1">publicId</span><span class="s0">, </span><span class="s1">systemId) {</span>
        <span class="s0">const </span><span class="s1">doctypeNode = document.childNodes.find((node) =&gt; node.nodeName === </span><span class="s2">'#documentType'</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(doctypeNode) {</span>
            <span class="s1">doctypeNode.name = name</span><span class="s0">;</span>
            <span class="s1">doctypeNode.publicId = publicId</span><span class="s0">;</span>
            <span class="s1">doctypeNode.systemId = systemId</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">const </span><span class="s1">node = {</span>
                <span class="s1">nodeName: </span><span class="s2">'#documentType'</span><span class="s0">,</span>
                <span class="s1">name</span><span class="s0">,</span>
                <span class="s1">publicId</span><span class="s0">,</span>
                <span class="s1">systemId</span><span class="s0">,</span>
                <span class="s1">parentNode: </span><span class="s0">null,</span>
            <span class="s1">}</span><span class="s0">;</span>
            <span class="s1">defaultTreeAdapter.appendChild(document</span><span class="s0">, </span><span class="s1">node)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">setDocumentMode(document</span><span class="s0">, </span><span class="s1">mode) {</span>
        <span class="s1">document.mode = mode</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getDocumentMode(document) {</span>
        <span class="s0">return </span><span class="s1">document.mode</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">detachNode(node) {</span>
        <span class="s0">if </span><span class="s1">(node.parentNode) {</span>
            <span class="s0">const </span><span class="s1">idx = node.parentNode.childNodes.indexOf(node)</span><span class="s0">;</span>
            <span class="s1">node.parentNode.childNodes.splice(idx</span><span class="s0">, </span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">node.parentNode = </span><span class="s0">null;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">insertText(parentNode</span><span class="s0">, </span><span class="s1">text) {</span>
        <span class="s0">if </span><span class="s1">(parentNode.childNodes.length &gt; </span><span class="s3">0</span><span class="s1">) {</span>
            <span class="s0">const </span><span class="s1">prevNode = parentNode.childNodes[parentNode.childNodes.length - </span><span class="s3">1</span><span class="s1">]</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(defaultTreeAdapter.isTextNode(prevNode)) {</span>
                <span class="s1">prevNode.value += text</span><span class="s0">;</span>
                <span class="s0">return;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s1">defaultTreeAdapter.appendChild(parentNode</span><span class="s0">, </span><span class="s1">createTextNode(text))</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">insertTextBefore(parentNode</span><span class="s0">, </span><span class="s1">text</span><span class="s0">, </span><span class="s1">referenceNode) {</span>
        <span class="s0">const </span><span class="s1">prevNode = parentNode.childNodes[parentNode.childNodes.indexOf(referenceNode) - </span><span class="s3">1</span><span class="s1">]</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(prevNode &amp;&amp; defaultTreeAdapter.isTextNode(prevNode)) {</span>
            <span class="s1">prevNode.value += text</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s1">defaultTreeAdapter.insertBefore(parentNode</span><span class="s0">, </span><span class="s1">createTextNode(text)</span><span class="s0">, </span><span class="s1">referenceNode)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">adoptAttributes(recipient</span><span class="s0">, </span><span class="s1">attrs) {</span>
        <span class="s0">const </span><span class="s1">recipientAttrsMap = </span><span class="s0">new </span><span class="s1">Set(recipient.attrs.map((attr) =&gt; attr.name))</span><span class="s0">;</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">j = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">j &lt; attrs.length</span><span class="s0">; </span><span class="s1">j++) {</span>
            <span class="s0">if </span><span class="s1">(!recipientAttrsMap.has(attrs[j].name)) {</span>
                <span class="s1">recipient.attrs.push(attrs[j])</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s4">//Tree traversing</span>
    <span class="s1">getFirstChild(node) {</span>
        <span class="s0">return </span><span class="s1">node.childNodes[</span><span class="s3">0</span><span class="s1">]</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getChildNodes(node) {</span>
        <span class="s0">return </span><span class="s1">node.childNodes</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getParentNode(node) {</span>
        <span class="s0">return </span><span class="s1">node.parentNode</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getAttrList(element) {</span>
        <span class="s0">return </span><span class="s1">element.attrs</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s4">//Node data</span>
    <span class="s1">getTagName(element) {</span>
        <span class="s0">return </span><span class="s1">element.tagName</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getNamespaceURI(element) {</span>
        <span class="s0">return </span><span class="s1">element.namespaceURI</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getTextNodeContent(textNode) {</span>
        <span class="s0">return </span><span class="s1">textNode.value</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getCommentNodeContent(commentNode) {</span>
        <span class="s0">return </span><span class="s1">commentNode.data</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getDocumentTypeNodeName(doctypeNode) {</span>
        <span class="s0">return </span><span class="s1">doctypeNode.name</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getDocumentTypeNodePublicId(doctypeNode) {</span>
        <span class="s0">return </span><span class="s1">doctypeNode.publicId</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getDocumentTypeNodeSystemId(doctypeNode) {</span>
        <span class="s0">return </span><span class="s1">doctypeNode.systemId</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s4">//Node types</span>
    <span class="s1">isTextNode(node) {</span>
        <span class="s0">return </span><span class="s1">node.nodeName === </span><span class="s2">'#text'</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">isCommentNode(node) {</span>
        <span class="s0">return </span><span class="s1">node.nodeName === </span><span class="s2">'#comment'</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">isDocumentTypeNode(node) {</span>
        <span class="s0">return </span><span class="s1">node.nodeName === </span><span class="s2">'#documentType'</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">isElementNode(node) {</span>
        <span class="s0">return </span><span class="s1">Object.prototype.hasOwnProperty.call(node</span><span class="s0">, </span><span class="s2">'tagName'</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s4">// Source code location</span>
    <span class="s1">setNodeSourceCodeLocation(node</span><span class="s0">, </span><span class="s1">location) {</span>
        <span class="s1">node.sourceCodeLocation = location</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">getNodeSourceCodeLocation(node) {</span>
        <span class="s0">return </span><span class="s1">node.sourceCodeLocation</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
    <span class="s1">updateNodeSourceCodeLocation(node</span><span class="s0">, </span><span class="s1">endLocation) {</span>
        <span class="s1">node.sourceCodeLocation = { ...node.sourceCodeLocation</span><span class="s0">, </span><span class="s1">...endLocation }</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">,</span>
<span class="s1">}</span><span class="s0">;</span>

<span class="s4">//Const</span>
<span class="s0">const </span><span class="s1">VALID_DOCTYPE_NAME = </span><span class="s2">'html'</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">VALID_SYSTEM_ID = </span><span class="s2">'about:legacy-compat'</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">QUIRKS_MODE_SYSTEM_ID = </span><span class="s2">'http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd'</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">QUIRKS_MODE_PUBLIC_ID_PREFIXES = [</span>
    <span class="s2">'+//silmaril//dtd html pro v0r11 19970101//'</span><span class="s0">,</span>
    <span class="s2">'-//as//dtd html 3.0 aswedit + extensions//'</span><span class="s0">,</span>
    <span class="s2">'-//advasoft ltd//dtd html 3.0 aswedit + extensions//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 2.0 level 1//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 2.0 level 2//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 2.0 strict level 1//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 2.0 strict level 2//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 2.0 strict//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 2.0//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 2.1e//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 3.0//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 3.2 final//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 3.2//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html 3//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html level 0//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html level 1//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html level 2//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html level 3//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html strict level 0//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html strict level 1//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html strict level 2//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html strict level 3//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html strict//'</span><span class="s0">,</span>
    <span class="s2">'-//ietf//dtd html//'</span><span class="s0">,</span>
    <span class="s2">'-//metrius//dtd metrius presentational//'</span><span class="s0">,</span>
    <span class="s2">'-//microsoft//dtd internet explorer 2.0 html strict//'</span><span class="s0">,</span>
    <span class="s2">'-//microsoft//dtd internet explorer 2.0 html//'</span><span class="s0">,</span>
    <span class="s2">'-//microsoft//dtd internet explorer 2.0 tables//'</span><span class="s0">,</span>
    <span class="s2">'-//microsoft//dtd internet explorer 3.0 html strict//'</span><span class="s0">,</span>
    <span class="s2">'-//microsoft//dtd internet explorer 3.0 html//'</span><span class="s0">,</span>
    <span class="s2">'-//microsoft//dtd internet explorer 3.0 tables//'</span><span class="s0">,</span>
    <span class="s2">'-//netscape comm. corp.//dtd html//'</span><span class="s0">,</span>
    <span class="s2">'-//netscape comm. corp.//dtd strict html//'</span><span class="s0">,</span>
    <span class="s2">&quot;-//o'reilly and associates//dtd html 2.0//&quot;</span><span class="s0">,</span>
    <span class="s2">&quot;-//o'reilly and associates//dtd html extended 1.0//&quot;</span><span class="s0">,</span>
    <span class="s2">&quot;-//o'reilly and associates//dtd html extended relaxed 1.0//&quot;</span><span class="s0">,</span>
    <span class="s2">'-//sq//dtd html 2.0 hotmetal + extensions//'</span><span class="s0">,</span>
    <span class="s2">'-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//'</span><span class="s0">,</span>
    <span class="s2">'-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//'</span><span class="s0">,</span>
    <span class="s2">'-//spyglass//dtd html 2.0 extended//'</span><span class="s0">,</span>
    <span class="s2">'-//sun microsystems corp.//dtd hotjava html//'</span><span class="s0">,</span>
    <span class="s2">'-//sun microsystems corp.//dtd hotjava strict html//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 3 1995-03-24//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 3.2 draft//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 3.2 final//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 3.2//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 3.2s draft//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 4.0 frameset//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 4.0 transitional//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html experimental 19960712//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html experimental 970421//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd w3 html//'</span><span class="s0">,</span>
    <span class="s2">'-//w3o//dtd w3 html 3.0//'</span><span class="s0">,</span>
    <span class="s2">'-//webtechs//dtd mozilla html 2.0//'</span><span class="s0">,</span>
    <span class="s2">'-//webtechs//dtd mozilla html//'</span><span class="s0">,</span>
<span class="s1">]</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES = [</span>
    <span class="s1">...QUIRKS_MODE_PUBLIC_ID_PREFIXES</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 4.01 frameset//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 4.01 transitional//'</span><span class="s0">,</span>
<span class="s1">]</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">QUIRKS_MODE_PUBLIC_IDS = </span><span class="s0">new </span><span class="s1">Set([</span>
    <span class="s2">'-//w3o//dtd w3 html strict 3.0//en//'</span><span class="s0">,</span>
    <span class="s2">'-/w3c/dtd html 4.0 transitional/en'</span><span class="s0">,</span>
    <span class="s2">'html'</span><span class="s0">,</span>
<span class="s1">])</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">LIMITED_QUIRKS_PUBLIC_ID_PREFIXES = [</span><span class="s2">'-//w3c//dtd xhtml 1.0 frameset//'</span><span class="s0">, </span><span class="s2">'-//w3c//dtd xhtml 1.0 transitional//'</span><span class="s1">]</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES = [</span>
    <span class="s1">...LIMITED_QUIRKS_PUBLIC_ID_PREFIXES</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 4.01 frameset//'</span><span class="s0">,</span>
    <span class="s2">'-//w3c//dtd html 4.01 transitional//'</span><span class="s0">,</span>
<span class="s1">]</span><span class="s0">;</span>
<span class="s4">//Utils</span>
<span class="s0">function </span><span class="s1">hasPrefix(publicId</span><span class="s0">, </span><span class="s1">prefixes) {</span>
    <span class="s0">return </span><span class="s1">prefixes.some((prefix) =&gt; publicId.startsWith(prefix))</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">//API</span>
<span class="s0">function </span><span class="s1">isConforming(token) {</span>
    <span class="s0">return </span><span class="s1">(token.name === VALID_DOCTYPE_NAME &amp;&amp;</span>
        <span class="s1">token.publicId === </span><span class="s0">null </span><span class="s1">&amp;&amp;</span>
        <span class="s1">(token.systemId === </span><span class="s0">null </span><span class="s1">|| token.systemId === VALID_SYSTEM_ID))</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">getDocumentMode(token) {</span>
    <span class="s0">if </span><span class="s1">(token.name !== VALID_DOCTYPE_NAME) {</span>
        <span class="s0">return </span><span class="s1">DOCUMENT_MODE.QUIRKS</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">const </span><span class="s1">{ systemId } = token</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(systemId &amp;&amp; systemId.toLowerCase() === QUIRKS_MODE_SYSTEM_ID) {</span>
        <span class="s0">return </span><span class="s1">DOCUMENT_MODE.QUIRKS</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">let </span><span class="s1">{ publicId } = token</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(publicId !== </span><span class="s0">null</span><span class="s1">) {</span>
        <span class="s1">publicId = publicId.toLowerCase()</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(QUIRKS_MODE_PUBLIC_IDS.has(publicId)) {</span>
            <span class="s0">return </span><span class="s1">DOCUMENT_MODE.QUIRKS</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">let </span><span class="s1">prefixes = systemId === </span><span class="s0">null </span><span class="s1">? QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES : QUIRKS_MODE_PUBLIC_ID_PREFIXES</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(hasPrefix(publicId</span><span class="s0">, </span><span class="s1">prefixes)) {</span>
            <span class="s0">return </span><span class="s1">DOCUMENT_MODE.QUIRKS</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">prefixes =</span>
            <span class="s1">systemId === </span><span class="s0">null </span><span class="s1">? LIMITED_QUIRKS_PUBLIC_ID_PREFIXES : LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(hasPrefix(publicId</span><span class="s0">, </span><span class="s1">prefixes)) {</span>
            <span class="s0">return </span><span class="s1">DOCUMENT_MODE.LIMITED_QUIRKS</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">return </span><span class="s1">DOCUMENT_MODE.NO_QUIRKS</span><span class="s0">;</span>
<span class="s1">}</span>

<span class="s4">//MIME types</span>
<span class="s0">const </span><span class="s1">MIME_TYPES = {</span>
    <span class="s1">TEXT_HTML: </span><span class="s2">'text/html'</span><span class="s0">,</span>
    <span class="s1">APPLICATION_XML: </span><span class="s2">'application/xhtml+xml'</span><span class="s0">,</span>
<span class="s1">}</span><span class="s0">;</span>
<span class="s4">//Attributes</span>
<span class="s0">const </span><span class="s1">DEFINITION_URL_ATTR = </span><span class="s2">'definitionurl'</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">ADJUSTED_DEFINITION_URL_ATTR = </span><span class="s2">'definitionURL'</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">SVG_ATTRS_ADJUSTMENT_MAP = </span><span class="s0">new </span><span class="s1">Map([</span>
    <span class="s2">'attributeName'</span><span class="s0">,</span>
    <span class="s2">'attributeType'</span><span class="s0">,</span>
    <span class="s2">'baseFrequency'</span><span class="s0">,</span>
    <span class="s2">'baseProfile'</span><span class="s0">,</span>
    <span class="s2">'calcMode'</span><span class="s0">,</span>
    <span class="s2">'clipPathUnits'</span><span class="s0">,</span>
    <span class="s2">'diffuseConstant'</span><span class="s0">,</span>
    <span class="s2">'edgeMode'</span><span class="s0">,</span>
    <span class="s2">'filterUnits'</span><span class="s0">,</span>
    <span class="s2">'glyphRef'</span><span class="s0">,</span>
    <span class="s2">'gradientTransform'</span><span class="s0">,</span>
    <span class="s2">'gradientUnits'</span><span class="s0">,</span>
    <span class="s2">'kernelMatrix'</span><span class="s0">,</span>
    <span class="s2">'kernelUnitLength'</span><span class="s0">,</span>
    <span class="s2">'keyPoints'</span><span class="s0">,</span>
    <span class="s2">'keySplines'</span><span class="s0">,</span>
    <span class="s2">'keyTimes'</span><span class="s0">,</span>
    <span class="s2">'lengthAdjust'</span><span class="s0">,</span>
    <span class="s2">'limitingConeAngle'</span><span class="s0">,</span>
    <span class="s2">'markerHeight'</span><span class="s0">,</span>
    <span class="s2">'markerUnits'</span><span class="s0">,</span>
    <span class="s2">'markerWidth'</span><span class="s0">,</span>
    <span class="s2">'maskContentUnits'</span><span class="s0">,</span>
    <span class="s2">'maskUnits'</span><span class="s0">,</span>
    <span class="s2">'numOctaves'</span><span class="s0">,</span>
    <span class="s2">'pathLength'</span><span class="s0">,</span>
    <span class="s2">'patternContentUnits'</span><span class="s0">,</span>
    <span class="s2">'patternTransform'</span><span class="s0">,</span>
    <span class="s2">'patternUnits'</span><span class="s0">,</span>
    <span class="s2">'pointsAtX'</span><span class="s0">,</span>
    <span class="s2">'pointsAtY'</span><span class="s0">,</span>
    <span class="s2">'pointsAtZ'</span><span class="s0">,</span>
    <span class="s2">'preserveAlpha'</span><span class="s0">,</span>
    <span class="s2">'preserveAspectRatio'</span><span class="s0">,</span>
    <span class="s2">'primitiveUnits'</span><span class="s0">,</span>
    <span class="s2">'refX'</span><span class="s0">,</span>
    <span class="s2">'refY'</span><span class="s0">,</span>
    <span class="s2">'repeatCount'</span><span class="s0">,</span>
    <span class="s2">'repeatDur'</span><span class="s0">,</span>
    <span class="s2">'requiredExtensions'</span><span class="s0">,</span>
    <span class="s2">'requiredFeatures'</span><span class="s0">,</span>
    <span class="s2">'specularConstant'</span><span class="s0">,</span>
    <span class="s2">'specularExponent'</span><span class="s0">,</span>
    <span class="s2">'spreadMethod'</span><span class="s0">,</span>
    <span class="s2">'startOffset'</span><span class="s0">,</span>
    <span class="s2">'stdDeviation'</span><span class="s0">,</span>
    <span class="s2">'stitchTiles'</span><span class="s0">,</span>
    <span class="s2">'surfaceScale'</span><span class="s0">,</span>
    <span class="s2">'systemLanguage'</span><span class="s0">,</span>
    <span class="s2">'tableValues'</span><span class="s0">,</span>
    <span class="s2">'targetX'</span><span class="s0">,</span>
    <span class="s2">'targetY'</span><span class="s0">,</span>
    <span class="s2">'textLength'</span><span class="s0">,</span>
    <span class="s2">'viewBox'</span><span class="s0">,</span>
    <span class="s2">'viewTarget'</span><span class="s0">,</span>
    <span class="s2">'xChannelSelector'</span><span class="s0">,</span>
    <span class="s2">'yChannelSelector'</span><span class="s0">,</span>
    <span class="s2">'zoomAndPan'</span><span class="s0">,</span>
<span class="s1">].map((attr) =&gt; [attr.toLowerCase()</span><span class="s0">, </span><span class="s1">attr]))</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">XML_ATTRS_ADJUSTMENT_MAP = </span><span class="s0">new </span><span class="s1">Map([</span>
    <span class="s1">[</span><span class="s2">'xlink:actuate'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xlink'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'actuate'</span><span class="s0">, </span><span class="s1">namespace: NS.XLINK }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xlink:arcrole'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xlink'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'arcrole'</span><span class="s0">, </span><span class="s1">namespace: NS.XLINK }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xlink:href'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xlink'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'href'</span><span class="s0">, </span><span class="s1">namespace: NS.XLINK }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xlink:role'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xlink'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'role'</span><span class="s0">, </span><span class="s1">namespace: NS.XLINK }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xlink:show'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xlink'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'show'</span><span class="s0">, </span><span class="s1">namespace: NS.XLINK }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xlink:title'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xlink'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'title'</span><span class="s0">, </span><span class="s1">namespace: NS.XLINK }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xlink:type'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xlink'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'type'</span><span class="s0">, </span><span class="s1">namespace: NS.XLINK }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xml:base'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xml'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'base'</span><span class="s0">, </span><span class="s1">namespace: NS.XML }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xml:lang'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xml'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'lang'</span><span class="s0">, </span><span class="s1">namespace: NS.XML }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xml:space'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xml'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'space'</span><span class="s0">, </span><span class="s1">namespace: NS.XML }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xmlns'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">''</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'xmlns'</span><span class="s0">, </span><span class="s1">namespace: NS.XMLNS }]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s2">'xmlns:xlink'</span><span class="s0">, </span><span class="s1">{ prefix: </span><span class="s2">'xmlns'</span><span class="s0">, </span><span class="s1">name: </span><span class="s2">'xlink'</span><span class="s0">, </span><span class="s1">namespace: NS.XMLNS }]</span><span class="s0">,</span>
<span class="s1">])</span><span class="s0">;</span>
<span class="s4">//SVG tag names adjustment map</span>
<span class="s0">const </span><span class="s1">SVG_TAG_NAMES_ADJUSTMENT_MAP = </span><span class="s0">new </span><span class="s1">Map([</span>
    <span class="s2">'altGlyph'</span><span class="s0">,</span>
    <span class="s2">'altGlyphDef'</span><span class="s0">,</span>
    <span class="s2">'altGlyphItem'</span><span class="s0">,</span>
    <span class="s2">'animateColor'</span><span class="s0">,</span>
    <span class="s2">'animateMotion'</span><span class="s0">,</span>
    <span class="s2">'animateTransform'</span><span class="s0">,</span>
    <span class="s2">'clipPath'</span><span class="s0">,</span>
    <span class="s2">'feBlend'</span><span class="s0">,</span>
    <span class="s2">'feColorMatrix'</span><span class="s0">,</span>
    <span class="s2">'feComponentTransfer'</span><span class="s0">,</span>
    <span class="s2">'feComposite'</span><span class="s0">,</span>
    <span class="s2">'feConvolveMatrix'</span><span class="s0">,</span>
    <span class="s2">'feDiffuseLighting'</span><span class="s0">,</span>
    <span class="s2">'feDisplacementMap'</span><span class="s0">,</span>
    <span class="s2">'feDistantLight'</span><span class="s0">,</span>
    <span class="s2">'feFlood'</span><span class="s0">,</span>
    <span class="s2">'feFuncA'</span><span class="s0">,</span>
    <span class="s2">'feFuncB'</span><span class="s0">,</span>
    <span class="s2">'feFuncG'</span><span class="s0">,</span>
    <span class="s2">'feFuncR'</span><span class="s0">,</span>
    <span class="s2">'feGaussianBlur'</span><span class="s0">,</span>
    <span class="s2">'feImage'</span><span class="s0">,</span>
    <span class="s2">'feMerge'</span><span class="s0">,</span>
    <span class="s2">'feMergeNode'</span><span class="s0">,</span>
    <span class="s2">'feMorphology'</span><span class="s0">,</span>
    <span class="s2">'feOffset'</span><span class="s0">,</span>
    <span class="s2">'fePointLight'</span><span class="s0">,</span>
    <span class="s2">'feSpecularLighting'</span><span class="s0">,</span>
    <span class="s2">'feSpotLight'</span><span class="s0">,</span>
    <span class="s2">'feTile'</span><span class="s0">,</span>
    <span class="s2">'feTurbulence'</span><span class="s0">,</span>
    <span class="s2">'foreignObject'</span><span class="s0">,</span>
    <span class="s2">'glyphRef'</span><span class="s0">,</span>
    <span class="s2">'linearGradient'</span><span class="s0">,</span>
    <span class="s2">'radialGradient'</span><span class="s0">,</span>
    <span class="s2">'textPath'</span><span class="s0">,</span>
<span class="s1">].map((tn) =&gt; [tn.toLowerCase()</span><span class="s0">, </span><span class="s1">tn]))</span><span class="s0">;</span>
<span class="s4">//Tags that causes exit from foreign content</span>
<span class="s0">const </span><span class="s1">EXITS_FOREIGN_CONTENT = </span><span class="s0">new </span><span class="s1">Set([</span>
    <span class="s1">TAG_ID.B</span><span class="s0">,</span>
    <span class="s1">TAG_ID.BIG</span><span class="s0">,</span>
    <span class="s1">TAG_ID.BLOCKQUOTE</span><span class="s0">,</span>
    <span class="s1">TAG_ID.BODY</span><span class="s0">,</span>
    <span class="s1">TAG_ID.BR</span><span class="s0">,</span>
    <span class="s1">TAG_ID.CENTER</span><span class="s0">,</span>
    <span class="s1">TAG_ID.CODE</span><span class="s0">,</span>
    <span class="s1">TAG_ID.DD</span><span class="s0">,</span>
    <span class="s1">TAG_ID.DIV</span><span class="s0">,</span>
    <span class="s1">TAG_ID.DL</span><span class="s0">,</span>
    <span class="s1">TAG_ID.DT</span><span class="s0">,</span>
    <span class="s1">TAG_ID.EM</span><span class="s0">,</span>
    <span class="s1">TAG_ID.EMBED</span><span class="s0">,</span>
    <span class="s1">TAG_ID.H1</span><span class="s0">,</span>
    <span class="s1">TAG_ID.H2</span><span class="s0">,</span>
    <span class="s1">TAG_ID.H3</span><span class="s0">,</span>
    <span class="s1">TAG_ID.H4</span><span class="s0">,</span>
    <span class="s1">TAG_ID.H5</span><span class="s0">,</span>
    <span class="s1">TAG_ID.H6</span><span class="s0">,</span>
    <span class="s1">TAG_ID.HEAD</span><span class="s0">,</span>
    <span class="s1">TAG_ID.HR</span><span class="s0">,</span>
    <span class="s1">TAG_ID.I</span><span class="s0">,</span>
    <span class="s1">TAG_ID.IMG</span><span class="s0">,</span>
    <span class="s1">TAG_ID.LI</span><span class="s0">,</span>
    <span class="s1">TAG_ID.LISTING</span><span class="s0">,</span>
    <span class="s1">TAG_ID.MENU</span><span class="s0">,</span>
    <span class="s1">TAG_ID.META</span><span class="s0">,</span>
    <span class="s1">TAG_ID.NOBR</span><span class="s0">,</span>
    <span class="s1">TAG_ID.OL</span><span class="s0">,</span>
    <span class="s1">TAG_ID.P</span><span class="s0">,</span>
    <span class="s1">TAG_ID.PRE</span><span class="s0">,</span>
    <span class="s1">TAG_ID.RUBY</span><span class="s0">,</span>
    <span class="s1">TAG_ID.S</span><span class="s0">,</span>
    <span class="s1">TAG_ID.SMALL</span><span class="s0">,</span>
    <span class="s1">TAG_ID.SPAN</span><span class="s0">,</span>
    <span class="s1">TAG_ID.STRONG</span><span class="s0">,</span>
    <span class="s1">TAG_ID.STRIKE</span><span class="s0">,</span>
    <span class="s1">TAG_ID.SUB</span><span class="s0">,</span>
    <span class="s1">TAG_ID.SUP</span><span class="s0">,</span>
    <span class="s1">TAG_ID.TABLE</span><span class="s0">,</span>
    <span class="s1">TAG_ID.TT</span><span class="s0">,</span>
    <span class="s1">TAG_ID.U</span><span class="s0">,</span>
    <span class="s1">TAG_ID.UL</span><span class="s0">,</span>
    <span class="s1">TAG_ID.VAR</span><span class="s0">,</span>
<span class="s1">])</span><span class="s0">;</span>
<span class="s4">//Check exit from foreign content</span>
<span class="s0">function </span><span class="s1">causesExit(startTagToken) {</span>
    <span class="s0">const </span><span class="s1">tn = startTagToken.tagID</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">isFontWithAttrs = tn === TAG_ID.FONT &amp;&amp;</span>
        <span class="s1">startTagToken.attrs.some(({ name }) =&gt; name === ATTRS.COLOR || name === ATTRS.SIZE || name === ATTRS.FACE)</span><span class="s0">;</span>
    <span class="s0">return </span><span class="s1">isFontWithAttrs || EXITS_FOREIGN_CONTENT.has(tn)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">//Token adjustments</span>
<span class="s0">function </span><span class="s1">adjustTokenMathMLAttrs(token) {</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; token.attrs.length</span><span class="s0">; </span><span class="s1">i++) {</span>
        <span class="s0">if </span><span class="s1">(token.attrs[i].name === DEFINITION_URL_ATTR) {</span>
            <span class="s1">token.attrs[i].name = ADJUSTED_DEFINITION_URL_ATTR</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">adjustTokenSVGAttrs(token) {</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; token.attrs.length</span><span class="s0">; </span><span class="s1">i++) {</span>
        <span class="s0">const </span><span class="s1">adjustedAttrName = SVG_ATTRS_ADJUSTMENT_MAP.get(token.attrs[i].name)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(adjustedAttrName != </span><span class="s0">null</span><span class="s1">) {</span>
            <span class="s1">token.attrs[i].name = adjustedAttrName</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">adjustTokenXMLAttrs(token) {</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; token.attrs.length</span><span class="s0">; </span><span class="s1">i++) {</span>
        <span class="s0">const </span><span class="s1">adjustedAttrEntry = XML_ATTRS_ADJUSTMENT_MAP.get(token.attrs[i].name)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(adjustedAttrEntry) {</span>
            <span class="s1">token.attrs[i].prefix = adjustedAttrEntry.prefix</span><span class="s0">;</span>
            <span class="s1">token.attrs[i].name = adjustedAttrEntry.name</span><span class="s0">;</span>
            <span class="s1">token.attrs[i].namespace = adjustedAttrEntry.namespace</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">adjustTokenSVGTagName(token) {</span>
    <span class="s0">const </span><span class="s1">adjustedTagName = SVG_TAG_NAMES_ADJUSTMENT_MAP.get(token.tagName)</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(adjustedTagName != </span><span class="s0">null</span><span class="s1">) {</span>
        <span class="s1">token.tagName = adjustedTagName</span><span class="s0">;</span>
        <span class="s1">token.tagID = getTagID(token.tagName)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">//Integration points</span>
<span class="s0">function </span><span class="s1">isMathMLTextIntegrationPoint(tn</span><span class="s0">, </span><span class="s1">ns) {</span>
    <span class="s0">return </span><span class="s1">ns === NS.MATHML &amp;&amp; (tn === TAG_ID.MI || tn === TAG_ID.MO || tn === TAG_ID.MN || tn === TAG_ID.MS || tn === TAG_ID.MTEXT)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isHtmlIntegrationPoint(tn</span><span class="s0">, </span><span class="s1">ns</span><span class="s0">, </span><span class="s1">attrs) {</span>
    <span class="s0">if </span><span class="s1">(ns === NS.MATHML &amp;&amp; tn === TAG_ID.ANNOTATION_XML) {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; attrs.length</span><span class="s0">; </span><span class="s1">i++) {</span>
            <span class="s0">if </span><span class="s1">(attrs[i].name === ATTRS.ENCODING) {</span>
                <span class="s0">const </span><span class="s1">value = attrs[i].value.toLowerCase()</span><span class="s0">;</span>
                <span class="s0">return </span><span class="s1">value === MIME_TYPES.TEXT_HTML || value === MIME_TYPES.APPLICATION_XML</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">return </span><span class="s1">ns === NS.SVG &amp;&amp; (tn === TAG_ID.FOREIGN_OBJECT || tn === TAG_ID.DESC || tn === TAG_ID.TITLE)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isIntegrationPoint(tn</span><span class="s0">, </span><span class="s1">ns</span><span class="s0">, </span><span class="s1">attrs</span><span class="s0">, </span><span class="s1">foreignNS) {</span>
    <span class="s0">return </span><span class="s1">(((!foreignNS || foreignNS === NS.HTML) &amp;&amp; isHtmlIntegrationPoint(tn</span><span class="s0">, </span><span class="s1">ns</span><span class="s0">, </span><span class="s1">attrs)) ||</span>
        <span class="s1">((!foreignNS || foreignNS === NS.MATHML) &amp;&amp; isMathMLTextIntegrationPoint(tn</span><span class="s0">, </span><span class="s1">ns)))</span><span class="s0">;</span>
<span class="s1">}</span>

<span class="s0">var </span><span class="s1">foreignContent = {</span>
    <span class="s1">__proto__: </span><span class="s0">null,</span>
    <span class="s1">SVG_TAG_NAMES_ADJUSTMENT_MAP: SVG_TAG_NAMES_ADJUSTMENT_MAP</span><span class="s0">,</span>
    <span class="s1">adjustTokenMathMLAttrs: adjustTokenMathMLAttrs</span><span class="s0">,</span>
    <span class="s1">adjustTokenSVGAttrs: adjustTokenSVGAttrs</span><span class="s0">,</span>
    <span class="s1">adjustTokenSVGTagName: adjustTokenSVGTagName</span><span class="s0">,</span>
    <span class="s1">adjustTokenXMLAttrs: adjustTokenXMLAttrs</span><span class="s0">,</span>
    <span class="s1">causesExit: causesExit</span><span class="s0">,</span>
    <span class="s1">isIntegrationPoint: isIntegrationPoint</span>
<span class="s1">}</span><span class="s0">;</span>

<span class="s4">//Misc constants</span>
<span class="s0">const </span><span class="s1">HIDDEN_INPUT_TYPE = </span><span class="s2">'hidden'</span><span class="s0">;</span>
<span class="s4">//Adoption agency loops iteration count</span>
<span class="s0">const </span><span class="s1">AA_OUTER_LOOP_ITER = </span><span class="s3">8</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">AA_INNER_LOOP_ITER = </span><span class="s3">3</span><span class="s0">;</span>
<span class="s4">//Insertion modes</span>
<span class="s0">var </span><span class="s1">InsertionMode</span><span class="s0">;</span>
<span class="s1">(</span><span class="s0">function </span><span class="s1">(InsertionMode) {</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;INITIAL&quot;</span><span class="s1">] = </span><span class="s3">0</span><span class="s1">] = </span><span class="s2">&quot;INITIAL&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;BEFORE_HTML&quot;</span><span class="s1">] = </span><span class="s3">1</span><span class="s1">] = </span><span class="s2">&quot;BEFORE_HTML&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;BEFORE_HEAD&quot;</span><span class="s1">] = </span><span class="s3">2</span><span class="s1">] = </span><span class="s2">&quot;BEFORE_HEAD&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_HEAD&quot;</span><span class="s1">] = </span><span class="s3">3</span><span class="s1">] = </span><span class="s2">&quot;IN_HEAD&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_HEAD_NO_SCRIPT&quot;</span><span class="s1">] = </span><span class="s3">4</span><span class="s1">] = </span><span class="s2">&quot;IN_HEAD_NO_SCRIPT&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;AFTER_HEAD&quot;</span><span class="s1">] = </span><span class="s3">5</span><span class="s1">] = </span><span class="s2">&quot;AFTER_HEAD&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_BODY&quot;</span><span class="s1">] = </span><span class="s3">6</span><span class="s1">] = </span><span class="s2">&quot;IN_BODY&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">] = </span><span class="s3">7</span><span class="s1">] = </span><span class="s2">&quot;TEXT&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_TABLE&quot;</span><span class="s1">] = </span><span class="s3">8</span><span class="s1">] = </span><span class="s2">&quot;IN_TABLE&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_TABLE_TEXT&quot;</span><span class="s1">] = </span><span class="s3">9</span><span class="s1">] = </span><span class="s2">&quot;IN_TABLE_TEXT&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_CAPTION&quot;</span><span class="s1">] = </span><span class="s3">10</span><span class="s1">] = </span><span class="s2">&quot;IN_CAPTION&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_COLUMN_GROUP&quot;</span><span class="s1">] = </span><span class="s3">11</span><span class="s1">] = </span><span class="s2">&quot;IN_COLUMN_GROUP&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_TABLE_BODY&quot;</span><span class="s1">] = </span><span class="s3">12</span><span class="s1">] = </span><span class="s2">&quot;IN_TABLE_BODY&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_ROW&quot;</span><span class="s1">] = </span><span class="s3">13</span><span class="s1">] = </span><span class="s2">&quot;IN_ROW&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_CELL&quot;</span><span class="s1">] = </span><span class="s3">14</span><span class="s1">] = </span><span class="s2">&quot;IN_CELL&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_SELECT&quot;</span><span class="s1">] = </span><span class="s3">15</span><span class="s1">] = </span><span class="s2">&quot;IN_SELECT&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_SELECT_IN_TABLE&quot;</span><span class="s1">] = </span><span class="s3">16</span><span class="s1">] = </span><span class="s2">&quot;IN_SELECT_IN_TABLE&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_TEMPLATE&quot;</span><span class="s1">] = </span><span class="s3">17</span><span class="s1">] = </span><span class="s2">&quot;IN_TEMPLATE&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;AFTER_BODY&quot;</span><span class="s1">] = </span><span class="s3">18</span><span class="s1">] = </span><span class="s2">&quot;AFTER_BODY&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;IN_FRAMESET&quot;</span><span class="s1">] = </span><span class="s3">19</span><span class="s1">] = </span><span class="s2">&quot;IN_FRAMESET&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;AFTER_FRAMESET&quot;</span><span class="s1">] = </span><span class="s3">20</span><span class="s1">] = </span><span class="s2">&quot;AFTER_FRAMESET&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;AFTER_AFTER_BODY&quot;</span><span class="s1">] = </span><span class="s3">21</span><span class="s1">] = </span><span class="s2">&quot;AFTER_AFTER_BODY&quot;</span><span class="s0">;</span>
    <span class="s1">InsertionMode[InsertionMode[</span><span class="s2">&quot;AFTER_AFTER_FRAMESET&quot;</span><span class="s1">] = </span><span class="s3">22</span><span class="s1">] = </span><span class="s2">&quot;AFTER_AFTER_FRAMESET&quot;</span><span class="s0">;</span>
<span class="s1">})(InsertionMode || (InsertionMode = {}))</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">BASE_LOC = {</span>
    <span class="s1">startLine: -</span><span class="s3">1</span><span class="s0">,</span>
    <span class="s1">startCol: -</span><span class="s3">1</span><span class="s0">,</span>
    <span class="s1">startOffset: -</span><span class="s3">1</span><span class="s0">,</span>
    <span class="s1">endLine: -</span><span class="s3">1</span><span class="s0">,</span>
    <span class="s1">endCol: -</span><span class="s3">1</span><span class="s0">,</span>
    <span class="s1">endOffset: -</span><span class="s3">1</span><span class="s0">,</span>
<span class="s1">}</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">TABLE_STRUCTURE_TAGS = </span><span class="s0">new </span><span class="s1">Set([TAG_ID.TABLE</span><span class="s0">, </span><span class="s1">TAG_ID.TBODY</span><span class="s0">, </span><span class="s1">TAG_ID.TFOOT</span><span class="s0">, </span><span class="s1">TAG_ID.THEAD</span><span class="s0">, </span><span class="s1">TAG_ID.TR])</span><span class="s0">;</span>
<span class="s0">const </span><span class="s1">defaultParserOptions = {</span>
    <span class="s1">scriptingEnabled: </span><span class="s0">true,</span>
    <span class="s1">sourceCodeLocationInfo: </span><span class="s0">false,</span>
    <span class="s1">treeAdapter: defaultTreeAdapter</span><span class="s0">,</span>
    <span class="s1">onParseError: </span><span class="s0">null,</span>
<span class="s1">}</span><span class="s0">;</span>
<span class="s4">//Parser</span>
<span class="s0">class </span><span class="s1">Parser {</span>
    <span class="s1">constructor(options</span><span class="s0">, </span><span class="s1">document</span><span class="s0">, </span><span class="s1">fragmentContext = </span><span class="s0">null, </span><span class="s1">scriptHandler = </span><span class="s0">null</span><span class="s1">) {</span>
        <span class="s0">this</span><span class="s1">.fragmentContext = fragmentContext</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.scriptHandler = scriptHandler</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.currentToken = </span><span class="s0">null;</span>
        <span class="s0">this</span><span class="s1">.stopped = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.INITIAL</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.originalInsertionMode = InsertionMode.INITIAL</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.headElement = </span><span class="s0">null;</span>
        <span class="s0">this</span><span class="s1">.formElement = </span><span class="s0">null;</span>
        <span class="s5">/** Indicates that the current node is not an element in the HTML namespace */</span>
        <span class="s0">this</span><span class="s1">.currentNotInHTML = </span><span class="s0">false;</span>
        <span class="s5">/**</span>
         <span class="s5">* The template insertion mode stack is maintained from the left.</span>
         <span class="s5">* Ie. the topmost element will always have index 0.</span>
         <span class="s5">*/</span>
        <span class="s0">this</span><span class="s1">.tmplInsertionModeStack = []</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.pendingCharacterTokens = []</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.hasNonWhitespacePendingCharacterToken = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.framesetOk = </span><span class="s0">true;</span>
        <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.fosterParentingEnabled = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.options = {</span>
            <span class="s1">...defaultParserOptions</span><span class="s0">,</span>
            <span class="s1">...options</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.treeAdapter = </span><span class="s0">this</span><span class="s1">.options.treeAdapter</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.onParseError = </span><span class="s0">this</span><span class="s1">.options.onParseError</span><span class="s0">;</span>
        <span class="s4">// Always enable location info if we report parse errors.</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.onParseError) {</span>
            <span class="s0">this</span><span class="s1">.options.sourceCodeLocationInfo = </span><span class="s0">true;</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.document = document !== </span><span class="s0">null </span><span class="s1">&amp;&amp; document !== </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? document : </span><span class="s0">this</span><span class="s1">.treeAdapter.createDocument()</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.tokenizer = </span><span class="s0">new </span><span class="s1">Tokenizer(</span><span class="s0">this</span><span class="s1">.options</span><span class="s0">, this</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.activeFormattingElements = </span><span class="s0">new </span><span class="s1">FormattingElementList(</span><span class="s0">this</span><span class="s1">.treeAdapter)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.fragmentContextID = fragmentContext ? getTagID(</span><span class="s0">this</span><span class="s1">.treeAdapter.getTagName(fragmentContext)) : TAG_ID.UNKNOWN</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._setContextModes(fragmentContext !== </span><span class="s0">null </span><span class="s1">&amp;&amp; fragmentContext !== </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? fragmentContext : </span><span class="s0">this</span><span class="s1">.document</span><span class="s0">, this</span><span class="s1">.fragmentContextID)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.openElements = </span><span class="s0">new </span><span class="s1">OpenElementStack(</span><span class="s0">this</span><span class="s1">.document</span><span class="s0">, this</span><span class="s1">.treeAdapter</span><span class="s0">, this</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">// API</span>
    <span class="s0">static </span><span class="s1">parse(html</span><span class="s0">, </span><span class="s1">options) {</span>
        <span class="s0">const </span><span class="s1">parser = </span><span class="s0">new this</span><span class="s1">(options)</span><span class="s0">;</span>
        <span class="s1">parser.tokenizer.write(html</span><span class="s0">, true</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">parser.document</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">static </span><span class="s1">getFragmentParser(fragmentContext</span><span class="s0">, </span><span class="s1">options) {</span>
        <span class="s0">const </span><span class="s1">opts = {</span>
            <span class="s1">...defaultParserOptions</span><span class="s0">,</span>
            <span class="s1">...options</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
        <span class="s4">//NOTE: use a &lt;template&gt; element as the fragment context if no context element was provided,</span>
        <span class="s4">//so we will parse in a &quot;forgiving&quot; manner</span>
        <span class="s1">fragmentContext !== </span><span class="s0">null </span><span class="s1">&amp;&amp; fragmentContext !== </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? fragmentContext : (fragmentContext = opts.treeAdapter.createElement(TAG_NAMES.TEMPLATE</span><span class="s0">, </span><span class="s1">NS.HTML</span><span class="s0">, </span><span class="s1">[]))</span><span class="s0">;</span>
        <span class="s4">//NOTE: create a fake element which will be used as the `document` for fragment parsing.</span>
        <span class="s4">//This is important for jsdom, where a new `document` cannot be created. This led to</span>
        <span class="s4">//fragment parsing messing with the main `document`.</span>
        <span class="s0">const </span><span class="s1">documentMock = opts.treeAdapter.createElement(</span><span class="s2">'documentmock'</span><span class="s0">, </span><span class="s1">NS.HTML</span><span class="s0">, </span><span class="s1">[])</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">parser = </span><span class="s0">new this</span><span class="s1">(opts</span><span class="s0">, </span><span class="s1">documentMock</span><span class="s0">, </span><span class="s1">fragmentContext)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(parser.fragmentContextID === TAG_ID.TEMPLATE) {</span>
            <span class="s1">parser.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">parser._initTokenizerForFragmentParsing()</span><span class="s0">;</span>
        <span class="s1">parser._insertFakeRootElement()</span><span class="s0">;</span>
        <span class="s1">parser._resetInsertionMode()</span><span class="s0">;</span>
        <span class="s1">parser._findFormInFragmentContext()</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">parser</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">getFragment() {</span>
        <span class="s0">const </span><span class="s1">rootElement = </span><span class="s0">this</span><span class="s1">.treeAdapter.getFirstChild(</span><span class="s0">this</span><span class="s1">.document)</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">fragment = </span><span class="s0">this</span><span class="s1">.treeAdapter.createDocumentFragment()</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._adoptNodes(rootElement</span><span class="s0">, </span><span class="s1">fragment)</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">fragment</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Errors</span>
    <span class="s1">_err(token</span><span class="s0">, </span><span class="s1">code</span><span class="s0">, </span><span class="s1">beforeToken) {</span>
        <span class="s0">var </span><span class="s1">_a</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">.onParseError)</span>
            <span class="s0">return;</span>
        <span class="s0">const </span><span class="s1">loc = (_a = token.location) !== </span><span class="s0">null </span><span class="s1">&amp;&amp; _a !== </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? _a : BASE_LOC</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">err = {</span>
            <span class="s1">code</span><span class="s0">,</span>
            <span class="s1">startLine: loc.startLine</span><span class="s0">,</span>
            <span class="s1">startCol: loc.startCol</span><span class="s0">,</span>
            <span class="s1">startOffset: loc.startOffset</span><span class="s0">,</span>
            <span class="s1">endLine: beforeToken ? loc.startLine : loc.endLine</span><span class="s0">,</span>
            <span class="s1">endCol: beforeToken ? loc.startCol : loc.endCol</span><span class="s0">,</span>
            <span class="s1">endOffset: beforeToken ? loc.startOffset : loc.endOffset</span><span class="s0">,</span>
        <span class="s1">}</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.onParseError(err)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Stack events</span>
    <span class="s1">onItemPush(node</span><span class="s0">, </span><span class="s1">tid</span><span class="s0">, </span><span class="s1">isTop) {</span>
        <span class="s0">var </span><span class="s1">_a</span><span class="s0">, </span><span class="s1">_b</span><span class="s0">;</span>
        <span class="s1">(_b = (_a = </span><span class="s0">this</span><span class="s1">.treeAdapter).onItemPush) === </span><span class="s0">null </span><span class="s1">|| _b === </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">: _b.call(_a</span><span class="s0">, </span><span class="s1">node)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(isTop &amp;&amp; </span><span class="s0">this</span><span class="s1">.openElements.stackTop &gt; </span><span class="s3">0</span><span class="s1">)</span>
            <span class="s0">this</span><span class="s1">._setContextModes(node</span><span class="s0">, </span><span class="s1">tid)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">onItemPop(node</span><span class="s0">, </span><span class="s1">isTop) {</span>
        <span class="s0">var </span><span class="s1">_a</span><span class="s0">, </span><span class="s1">_b</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.options.sourceCodeLocationInfo) {</span>
            <span class="s0">this</span><span class="s1">._setEndLocation(node</span><span class="s0">, this</span><span class="s1">.currentToken)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">(_b = (_a = </span><span class="s0">this</span><span class="s1">.treeAdapter).onItemPop) === </span><span class="s0">null </span><span class="s1">|| _b === </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">: _b.call(_a</span><span class="s0">, </span><span class="s1">node</span><span class="s0">, this</span><span class="s1">.openElements.current)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(isTop) {</span>
            <span class="s0">let </span><span class="s1">current</span><span class="s0">;</span>
            <span class="s0">let </span><span class="s1">currentTagId</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.openElements.stackTop === </span><span class="s3">0 </span><span class="s1">&amp;&amp; </span><span class="s0">this</span><span class="s1">.fragmentContext) {</span>
                <span class="s1">current = </span><span class="s0">this</span><span class="s1">.fragmentContext</span><span class="s0">;</span>
                <span class="s1">currentTagId = </span><span class="s0">this</span><span class="s1">.fragmentContextID</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">else </span><span class="s1">{</span>
                <span class="s1">({ current</span><span class="s0">, </span><span class="s1">currentTagId } = </span><span class="s0">this</span><span class="s1">.openElements)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">this</span><span class="s1">._setContextModes(current</span><span class="s0">, </span><span class="s1">currentTagId)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_setContextModes(current</span><span class="s0">, </span><span class="s1">tid) {</span>
        <span class="s0">const </span><span class="s1">isHTML = current === </span><span class="s0">this</span><span class="s1">.document || </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(current) === NS.HTML</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.currentNotInHTML = !isHTML</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.tokenizer.inForeignNode = !isHTML &amp;&amp; !</span><span class="s0">this</span><span class="s1">._isIntegrationPoint(tid</span><span class="s0">, </span><span class="s1">current)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_switchToTextParsing(currentToken</span><span class="s0">, </span><span class="s1">nextTokenizerState) {</span>
        <span class="s0">this</span><span class="s1">._insertElement(currentToken</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.tokenizer.state = nextTokenizerState</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.originalInsertionMode = </span><span class="s0">this</span><span class="s1">.insertionMode</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.TEXT</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">switchToPlaintextParsing() {</span>
        <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.TEXT</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.originalInsertionMode = InsertionMode.IN_BODY</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.tokenizer.state = TokenizerMode.PLAINTEXT</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Fragment parsing</span>
    <span class="s1">_getAdjustedCurrentElement() {</span>
        <span class="s0">return this</span><span class="s1">.openElements.stackTop === </span><span class="s3">0 </span><span class="s1">&amp;&amp; </span><span class="s0">this</span><span class="s1">.fragmentContext</span>
            <span class="s1">? </span><span class="s0">this</span><span class="s1">.fragmentContext</span>
            <span class="s1">: </span><span class="s0">this</span><span class="s1">.openElements.current</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_findFormInFragmentContext() {</span>
        <span class="s0">let </span><span class="s1">node = </span><span class="s0">this</span><span class="s1">.fragmentContext</span><span class="s0">;</span>
        <span class="s0">while </span><span class="s1">(node) {</span>
            <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.treeAdapter.getTagName(node) === TAG_NAMES.FORM) {</span>
                <span class="s0">this</span><span class="s1">.formElement = node</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s1">node = </span><span class="s0">this</span><span class="s1">.treeAdapter.getParentNode(node)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_initTokenizerForFragmentParsing() {</span>
        <span class="s0">if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">.fragmentContext || </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(</span><span class="s0">this</span><span class="s1">.fragmentContext) !== NS.HTML) {</span>
            <span class="s0">return;</span>
        <span class="s1">}</span>
        <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.fragmentContextID) {</span>
            <span class="s0">case </span><span class="s1">TAG_ID.TITLE:</span>
            <span class="s0">case </span><span class="s1">TAG_ID.TEXTAREA: {</span>
                <span class="s0">this</span><span class="s1">.tokenizer.state = TokenizerMode.RCDATA</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TAG_ID.STYLE:</span>
            <span class="s0">case </span><span class="s1">TAG_ID.XMP:</span>
            <span class="s0">case </span><span class="s1">TAG_ID.IFRAME:</span>
            <span class="s0">case </span><span class="s1">TAG_ID.NOEMBED:</span>
            <span class="s0">case </span><span class="s1">TAG_ID.NOFRAMES:</span>
            <span class="s0">case </span><span class="s1">TAG_ID.NOSCRIPT: {</span>
                <span class="s0">this</span><span class="s1">.tokenizer.state = TokenizerMode.RAWTEXT</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TAG_ID.SCRIPT: {</span>
                <span class="s0">this</span><span class="s1">.tokenizer.state = TokenizerMode.SCRIPT_DATA</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TAG_ID.PLAINTEXT: {</span>
                <span class="s0">this</span><span class="s1">.tokenizer.state = TokenizerMode.PLAINTEXT</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Do nothing</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">//Tree mutation</span>
    <span class="s1">_setDocumentType(token) {</span>
        <span class="s0">const </span><span class="s1">name = token.name || </span><span class="s2">''</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">publicId = token.publicId || </span><span class="s2">''</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">systemId = token.systemId || </span><span class="s2">''</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.treeAdapter.setDocumentType(</span><span class="s0">this</span><span class="s1">.document</span><span class="s0">, </span><span class="s1">name</span><span class="s0">, </span><span class="s1">publicId</span><span class="s0">, </span><span class="s1">systemId)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(token.location) {</span>
            <span class="s0">const </span><span class="s1">documentChildren = </span><span class="s0">this</span><span class="s1">.treeAdapter.getChildNodes(</span><span class="s0">this</span><span class="s1">.document)</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">docTypeNode = documentChildren.find((node) =&gt; </span><span class="s0">this</span><span class="s1">.treeAdapter.isDocumentTypeNode(node))</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(docTypeNode) {</span>
                <span class="s0">this</span><span class="s1">.treeAdapter.setNodeSourceCodeLocation(docTypeNode</span><span class="s0">, </span><span class="s1">token.location)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_attachElementToTree(element</span><span class="s0">, </span><span class="s1">location) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.options.sourceCodeLocationInfo) {</span>
            <span class="s0">const </span><span class="s1">loc = location &amp;&amp; {</span>
                <span class="s1">...location</span><span class="s0">,</span>
                <span class="s1">startTag: location</span><span class="s0">,</span>
            <span class="s1">}</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.setNodeSourceCodeLocation(element</span><span class="s0">, </span><span class="s1">loc)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">._shouldFosterParentOnInsertion()) {</span>
            <span class="s0">this</span><span class="s1">._fosterParentElement(element)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">const </span><span class="s1">parent = </span><span class="s0">this</span><span class="s1">.openElements.currentTmplContentOrNode</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.appendChild(parent</span><span class="s0">, </span><span class="s1">element)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_appendElement(token</span><span class="s0">, </span><span class="s1">namespaceURI) {</span>
        <span class="s0">const </span><span class="s1">element = </span><span class="s0">this</span><span class="s1">.treeAdapter.createElement(token.tagName</span><span class="s0">, </span><span class="s1">namespaceURI</span><span class="s0">, </span><span class="s1">token.attrs)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._attachElementToTree(element</span><span class="s0">, </span><span class="s1">token.location)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_insertElement(token</span><span class="s0">, </span><span class="s1">namespaceURI) {</span>
        <span class="s0">const </span><span class="s1">element = </span><span class="s0">this</span><span class="s1">.treeAdapter.createElement(token.tagName</span><span class="s0">, </span><span class="s1">namespaceURI</span><span class="s0">, </span><span class="s1">token.attrs)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._attachElementToTree(element</span><span class="s0">, </span><span class="s1">token.location)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.openElements.push(element</span><span class="s0">, </span><span class="s1">token.tagID)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_insertFakeElement(tagName</span><span class="s0">, </span><span class="s1">tagID) {</span>
        <span class="s0">const </span><span class="s1">element = </span><span class="s0">this</span><span class="s1">.treeAdapter.createElement(tagName</span><span class="s0">, </span><span class="s1">NS.HTML</span><span class="s0">, </span><span class="s1">[])</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._attachElementToTree(element</span><span class="s0">, null</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.openElements.push(element</span><span class="s0">, </span><span class="s1">tagID)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_insertTemplate(token) {</span>
        <span class="s0">const </span><span class="s1">tmpl = </span><span class="s0">this</span><span class="s1">.treeAdapter.createElement(token.tagName</span><span class="s0">, </span><span class="s1">NS.HTML</span><span class="s0">, </span><span class="s1">token.attrs)</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">content = </span><span class="s0">this</span><span class="s1">.treeAdapter.createDocumentFragment()</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.treeAdapter.setTemplateContent(tmpl</span><span class="s0">, </span><span class="s1">content)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._attachElementToTree(tmpl</span><span class="s0">, </span><span class="s1">token.location)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.openElements.push(tmpl</span><span class="s0">, </span><span class="s1">token.tagID)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.options.sourceCodeLocationInfo)</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.setNodeSourceCodeLocation(content</span><span class="s0">, null</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_insertFakeRootElement() {</span>
        <span class="s0">const </span><span class="s1">element = </span><span class="s0">this</span><span class="s1">.treeAdapter.createElement(TAG_NAMES.HTML</span><span class="s0">, </span><span class="s1">NS.HTML</span><span class="s0">, </span><span class="s1">[])</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.options.sourceCodeLocationInfo)</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.setNodeSourceCodeLocation(element</span><span class="s0">, null</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.treeAdapter.appendChild(</span><span class="s0">this</span><span class="s1">.openElements.current</span><span class="s0">, </span><span class="s1">element)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.openElements.push(element</span><span class="s0">, </span><span class="s1">TAG_ID.HTML)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_appendCommentNode(token</span><span class="s0">, </span><span class="s1">parent) {</span>
        <span class="s0">const </span><span class="s1">commentNode = </span><span class="s0">this</span><span class="s1">.treeAdapter.createCommentNode(token.data)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.treeAdapter.appendChild(parent</span><span class="s0">, </span><span class="s1">commentNode)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.options.sourceCodeLocationInfo) {</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.setNodeSourceCodeLocation(commentNode</span><span class="s0">, </span><span class="s1">token.location)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_insertCharacters(token) {</span>
        <span class="s0">let </span><span class="s1">parent</span><span class="s0">;</span>
        <span class="s0">let </span><span class="s1">beforeElement</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">._shouldFosterParentOnInsertion()) {</span>
            <span class="s1">({ parent</span><span class="s0">, </span><span class="s1">beforeElement } = </span><span class="s0">this</span><span class="s1">._findFosterParentingLocation())</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(beforeElement) {</span>
                <span class="s0">this</span><span class="s1">.treeAdapter.insertTextBefore(parent</span><span class="s0">, </span><span class="s1">token.chars</span><span class="s0">, </span><span class="s1">beforeElement)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">else </span><span class="s1">{</span>
                <span class="s0">this</span><span class="s1">.treeAdapter.insertText(parent</span><span class="s0">, </span><span class="s1">token.chars)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s1">parent = </span><span class="s0">this</span><span class="s1">.openElements.currentTmplContentOrNode</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.insertText(parent</span><span class="s0">, </span><span class="s1">token.chars)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(!token.location)</span>
            <span class="s0">return;</span>
        <span class="s0">const </span><span class="s1">siblings = </span><span class="s0">this</span><span class="s1">.treeAdapter.getChildNodes(parent)</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">textNodeIdx = beforeElement ? siblings.lastIndexOf(beforeElement) : siblings.length</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">textNode = siblings[textNodeIdx - </span><span class="s3">1</span><span class="s1">]</span><span class="s0">;</span>
        <span class="s4">//NOTE: if we have a location assigned by another token, then just update the end position</span>
        <span class="s0">const </span><span class="s1">tnLoc = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNodeSourceCodeLocation(textNode)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(tnLoc) {</span>
            <span class="s0">const </span><span class="s1">{ endLine</span><span class="s0">, </span><span class="s1">endCol</span><span class="s0">, </span><span class="s1">endOffset } = token.location</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.updateNodeSourceCodeLocation(textNode</span><span class="s0">, </span><span class="s1">{ endLine</span><span class="s0">, </span><span class="s1">endCol</span><span class="s0">, </span><span class="s1">endOffset })</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.options.sourceCodeLocationInfo) {</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.setNodeSourceCodeLocation(textNode</span><span class="s0">, </span><span class="s1">token.location)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_adoptNodes(donor</span><span class="s0">, </span><span class="s1">recipient) {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">child = </span><span class="s0">this</span><span class="s1">.treeAdapter.getFirstChild(donor)</span><span class="s0">; </span><span class="s1">child</span><span class="s0">; </span><span class="s1">child = </span><span class="s0">this</span><span class="s1">.treeAdapter.getFirstChild(donor)) {</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.detachNode(child)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.appendChild(recipient</span><span class="s0">, </span><span class="s1">child)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_setEndLocation(element</span><span class="s0">, </span><span class="s1">closingToken) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.treeAdapter.getNodeSourceCodeLocation(element) &amp;&amp; closingToken.location) {</span>
            <span class="s0">const </span><span class="s1">ctLoc = closingToken.location</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">tn = </span><span class="s0">this</span><span class="s1">.treeAdapter.getTagName(element)</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">endLoc = </span>
            <span class="s4">// NOTE: For cases like &lt;p&gt; &lt;p&gt; &lt;/p&gt; - First 'p' closes without a closing</span>
            <span class="s4">// tag and for cases like &lt;td&gt; &lt;p&gt; &lt;/td&gt; - 'p' closes without a closing tag.</span>
            <span class="s1">closingToken.type === TokenType.END_TAG &amp;&amp; tn === closingToken.tagName</span>
                <span class="s1">? {</span>
                    <span class="s1">endTag: { ...ctLoc }</span><span class="s0">,</span>
                    <span class="s1">endLine: ctLoc.endLine</span><span class="s0">,</span>
                    <span class="s1">endCol: ctLoc.endCol</span><span class="s0">,</span>
                    <span class="s1">endOffset: ctLoc.endOffset</span><span class="s0">,</span>
                <span class="s1">}</span>
                <span class="s1">: {</span>
                    <span class="s1">endLine: ctLoc.startLine</span><span class="s0">,</span>
                    <span class="s1">endCol: ctLoc.startCol</span><span class="s0">,</span>
                    <span class="s1">endOffset: ctLoc.startOffset</span><span class="s0">,</span>
                <span class="s1">}</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.updateNodeSourceCodeLocation(element</span><span class="s0">, </span><span class="s1">endLoc)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">//Token processing</span>
    <span class="s1">shouldProcessStartTagTokenInForeignContent(token) {</span>
        <span class="s4">// Check that neither current === document, or ns === NS.HTML</span>
        <span class="s0">if </span><span class="s1">(!</span><span class="s0">this</span><span class="s1">.currentNotInHTML)</span>
            <span class="s0">return false;</span>
        <span class="s0">let </span><span class="s1">current</span><span class="s0">;</span>
        <span class="s0">let </span><span class="s1">currentTagId</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.openElements.stackTop === </span><span class="s3">0 </span><span class="s1">&amp;&amp; </span><span class="s0">this</span><span class="s1">.fragmentContext) {</span>
            <span class="s1">current = </span><span class="s0">this</span><span class="s1">.fragmentContext</span><span class="s0">;</span>
            <span class="s1">currentTagId = </span><span class="s0">this</span><span class="s1">.fragmentContextID</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s1">({ current</span><span class="s0">, </span><span class="s1">currentTagId } = </span><span class="s0">this</span><span class="s1">.openElements)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(token.tagID === TAG_ID.SVG &amp;&amp;</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.getTagName(current) === TAG_NAMES.ANNOTATION_XML &amp;&amp;</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(current) === NS.MATHML) {</span>
            <span class="s0">return false;</span>
        <span class="s1">}</span>
        <span class="s0">return </span><span class="s1">(</span>
        <span class="s4">// Check that `current` is not an integration point for HTML or MathML elements.</span>
        <span class="s0">this</span><span class="s1">.tokenizer.inForeignNode ||</span>
            <span class="s4">// If it _is_ an integration point, then we might have to check that it is not an HTML</span>
            <span class="s4">// integration point.</span>
            <span class="s1">((token.tagID === TAG_ID.MGLYPH || token.tagID === TAG_ID.MALIGNMARK) &amp;&amp;</span>
                <span class="s1">!</span><span class="s0">this</span><span class="s1">._isIntegrationPoint(currentTagId</span><span class="s0">, </span><span class="s1">current</span><span class="s0">, </span><span class="s1">NS.HTML)))</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_processToken(token) {</span>
        <span class="s0">switch </span><span class="s1">(token.type) {</span>
            <span class="s0">case </span><span class="s1">TokenType.CHARACTER: {</span>
                <span class="s0">this</span><span class="s1">.onCharacter(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TokenType.NULL_CHARACTER: {</span>
                <span class="s0">this</span><span class="s1">.onNullCharacter(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TokenType.COMMENT: {</span>
                <span class="s0">this</span><span class="s1">.onComment(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TokenType.DOCTYPE: {</span>
                <span class="s0">this</span><span class="s1">.onDoctype(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TokenType.START_TAG: {</span>
                <span class="s0">this</span><span class="s1">._processStartTag(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TokenType.END_TAG: {</span>
                <span class="s0">this</span><span class="s1">.onEndTag(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TokenType.EOF: {</span>
                <span class="s0">this</span><span class="s1">.onEof(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TokenType.WHITESPACE_CHARACTER: {</span>
                <span class="s0">this</span><span class="s1">.onWhitespaceCharacter(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">//Integration points</span>
    <span class="s1">_isIntegrationPoint(tid</span><span class="s0">, </span><span class="s1">element</span><span class="s0">, </span><span class="s1">foreignNS) {</span>
        <span class="s0">const </span><span class="s1">ns = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(element)</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">attrs = </span><span class="s0">this</span><span class="s1">.treeAdapter.getAttrList(element)</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">isIntegrationPoint(tid</span><span class="s0">, </span><span class="s1">ns</span><span class="s0">, </span><span class="s1">attrs</span><span class="s0">, </span><span class="s1">foreignNS)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Active formatting elements reconstruction</span>
    <span class="s1">_reconstructActiveFormattingElements() {</span>
        <span class="s0">const </span><span class="s1">listLength = </span><span class="s0">this</span><span class="s1">.activeFormattingElements.entries.length</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(listLength) {</span>
            <span class="s0">const </span><span class="s1">endIndex = </span><span class="s0">this</span><span class="s1">.activeFormattingElements.entries.findIndex((entry) =&gt; entry.type === EntryType.Marker || </span><span class="s0">this</span><span class="s1">.openElements.contains(entry.element))</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">unopenIdx = endIndex &lt; </span><span class="s3">0 </span><span class="s1">? listLength - </span><span class="s3">1 </span><span class="s1">: endIndex - </span><span class="s3">1</span><span class="s0">;</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = unopenIdx</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
                <span class="s0">const </span><span class="s1">entry = </span><span class="s0">this</span><span class="s1">.activeFormattingElements.entries[i]</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">._insertElement(entry.token</span><span class="s0">, this</span><span class="s1">.treeAdapter.getNamespaceURI(entry.element))</span><span class="s0">;</span>
                <span class="s1">entry.element = </span><span class="s0">this</span><span class="s1">.openElements.current</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">//Close elements</span>
    <span class="s1">_closeTableCell() {</span>
        <span class="s0">this</span><span class="s1">.openElements.generateImpliedEndTags()</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.openElements.popUntilTableCellPopped()</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.activeFormattingElements.clearToLastMarker()</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_ROW</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_closePElement() {</span>
        <span class="s0">this</span><span class="s1">.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.P)</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">.openElements.popUntilTagNamePopped(TAG_ID.P)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Insertion modes</span>
    <span class="s1">_resetInsertionMode() {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s0">this</span><span class="s1">.openElements.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s4">//Insertion mode reset map</span>
            <span class="s0">switch </span><span class="s1">(i === </span><span class="s3">0 </span><span class="s1">&amp;&amp; </span><span class="s0">this</span><span class="s1">.fragmentContext ? </span><span class="s0">this</span><span class="s1">.fragmentContextID : </span><span class="s0">this</span><span class="s1">.openElements.tagIDs[i]) {</span>
                <span class="s0">case </span><span class="s1">TAG_ID.TR: {</span>
                    <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_ROW</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
                <span class="s0">case </span><span class="s1">TAG_ID.THEAD:</span>
                <span class="s0">case </span><span class="s1">TAG_ID.TFOOT: {</span>
                    <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_TABLE_BODY</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.CAPTION: {</span>
                    <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_CAPTION</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP: {</span>
                    <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_COLUMN_GROUP</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.TABLE: {</span>
                    <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_TABLE</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.BODY: {</span>
                    <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_BODY</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.FRAMESET: {</span>
                    <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_FRAMESET</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.SELECT: {</span>
                    <span class="s0">this</span><span class="s1">._resetInsertionModeForSelect(i)</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
                    <span class="s0">this</span><span class="s1">.insertionMode = </span><span class="s0">this</span><span class="s1">.tmplInsertionModeStack[</span><span class="s3">0</span><span class="s1">]</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
                    <span class="s0">this</span><span class="s1">.insertionMode = </span><span class="s0">this</span><span class="s1">.headElement ? InsertionMode.AFTER_HEAD : InsertionMode.BEFORE_HEAD</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.TD:</span>
                <span class="s0">case </span><span class="s1">TAG_ID.TH: {</span>
                    <span class="s0">if </span><span class="s1">(i &gt; </span><span class="s3">0</span><span class="s1">) {</span>
                        <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_CELL</span><span class="s0">;</span>
                        <span class="s0">return;</span>
                    <span class="s1">}</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.HEAD: {</span>
                    <span class="s0">if </span><span class="s1">(i &gt; </span><span class="s3">0</span><span class="s1">) {</span>
                        <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_HEAD</span><span class="s0">;</span>
                        <span class="s0">return;</span>
                    <span class="s1">}</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_BODY</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_resetInsertionModeForSelect(selectIdx) {</span>
        <span class="s0">if </span><span class="s1">(selectIdx &gt; </span><span class="s3">0</span><span class="s1">) {</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = selectIdx - </span><span class="s3">1</span><span class="s0">; </span><span class="s1">i &gt; </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
                <span class="s0">const </span><span class="s1">tn = </span><span class="s0">this</span><span class="s1">.openElements.tagIDs[i]</span><span class="s0">;</span>
                <span class="s0">if </span><span class="s1">(tn === TAG_ID.TEMPLATE) {</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">else if </span><span class="s1">(tn === TAG_ID.TABLE) {</span>
                    <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_SELECT_IN_TABLE</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">this</span><span class="s1">.insertionMode = InsertionMode.IN_SELECT</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">//Foster parenting</span>
    <span class="s1">_isElementCausesFosterParenting(tn) {</span>
        <span class="s0">return </span><span class="s1">TABLE_STRUCTURE_TAGS.has(tn)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_shouldFosterParentOnInsertion() {</span>
        <span class="s0">return this</span><span class="s1">.fosterParentingEnabled &amp;&amp; </span><span class="s0">this</span><span class="s1">._isElementCausesFosterParenting(</span><span class="s0">this</span><span class="s1">.openElements.currentTagId)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_findFosterParentingLocation() {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s0">this</span><span class="s1">.openElements.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s0">const </span><span class="s1">openElement = </span><span class="s0">this</span><span class="s1">.openElements.items[i]</span><span class="s0">;</span>
            <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.openElements.tagIDs[i]) {</span>
                <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
                    <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(openElement) === NS.HTML) {</span>
                        <span class="s0">return </span><span class="s1">{ parent: </span><span class="s0">this</span><span class="s1">.treeAdapter.getTemplateContent(openElement)</span><span class="s0">, </span><span class="s1">beforeElement: </span><span class="s0">null </span><span class="s1">}</span><span class="s0">;</span>
                    <span class="s1">}</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">TAG_ID.TABLE: {</span>
                    <span class="s0">const </span><span class="s1">parent = </span><span class="s0">this</span><span class="s1">.treeAdapter.getParentNode(openElement)</span><span class="s0">;</span>
                    <span class="s0">if </span><span class="s1">(parent) {</span>
                        <span class="s0">return </span><span class="s1">{ parent</span><span class="s0">, </span><span class="s1">beforeElement: openElement }</span><span class="s0">;</span>
                    <span class="s1">}</span>
                    <span class="s0">return </span><span class="s1">{ parent: </span><span class="s0">this</span><span class="s1">.openElements.items[i - </span><span class="s3">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">beforeElement: </span><span class="s0">null </span><span class="s1">}</span><span class="s0">;</span>
                <span class="s1">}</span>
                <span class="s4">// Do nothing</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return </span><span class="s1">{ parent: </span><span class="s0">this</span><span class="s1">.openElements.items[</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">beforeElement: </span><span class="s0">null </span><span class="s1">}</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">_fosterParentElement(element) {</span>
        <span class="s0">const </span><span class="s1">location = </span><span class="s0">this</span><span class="s1">._findFosterParentingLocation()</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(location.beforeElement) {</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.insertBefore(location.parent</span><span class="s0">, </span><span class="s1">element</span><span class="s0">, </span><span class="s1">location.beforeElement)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">.treeAdapter.appendChild(location.parent</span><span class="s0">, </span><span class="s1">element)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">//Special elements</span>
    <span class="s1">_isSpecialElement(element</span><span class="s0">, </span><span class="s1">id) {</span>
        <span class="s0">const </span><span class="s1">ns = </span><span class="s0">this</span><span class="s1">.treeAdapter.getNamespaceURI(element)</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">SPECIAL_ELEMENTS[ns].has(id)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">onCharacter(token) {</span>
        <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.tokenizer.inForeignNode) {</span>
            <span class="s1">characterInForeignContent(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">return;</span>
        <span class="s1">}</span>
        <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.insertionMode) {</span>
            <span class="s0">case </span><span class="s1">InsertionMode.INITIAL: {</span>
                <span class="s1">tokenInInitialMode(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HTML: {</span>
                <span class="s1">tokenBeforeHtml(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HEAD: {</span>
                <span class="s1">tokenBeforeHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD: {</span>
                <span class="s1">tokenInHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD_NO_SCRIPT: {</span>
                <span class="s1">tokenInHeadNoScript(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_HEAD: {</span>
                <span class="s1">tokenAfterHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CAPTION:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CELL:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TEMPLATE: {</span>
                <span class="s1">characterInBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.TEXT:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT_IN_TABLE: {</span>
                <span class="s0">this</span><span class="s1">._insertCharacters(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_ROW: {</span>
                <span class="s1">characterInTable(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_TEXT: {</span>
                <span class="s1">characterInTableText(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_COLUMN_GROUP: {</span>
                <span class="s1">tokenInColumnGroup(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_BODY: {</span>
                <span class="s1">tokenAfterBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_BODY: {</span>
                <span class="s1">tokenAfterAfterBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Do nothing</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">onNullCharacter(token) {</span>
        <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.tokenizer.inForeignNode) {</span>
            <span class="s1">nullCharacterInForeignContent(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">return;</span>
        <span class="s1">}</span>
        <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.insertionMode) {</span>
            <span class="s0">case </span><span class="s1">InsertionMode.INITIAL: {</span>
                <span class="s1">tokenInInitialMode(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HTML: {</span>
                <span class="s1">tokenBeforeHtml(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HEAD: {</span>
                <span class="s1">tokenBeforeHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD: {</span>
                <span class="s1">tokenInHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD_NO_SCRIPT: {</span>
                <span class="s1">tokenInHeadNoScript(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_HEAD: {</span>
                <span class="s1">tokenAfterHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.TEXT: {</span>
                <span class="s0">this</span><span class="s1">._insertCharacters(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_ROW: {</span>
                <span class="s1">characterInTable(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_COLUMN_GROUP: {</span>
                <span class="s1">tokenInColumnGroup(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_BODY: {</span>
                <span class="s1">tokenAfterBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_BODY: {</span>
                <span class="s1">tokenAfterAfterBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Do nothing</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">onComment(token) {</span>
        <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.currentNotInHTML) {</span>
            <span class="s1">appendComment(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">return;</span>
        <span class="s1">}</span>
        <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.insertionMode) {</span>
            <span class="s0">case </span><span class="s1">InsertionMode.INITIAL:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HTML:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HEAD:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD_NO_SCRIPT:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_HEAD:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CAPTION:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_COLUMN_GROUP:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_ROW:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CELL:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT_IN_TABLE:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TEMPLATE:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_FRAMESET:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_FRAMESET: {</span>
                <span class="s1">appendComment(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_TEXT: {</span>
                <span class="s1">tokenInTableText(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_BODY: {</span>
                <span class="s1">appendCommentToRootHtmlElement(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_FRAMESET: {</span>
                <span class="s1">appendCommentToDocument(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Do nothing</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">onDoctype(token) {</span>
        <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
        <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.insertionMode) {</span>
            <span class="s0">case </span><span class="s1">InsertionMode.INITIAL: {</span>
                <span class="s1">doctypeInInitialMode(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HEAD:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD_NO_SCRIPT:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_HEAD: {</span>
                <span class="s0">this</span><span class="s1">._err(token</span><span class="s0">, </span><span class="s1">ERR.misplacedDoctype)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_TEXT: {</span>
                <span class="s1">tokenInTableText(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Do nothing</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">onStartTag(token) {</span>
        <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.currentToken = token</span><span class="s0">;</span>
        <span class="s0">this</span><span class="s1">._processStartTag(token)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(token.selfClosing &amp;&amp; !token.ackSelfClosing) {</span>
            <span class="s0">this</span><span class="s1">._err(token</span><span class="s0">, </span><span class="s1">ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s5">/**</span>
     <span class="s5">* Processes a given start tag.</span>
     <span class="s5">*</span>
     <span class="s5">* `onStartTag` checks if a self-closing tag was recognized. When a token</span>
     <span class="s5">* is moved inbetween multiple insertion modes, this check for self-closing</span>
     <span class="s5">* could lead to false positives. To avoid this, `_processStartTag` is used</span>
     <span class="s5">* for nested calls.</span>
     <span class="s5">*</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">token The token to process.</span>
     <span class="s5">*/</span>
    <span class="s1">_processStartTag(token) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.shouldProcessStartTagTokenInForeignContent(token)) {</span>
            <span class="s1">startTagInForeignContent(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._startTagOutsideForeignContent(token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_startTagOutsideForeignContent(token) {</span>
        <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.insertionMode) {</span>
            <span class="s0">case </span><span class="s1">InsertionMode.INITIAL: {</span>
                <span class="s1">tokenInInitialMode(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HTML: {</span>
                <span class="s1">startTagBeforeHtml(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HEAD: {</span>
                <span class="s1">startTagBeforeHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD: {</span>
                <span class="s1">startTagInHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD_NO_SCRIPT: {</span>
                <span class="s1">startTagInHeadNoScript(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_HEAD: {</span>
                <span class="s1">startTagAfterHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_BODY: {</span>
                <span class="s1">startTagInBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE: {</span>
                <span class="s1">startTagInTable(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_TEXT: {</span>
                <span class="s1">tokenInTableText(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CAPTION: {</span>
                <span class="s1">startTagInCaption(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_COLUMN_GROUP: {</span>
                <span class="s1">startTagInColumnGroup(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_BODY: {</span>
                <span class="s1">startTagInTableBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_ROW: {</span>
                <span class="s1">startTagInRow(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CELL: {</span>
                <span class="s1">startTagInCell(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT: {</span>
                <span class="s1">startTagInSelect(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT_IN_TABLE: {</span>
                <span class="s1">startTagInSelectInTable(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TEMPLATE: {</span>
                <span class="s1">startTagInTemplate(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_BODY: {</span>
                <span class="s1">startTagAfterBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_FRAMESET: {</span>
                <span class="s1">startTagInFrameset(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_FRAMESET: {</span>
                <span class="s1">startTagAfterFrameset(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_BODY: {</span>
                <span class="s1">startTagAfterAfterBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_FRAMESET: {</span>
                <span class="s1">startTagAfterAfterFrameset(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Do nothing</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">onEndTag(token) {</span>
        <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
        <span class="s0">this</span><span class="s1">.currentToken = token</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.currentNotInHTML) {</span>
            <span class="s1">endTagInForeignContent(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">this</span><span class="s1">._endTagOutsideForeignContent(token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">_endTagOutsideForeignContent(token) {</span>
        <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.insertionMode) {</span>
            <span class="s0">case </span><span class="s1">InsertionMode.INITIAL: {</span>
                <span class="s1">tokenInInitialMode(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HTML: {</span>
                <span class="s1">endTagBeforeHtml(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HEAD: {</span>
                <span class="s1">endTagBeforeHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD: {</span>
                <span class="s1">endTagInHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD_NO_SCRIPT: {</span>
                <span class="s1">endTagInHeadNoScript(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_HEAD: {</span>
                <span class="s1">endTagAfterHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_BODY: {</span>
                <span class="s1">endTagInBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.TEXT: {</span>
                <span class="s1">endTagInText(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE: {</span>
                <span class="s1">endTagInTable(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_TEXT: {</span>
                <span class="s1">tokenInTableText(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CAPTION: {</span>
                <span class="s1">endTagInCaption(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_COLUMN_GROUP: {</span>
                <span class="s1">endTagInColumnGroup(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_BODY: {</span>
                <span class="s1">endTagInTableBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_ROW: {</span>
                <span class="s1">endTagInRow(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CELL: {</span>
                <span class="s1">endTagInCell(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT: {</span>
                <span class="s1">endTagInSelect(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT_IN_TABLE: {</span>
                <span class="s1">endTagInSelectInTable(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TEMPLATE: {</span>
                <span class="s1">endTagInTemplate(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_BODY: {</span>
                <span class="s1">endTagAfterBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_FRAMESET: {</span>
                <span class="s1">endTagInFrameset(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_FRAMESET: {</span>
                <span class="s1">endTagAfterFrameset(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_BODY: {</span>
                <span class="s1">tokenAfterAfterBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Do nothing</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">onEof(token) {</span>
        <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.insertionMode) {</span>
            <span class="s0">case </span><span class="s1">InsertionMode.INITIAL: {</span>
                <span class="s1">tokenInInitialMode(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HTML: {</span>
                <span class="s1">tokenBeforeHtml(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.BEFORE_HEAD: {</span>
                <span class="s1">tokenBeforeHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD: {</span>
                <span class="s1">tokenInHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD_NO_SCRIPT: {</span>
                <span class="s1">tokenInHeadNoScript(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_HEAD: {</span>
                <span class="s1">tokenAfterHead(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CAPTION:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_COLUMN_GROUP:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_ROW:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CELL:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT_IN_TABLE: {</span>
                <span class="s1">eofInBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.TEXT: {</span>
                <span class="s1">eofInText(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_TEXT: {</span>
                <span class="s1">tokenInTableText(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TEMPLATE: {</span>
                <span class="s1">eofInTemplate(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_FRAMESET:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_FRAMESET:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_FRAMESET: {</span>
                <span class="s1">stopParsing(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Do nothing</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">onWhitespaceCharacter(token) {</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.skipNextNewLine) {</span>
            <span class="s0">this</span><span class="s1">.skipNextNewLine = </span><span class="s0">false;</span>
            <span class="s0">if </span><span class="s1">(token.chars.charCodeAt(</span><span class="s3">0</span><span class="s1">) === CODE_POINTS.LINE_FEED) {</span>
                <span class="s0">if </span><span class="s1">(token.chars.length === </span><span class="s3">1</span><span class="s1">) {</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
                <span class="s1">token.chars = token.chars.substr(</span><span class="s3">1</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.tokenizer.inForeignNode) {</span>
            <span class="s0">this</span><span class="s1">._insertCharacters(token)</span><span class="s0">;</span>
            <span class="s0">return;</span>
        <span class="s1">}</span>
        <span class="s0">switch </span><span class="s1">(</span><span class="s0">this</span><span class="s1">.insertionMode) {</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_HEAD_NO_SCRIPT:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_HEAD:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.TEXT:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_COLUMN_GROUP:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_SELECT_IN_TABLE:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_FRAMESET:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_FRAMESET: {</span>
                <span class="s0">this</span><span class="s1">._insertCharacters(token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CAPTION:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_CELL:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TEMPLATE:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.AFTER_AFTER_FRAMESET: {</span>
                <span class="s1">whitespaceCharacterInBody(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_BODY:</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_ROW: {</span>
                <span class="s1">characterInTable(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">InsertionMode.IN_TABLE_TEXT: {</span>
                <span class="s1">whitespaceCharacterInTableText(</span><span class="s0">this, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Do nothing</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">//Adoption agency algorithm</span>
<span class="s4">//(see: http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#adoptionAgency)</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s4">//Steps 5-8 of the algorithm</span>
<span class="s0">function </span><span class="s1">aaObtainFormattingElementEntry(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">let </span><span class="s1">formattingElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName)</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(formattingElementEntry) {</span>
        <span class="s0">if </span><span class="s1">(!p.openElements.contains(formattingElementEntry.element)) {</span>
            <span class="s1">p.activeFormattingElements.removeEntry(formattingElementEntry)</span><span class="s0">;</span>
            <span class="s1">formattingElementEntry = </span><span class="s0">null;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(!p.openElements.hasInScope(token.tagID)) {</span>
            <span class="s1">formattingElementEntry = </span><span class="s0">null;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">genericEndTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">return </span><span class="s1">formattingElementEntry</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">//Steps 9 and 10 of the algorithm</span>
<span class="s0">function </span><span class="s1">aaObtainFurthestBlock(p</span><span class="s0">, </span><span class="s1">formattingElementEntry) {</span>
    <span class="s0">let </span><span class="s1">furthestBlock = </span><span class="s0">null;</span>
    <span class="s0">let </span><span class="s1">idx = p.openElements.stackTop</span><span class="s0">;</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">; </span><span class="s1">idx &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">idx--) {</span>
        <span class="s0">const </span><span class="s1">element = p.openElements.items[idx]</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(element === formattingElementEntry.element) {</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(p._isSpecialElement(element</span><span class="s0">, </span><span class="s1">p.openElements.tagIDs[idx])) {</span>
            <span class="s1">furthestBlock = element</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">if </span><span class="s1">(!furthestBlock) {</span>
        <span class="s1">p.openElements.shortenToLength(idx &lt; </span><span class="s3">0 </span><span class="s1">? </span><span class="s3">0 </span><span class="s1">: idx)</span><span class="s0">;</span>
        <span class="s1">p.activeFormattingElements.removeEntry(formattingElementEntry)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">return </span><span class="s1">furthestBlock</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">//Step 13 of the algorithm</span>
<span class="s0">function </span><span class="s1">aaInnerLoop(p</span><span class="s0">, </span><span class="s1">furthestBlock</span><span class="s0">, </span><span class="s1">formattingElement) {</span>
    <span class="s0">let </span><span class="s1">lastElement = furthestBlock</span><span class="s0">;</span>
    <span class="s0">let </span><span class="s1">nextElement = p.openElements.getCommonAncestor(furthestBlock)</span><span class="s0">;</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">, </span><span class="s1">element = nextElement</span><span class="s0">; </span><span class="s1">element !== formattingElement</span><span class="s0">; </span><span class="s1">i++</span><span class="s0">, </span><span class="s1">element = nextElement) {</span>
        <span class="s4">//NOTE: store the next element for the next loop iteration (it may be deleted from the stack by step 9.5)</span>
        <span class="s1">nextElement = p.openElements.getCommonAncestor(element)</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">elementEntry = p.activeFormattingElements.getElementEntry(element)</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">counterOverflow = elementEntry &amp;&amp; i &gt;= AA_INNER_LOOP_ITER</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">shouldRemoveFromOpenElements = !elementEntry || counterOverflow</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(shouldRemoveFromOpenElements) {</span>
            <span class="s0">if </span><span class="s1">(counterOverflow) {</span>
                <span class="s1">p.activeFormattingElements.removeEntry(elementEntry)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s1">p.openElements.remove(element)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s1">element = aaRecreateElementFromEntry(p</span><span class="s0">, </span><span class="s1">elementEntry)</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(lastElement === furthestBlock) {</span>
                <span class="s1">p.activeFormattingElements.bookmark = elementEntry</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s1">p.treeAdapter.detachNode(lastElement)</span><span class="s0">;</span>
            <span class="s1">p.treeAdapter.appendChild(element</span><span class="s0">, </span><span class="s1">lastElement)</span><span class="s0">;</span>
            <span class="s1">lastElement = element</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">return </span><span class="s1">lastElement</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">//Step 13.7 of the algorithm</span>
<span class="s0">function </span><span class="s1">aaRecreateElementFromEntry(p</span><span class="s0">, </span><span class="s1">elementEntry) {</span>
    <span class="s0">const </span><span class="s1">ns = p.treeAdapter.getNamespaceURI(elementEntry.element)</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">newElement = p.treeAdapter.createElement(elementEntry.token.tagName</span><span class="s0">, </span><span class="s1">ns</span><span class="s0">, </span><span class="s1">elementEntry.token.attrs)</span><span class="s0">;</span>
    <span class="s1">p.openElements.replace(elementEntry.element</span><span class="s0">, </span><span class="s1">newElement)</span><span class="s0">;</span>
    <span class="s1">elementEntry.element = newElement</span><span class="s0">;</span>
    <span class="s0">return </span><span class="s1">newElement</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">//Step 14 of the algorithm</span>
<span class="s0">function </span><span class="s1">aaInsertLastNodeInCommonAncestor(p</span><span class="s0">, </span><span class="s1">commonAncestor</span><span class="s0">, </span><span class="s1">lastElement) {</span>
    <span class="s0">const </span><span class="s1">tn = p.treeAdapter.getTagName(commonAncestor)</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">tid = getTagID(tn)</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(p._isElementCausesFosterParenting(tid)) {</span>
        <span class="s1">p._fosterParentElement(lastElement)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s0">const </span><span class="s1">ns = p.treeAdapter.getNamespaceURI(commonAncestor)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(tid === TAG_ID.TEMPLATE &amp;&amp; ns === NS.HTML) {</span>
            <span class="s1">commonAncestor = p.treeAdapter.getTemplateContent(commonAncestor)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">p.treeAdapter.appendChild(commonAncestor</span><span class="s0">, </span><span class="s1">lastElement)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">//Steps 15-19 of the algorithm</span>
<span class="s0">function </span><span class="s1">aaReplaceFormattingElement(p</span><span class="s0">, </span><span class="s1">furthestBlock</span><span class="s0">, </span><span class="s1">formattingElementEntry) {</span>
    <span class="s0">const </span><span class="s1">ns = p.treeAdapter.getNamespaceURI(formattingElementEntry.element)</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">{ token } = formattingElementEntry</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">newElement = p.treeAdapter.createElement(token.tagName</span><span class="s0">, </span><span class="s1">ns</span><span class="s0">, </span><span class="s1">token.attrs)</span><span class="s0">;</span>
    <span class="s1">p._adoptNodes(furthestBlock</span><span class="s0">, </span><span class="s1">newElement)</span><span class="s0">;</span>
    <span class="s1">p.treeAdapter.appendChild(furthestBlock</span><span class="s0">, </span><span class="s1">newElement)</span><span class="s0">;</span>
    <span class="s1">p.activeFormattingElements.insertElementAfterBookmark(newElement</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">p.activeFormattingElements.removeEntry(formattingElementEntry)</span><span class="s0">;</span>
    <span class="s1">p.openElements.remove(formattingElementEntry.element)</span><span class="s0">;</span>
    <span class="s1">p.openElements.insertAfter(furthestBlock</span><span class="s0">, </span><span class="s1">newElement</span><span class="s0">, </span><span class="s1">token.tagID)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">//Algorithm entry point</span>
<span class="s0">function </span><span class="s1">callAdoptionAgency(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i &lt; AA_OUTER_LOOP_ITER</span><span class="s0">; </span><span class="s1">i++) {</span>
        <span class="s0">const </span><span class="s1">formattingElementEntry = aaObtainFormattingElementEntry(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(!formattingElementEntry) {</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">const </span><span class="s1">furthestBlock = aaObtainFurthestBlock(p</span><span class="s0">, </span><span class="s1">formattingElementEntry)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(!furthestBlock) {</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s1">p.activeFormattingElements.bookmark = formattingElementEntry</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">lastElement = aaInnerLoop(p</span><span class="s0">, </span><span class="s1">furthestBlock</span><span class="s0">, </span><span class="s1">formattingElementEntry.element)</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">commonAncestor = p.openElements.getCommonAncestor(formattingElementEntry.element)</span><span class="s0">;</span>
        <span class="s1">p.treeAdapter.detachNode(lastElement)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(commonAncestor)</span>
            <span class="s1">aaInsertLastNodeInCommonAncestor(p</span><span class="s0">, </span><span class="s1">commonAncestor</span><span class="s0">, </span><span class="s1">lastElement)</span><span class="s0">;</span>
        <span class="s1">aaReplaceFormattingElement(p</span><span class="s0">, </span><span class="s1">furthestBlock</span><span class="s0">, </span><span class="s1">formattingElementEntry)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">//Generic token handlers</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">appendComment(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._appendCommentNode(token</span><span class="s0">, </span><span class="s1">p.openElements.currentTmplContentOrNode)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">appendCommentToRootHtmlElement(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._appendCommentNode(token</span><span class="s0">, </span><span class="s1">p.openElements.items[</span><span class="s3">0</span><span class="s1">])</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">appendCommentToDocument(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._appendCommentNode(token</span><span class="s0">, </span><span class="s1">p.document)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">stopParsing(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.stopped = </span><span class="s0">true;</span>
    <span class="s4">// NOTE: Set end locations for elements that remain on the open element stack.</span>
    <span class="s0">if </span><span class="s1">(token.location) {</span>
        <span class="s4">// NOTE: If we are not in a fragment, `html` and `body` will stay on the stack.</span>
        <span class="s4">// This is a problem, as we might overwrite their end position here.</span>
        <span class="s0">const </span><span class="s1">target = p.fragmentContext ? </span><span class="s3">0 </span><span class="s1">: </span><span class="s3">2</span><span class="s0">;</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = p.openElements.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= target</span><span class="s0">; </span><span class="s1">i--) {</span>
            <span class="s1">p._setEndLocation(p.openElements.items[i]</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s4">// Handle `html` and `body`</span>
        <span class="s0">if </span><span class="s1">(!p.fragmentContext &amp;&amp; p.openElements.stackTop &gt;= </span><span class="s3">0</span><span class="s1">) {</span>
            <span class="s0">const </span><span class="s1">htmlElement = p.openElements.items[</span><span class="s3">0</span><span class="s1">]</span><span class="s0">;</span>
            <span class="s0">const </span><span class="s1">htmlLocation = p.treeAdapter.getNodeSourceCodeLocation(htmlElement)</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(htmlLocation &amp;&amp; !htmlLocation.endTag) {</span>
                <span class="s1">p._setEndLocation(htmlElement</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">if </span><span class="s1">(p.openElements.stackTop &gt;= </span><span class="s3">1</span><span class="s1">) {</span>
                    <span class="s0">const </span><span class="s1">bodyElement = p.openElements.items[</span><span class="s3">1</span><span class="s1">]</span><span class="s0">;</span>
                    <span class="s0">const </span><span class="s1">bodyLocation = p.treeAdapter.getNodeSourceCodeLocation(bodyElement)</span><span class="s0">;</span>
                    <span class="s0">if </span><span class="s1">(bodyLocation &amp;&amp; !bodyLocation.endTag) {</span>
                        <span class="s1">p._setEndLocation(bodyElement</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;initial&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">doctypeInInitialMode(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._setDocumentType(token)</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">mode = token.forceQuirks ? DOCUMENT_MODE.QUIRKS : getDocumentMode(token)</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(!isConforming(token)) {</span>
        <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.nonConformingDoctype)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p.treeAdapter.setDocumentMode(p.document</span><span class="s0">, </span><span class="s1">mode)</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.BEFORE_HTML</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenInInitialMode(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.missingDoctype</span><span class="s0">, true</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">p.treeAdapter.setDocumentMode(p.document</span><span class="s0">, </span><span class="s1">DOCUMENT_MODE.QUIRKS)</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.BEFORE_HTML</span><span class="s0">;</span>
    <span class="s1">p._processToken(token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;before html&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagBeforeHtml(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(token.tagID === TAG_ID.HTML) {</span>
        <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
        <span class="s1">p.insertionMode = InsertionMode.BEFORE_HEAD</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">tokenBeforeHtml(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagBeforeHtml(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(tn === TAG_ID.HTML || tn === TAG_ID.HEAD || tn === TAG_ID.BODY || tn === TAG_ID.BR) {</span>
        <span class="s1">tokenBeforeHtml(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenBeforeHtml(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._insertFakeRootElement()</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.BEFORE_HEAD</span><span class="s0">;</span>
    <span class="s1">p._processToken(token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;before head&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagBeforeHead(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HEAD: {</span>
            <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s1">p.headElement = p.openElements.current</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_HEAD</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">tokenBeforeHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagBeforeHead(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(tn === TAG_ID.HEAD || tn === TAG_ID.BODY || tn === TAG_ID.HTML || tn === TAG_ID.BR) {</span>
        <span class="s1">tokenBeforeHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.endTagWithoutMatchingOpenElement)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenBeforeHead(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._insertFakeElement(TAG_NAMES.HEAD</span><span class="s0">, </span><span class="s1">TAG_ID.HEAD)</span><span class="s0">;</span>
    <span class="s1">p.headElement = p.openElements.current</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_HEAD</span><span class="s0">;</span>
    <span class="s1">p._processToken(token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in head&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BASE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BASEFONT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BGSOUND:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.LINK:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.META: {</span>
            <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TITLE: {</span>
            <span class="s1">p._switchToTextParsing(token</span><span class="s0">, </span><span class="s1">TokenizerMode.RCDATA)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOSCRIPT: {</span>
            <span class="s0">if </span><span class="s1">(p.options.scriptingEnabled) {</span>
                <span class="s1">p._switchToTextParsing(token</span><span class="s0">, </span><span class="s1">TokenizerMode.RAWTEXT)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">else </span><span class="s1">{</span>
                <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_HEAD_NO_SCRIPT</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOFRAMES:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.STYLE: {</span>
            <span class="s1">p._switchToTextParsing(token</span><span class="s0">, </span><span class="s1">TokenizerMode.RAWTEXT)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SCRIPT: {</span>
            <span class="s1">p._switchToTextParsing(token</span><span class="s0">, </span><span class="s1">TokenizerMode.SCRIPT_DATA)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">p._insertTemplate(token)</span><span class="s0">;</span>
            <span class="s1">p.activeFormattingElements.insertMarker()</span><span class="s0">;</span>
            <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_TEMPLATE</span><span class="s0">;</span>
            <span class="s1">p.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HEAD: {</span>
            <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.misplacedStartTagForHeadElement)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">tokenInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInHead(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HEAD: {</span>
            <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.AFTER_HEAD</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BR:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">tokenInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">templateEndTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.endTagWithoutMatchingOpenElement)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">templateEndTagInHead(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.tmplCount &gt; </span><span class="s3">0</span><span class="s1">) {</span>
        <span class="s1">p.openElements.generateImpliedEndTagsThoroughly()</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(p.openElements.currentTagId !== TAG_ID.TEMPLATE) {</span>
            <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.closingOfElementWithOpenChildElements)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE)</span><span class="s0">;</span>
        <span class="s1">p.activeFormattingElements.clearToLastMarker()</span><span class="s0">;</span>
        <span class="s1">p.tmplInsertionModeStack.shift()</span><span class="s0">;</span>
        <span class="s1">p._resetInsertionMode()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.endTagWithoutMatchingOpenElement)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenInHead(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.AFTER_HEAD</span><span class="s0">;</span>
    <span class="s1">p._processToken(token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in head no script&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagInHeadNoScript(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BASEFONT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BGSOUND:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HEAD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.LINK:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.META:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOFRAMES:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.STYLE: {</span>
            <span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOSCRIPT: {</span>
            <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.nestedNoscriptInHead)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">tokenInHeadNoScript(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInHeadNoScript(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOSCRIPT: {</span>
            <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_HEAD</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BR: {</span>
            <span class="s1">tokenInHeadNoScript(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.endTagWithoutMatchingOpenElement)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenInHeadNoScript(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">errCode = token.type === TokenType.EOF ? ERR.openElementsLeftAfterEof : ERR.disallowedContentInNoscriptInHead</span><span class="s0">;</span>
    <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">errCode)</span><span class="s0">;</span>
    <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_HEAD</span><span class="s0">;</span>
    <span class="s1">p._processToken(token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;after head&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagAfterHead(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BODY: {</span>
            <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_BODY</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FRAMESET: {</span>
            <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_FRAMESET</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BASE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BASEFONT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BGSOUND:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.LINK:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.META:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOFRAMES:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SCRIPT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.STYLE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TITLE: {</span>
            <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.abandonedHeadElementChild)</span><span class="s0">;</span>
            <span class="s1">p.openElements.push(p.headElement</span><span class="s0">, </span><span class="s1">TAG_ID.HEAD)</span><span class="s0">;</span>
            <span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">p.openElements.remove(p.headElement)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HEAD: {</span>
            <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.misplacedStartTagForHeadElement)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">tokenAfterHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagAfterHead(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BR: {</span>
            <span class="s1">tokenAfterHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">templateEndTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.endTagWithoutMatchingOpenElement)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenAfterHead(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._insertFakeElement(TAG_NAMES.BODY</span><span class="s0">, </span><span class="s1">TAG_ID.BODY)</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_BODY</span><span class="s0">;</span>
    <span class="s1">modeInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in body&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">modeInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.type) {</span>
        <span class="s0">case </span><span class="s1">TokenType.CHARACTER: {</span>
            <span class="s1">characterInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TokenType.WHITESPACE_CHARACTER: {</span>
            <span class="s1">whitespaceCharacterInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TokenType.COMMENT: {</span>
            <span class="s1">appendComment(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TokenType.START_TAG: {</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TokenType.END_TAG: {</span>
            <span class="s1">endTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TokenType.EOF: {</span>
            <span class="s1">eofInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s4">// Do nothing</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">whitespaceCharacterInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._insertCharacters(token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">characterInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._insertCharacters(token)</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">htmlStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.tmplCount === </span><span class="s3">0</span><span class="s1">) {</span>
        <span class="s1">p.treeAdapter.adoptAttributes(p.openElements.items[</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">token.attrs)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">bodyStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">bodyElement = p.openElements.tryPeekProperlyNestedBodyElement()</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(bodyElement &amp;&amp; p.openElements.tmplCount === </span><span class="s3">0</span><span class="s1">) {</span>
        <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
        <span class="s1">p.treeAdapter.adoptAttributes(bodyElement</span><span class="s0">, </span><span class="s1">token.attrs)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">framesetStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">bodyElement = p.openElements.tryPeekProperlyNestedBodyElement()</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(p.framesetOk &amp;&amp; bodyElement) {</span>
        <span class="s1">p.treeAdapter.detachNode(bodyElement)</span><span class="s0">;</span>
        <span class="s1">p.openElements.popAllUpToHtmlElement()</span><span class="s0">;</span>
        <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
        <span class="s1">p.insertionMode = InsertionMode.IN_FRAMESET</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">addressStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInButtonScope(TAG_ID.P)) {</span>
        <span class="s1">p._closePElement()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">numberedHeaderStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInButtonScope(TAG_ID.P)) {</span>
        <span class="s1">p._closePElement()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">if </span><span class="s1">(isNumberedHeader(p.openElements.currentTagId)) {</span>
        <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">preStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInButtonScope(TAG_ID.P)) {</span>
        <span class="s1">p._closePElement()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s4">//NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move</span>
    <span class="s4">//on to the next one. (Newlines at the start of pre blocks are ignored as an authoring convenience.)</span>
    <span class="s1">p.skipNextNewLine = </span><span class="s0">true;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">formStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">inTemplate = p.openElements.tmplCount &gt; </span><span class="s3">0</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(!p.formElement || inTemplate) {</span>
        <span class="s0">if </span><span class="s1">(p.openElements.hasInButtonScope(TAG_ID.P)) {</span>
            <span class="s1">p._closePElement()</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(!inTemplate) {</span>
            <span class="s1">p.formElement = p.openElements.current</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">listItemStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = p.openElements.stackTop</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
        <span class="s0">const </span><span class="s1">elementId = p.openElements.tagIDs[i]</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">((tn === TAG_ID.LI &amp;&amp; elementId === TAG_ID.LI) ||</span>
            <span class="s1">((tn === TAG_ID.DD || tn === TAG_ID.DT) &amp;&amp; (elementId === TAG_ID.DD || elementId === TAG_ID.DT))) {</span>
            <span class="s1">p.openElements.generateImpliedEndTagsWithExclusion(elementId)</span><span class="s0">;</span>
            <span class="s1">p.openElements.popUntilTagNamePopped(elementId)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(elementId !== TAG_ID.ADDRESS &amp;&amp;</span>
            <span class="s1">elementId !== TAG_ID.DIV &amp;&amp;</span>
            <span class="s1">elementId !== TAG_ID.P &amp;&amp;</span>
            <span class="s1">p._isSpecialElement(p.openElements.items[i]</span><span class="s0">, </span><span class="s1">elementId)) {</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInButtonScope(TAG_ID.P)) {</span>
        <span class="s1">p._closePElement()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">plaintextStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInButtonScope(TAG_ID.P)) {</span>
        <span class="s1">p._closePElement()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.tokenizer.state = TokenizerMode.PLAINTEXT</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">buttonStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInScope(TAG_ID.BUTTON)) {</span>
        <span class="s1">p.openElements.generateImpliedEndTags()</span><span class="s0">;</span>
        <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.BUTTON)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">aStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">activeElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(TAG_NAMES.A)</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(activeElementEntry) {</span>
        <span class="s1">callAdoptionAgency(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">p.openElements.remove(activeElementEntry.element)</span><span class="s0">;</span>
        <span class="s1">p.activeFormattingElements.removeEntry(activeElementEntry)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.activeFormattingElements.pushElement(p.openElements.current</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">bStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.activeFormattingElements.pushElement(p.openElements.current</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">nobrStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInScope(TAG_ID.NOBR)) {</span>
        <span class="s1">callAdoptionAgency(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.activeFormattingElements.pushElement(p.openElements.current</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">appletStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.activeFormattingElements.insertMarker()</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tableStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.treeAdapter.getDocumentMode(p.document) !== DOCUMENT_MODE.QUIRKS &amp;&amp; p.openElements.hasInButtonScope(TAG_ID.P)) {</span>
        <span class="s1">p._closePElement()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_TABLE</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">areaStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
    <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">isHiddenInput(token) {</span>
    <span class="s0">const </span><span class="s1">inputType = getTokenAttr(token</span><span class="s0">, </span><span class="s1">ATTRS.TYPE)</span><span class="s0">;</span>
    <span class="s0">return </span><span class="s1">inputType != </span><span class="s0">null </span><span class="s1">&amp;&amp; inputType.toLowerCase() === HIDDEN_INPUT_TYPE</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">inputStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(!isHiddenInput(token)) {</span>
        <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
    <span class="s1">}</span>
    <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">paramStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">hrStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInButtonScope(TAG_ID.P)) {</span>
        <span class="s1">p._closePElement()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
    <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">imageStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">token.tagName = TAG_NAMES.IMG</span><span class="s0">;</span>
    <span class="s1">token.tagID = TAG_ID.IMG</span><span class="s0">;</span>
    <span class="s1">areaStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">textareaStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s4">//NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move</span>
    <span class="s4">//on to the next one. (Newlines at the start of textarea elements are ignored as an authoring convenience.)</span>
    <span class="s1">p.skipNextNewLine = </span><span class="s0">true;</span>
    <span class="s1">p.tokenizer.state = TokenizerMode.RCDATA</span><span class="s0">;</span>
    <span class="s1">p.originalInsertionMode = p.insertionMode</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
    <span class="s1">p.insertionMode = InsertionMode.TEXT</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">xmpStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInButtonScope(TAG_ID.P)) {</span>
        <span class="s1">p._closePElement()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
    <span class="s1">p._switchToTextParsing(token</span><span class="s0">, </span><span class="s1">TokenizerMode.RAWTEXT)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">iframeStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
    <span class="s1">p._switchToTextParsing(token</span><span class="s0">, </span><span class="s1">TokenizerMode.RAWTEXT)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">//NOTE: here we assume that we always act as an user agent with enabled plugins, so we parse</span>
<span class="s4">//&lt;noembed&gt; as rawtext.</span>
<span class="s0">function </span><span class="s1">noembedStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._switchToTextParsing(token</span><span class="s0">, </span><span class="s1">TokenizerMode.RAWTEXT)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">selectStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
    <span class="s1">p.insertionMode =</span>
        <span class="s1">p.insertionMode === InsertionMode.IN_TABLE ||</span>
            <span class="s1">p.insertionMode === InsertionMode.IN_CAPTION ||</span>
            <span class="s1">p.insertionMode === InsertionMode.IN_TABLE_BODY ||</span>
            <span class="s1">p.insertionMode === InsertionMode.IN_ROW ||</span>
            <span class="s1">p.insertionMode === InsertionMode.IN_CELL</span>
            <span class="s1">? InsertionMode.IN_SELECT_IN_TABLE</span>
            <span class="s1">: InsertionMode.IN_SELECT</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">optgroupStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.currentTagId === TAG_ID.OPTION) {</span>
        <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">rbStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInScope(TAG_ID.RUBY)) {</span>
        <span class="s1">p.openElements.generateImpliedEndTags()</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">rtStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInScope(TAG_ID.RUBY)) {</span>
        <span class="s1">p.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.RTC)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">mathStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">adjustTokenMathMLAttrs(token)</span><span class="s0">;</span>
    <span class="s1">adjustTokenXMLAttrs(token)</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(token.selfClosing) {</span>
        <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">NS.MATHML)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.MATHML)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">svgStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">adjustTokenSVGAttrs(token)</span><span class="s0">;</span>
    <span class="s1">adjustTokenXMLAttrs(token)</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(token.selfClosing) {</span>
        <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">NS.SVG)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.SVG)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">genericStartTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.I:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.S:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.B:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.U:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.EM:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BIG:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CODE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FONT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SMALL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.STRIKE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.STRONG: {</span>
            <span class="s1">bStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.A: {</span>
            <span class="s1">aStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H1:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H2:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H3:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H4:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H5:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H6: {</span>
            <span class="s1">numberedHeaderStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.P:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.OL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.UL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DIV:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DIR:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NAV:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.MAIN:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.MENU:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.ASIDE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CENTER:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FIGURE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FOOTER:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HEADER:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HGROUP:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DIALOG:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DETAILS:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.ADDRESS:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.ARTICLE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SECTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SUMMARY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FIELDSET:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BLOCKQUOTE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FIGCAPTION: {</span>
            <span class="s1">addressStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.LI:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DT: {</span>
            <span class="s1">listItemStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BR:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.IMG:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.WBR:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.AREA:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.EMBED:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.KEYGEN: {</span>
            <span class="s1">areaStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HR: {</span>
            <span class="s1">hrStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.RB:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.RTC: {</span>
            <span class="s1">rbStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.RT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.RP: {</span>
            <span class="s1">rtStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.PRE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.LISTING: {</span>
            <span class="s1">preStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.XMP: {</span>
            <span class="s1">xmpStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SVG: {</span>
            <span class="s1">svgStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">htmlStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BASE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.LINK:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.META:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.STYLE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TITLE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SCRIPT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BGSOUND:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BASEFONT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BODY: {</span>
            <span class="s1">bodyStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FORM: {</span>
            <span class="s1">formStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOBR: {</span>
            <span class="s1">nobrStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.MATH: {</span>
            <span class="s1">mathStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TABLE: {</span>
            <span class="s1">tableStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.INPUT: {</span>
            <span class="s1">inputStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.PARAM:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TRACK:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SOURCE: {</span>
            <span class="s1">paramStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.IMAGE: {</span>
            <span class="s1">imageStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BUTTON: {</span>
            <span class="s1">buttonStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.APPLET:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.OBJECT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.MARQUEE: {</span>
            <span class="s1">appletStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.IFRAME: {</span>
            <span class="s1">iframeStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SELECT: {</span>
            <span class="s1">selectStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.OPTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.OPTGROUP: {</span>
            <span class="s1">optgroupStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOEMBED: {</span>
            <span class="s1">noembedStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FRAMESET: {</span>
            <span class="s1">framesetStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEXTAREA: {</span>
            <span class="s1">textareaStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOSCRIPT: {</span>
            <span class="s0">if </span><span class="s1">(p.options.scriptingEnabled) {</span>
                <span class="s1">noembedStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">else </span><span class="s1">{</span>
                <span class="s1">genericStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.PLAINTEXT: {</span>
            <span class="s1">plaintextStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TH:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TR:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HEAD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FRAME:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TFOOT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.THEAD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CAPTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP: {</span>
            <span class="s4">// Ignore token</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">genericStartTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">bodyEndTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInScope(TAG_ID.BODY)) {</span>
        <span class="s1">p.insertionMode = InsertionMode.AFTER_BODY</span><span class="s0">;</span>
        <span class="s4">//NOTE: &lt;body&gt; is never popped from the stack, so we need to updated</span>
        <span class="s4">//the end location explicitly.</span>
        <span class="s0">if </span><span class="s1">(p.options.sourceCodeLocationInfo) {</span>
            <span class="s0">const </span><span class="s1">bodyElement = p.openElements.tryPeekProperlyNestedBodyElement()</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(bodyElement) {</span>
                <span class="s1">p._setEndLocation(bodyElement</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">htmlEndTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInScope(TAG_ID.BODY)) {</span>
        <span class="s1">p.insertionMode = InsertionMode.AFTER_BODY</span><span class="s0">;</span>
        <span class="s1">endTagAfterBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">addressEndTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInScope(tn)) {</span>
        <span class="s1">p.openElements.generateImpliedEndTags()</span><span class="s0">;</span>
        <span class="s1">p.openElements.popUntilTagNamePopped(tn)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">formEndTagInBody(p) {</span>
    <span class="s0">const </span><span class="s1">inTemplate = p.openElements.tmplCount &gt; </span><span class="s3">0</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">{ formElement } = p</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(!inTemplate) {</span>
        <span class="s1">p.formElement = </span><span class="s0">null;</span>
    <span class="s1">}</span>
    <span class="s0">if </span><span class="s1">((formElement || inTemplate) &amp;&amp; p.openElements.hasInScope(TAG_ID.FORM)) {</span>
        <span class="s1">p.openElements.generateImpliedEndTags()</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(inTemplate) {</span>
            <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.FORM)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(formElement) {</span>
            <span class="s1">p.openElements.remove(formElement)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">pEndTagInBody(p) {</span>
    <span class="s0">if </span><span class="s1">(!p.openElements.hasInButtonScope(TAG_ID.P)) {</span>
        <span class="s1">p._insertFakeElement(TAG_NAMES.P</span><span class="s0">, </span><span class="s1">TAG_ID.P)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p._closePElement()</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">liEndTagInBody(p) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInListItemScope(TAG_ID.LI)) {</span>
        <span class="s1">p.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.LI)</span><span class="s0">;</span>
        <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.LI)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">ddEndTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInScope(tn)) {</span>
        <span class="s1">p.openElements.generateImpliedEndTagsWithExclusion(tn)</span><span class="s0">;</span>
        <span class="s1">p.openElements.popUntilTagNamePopped(tn)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">numberedHeaderEndTagInBody(p) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasNumberedHeaderInScope()) {</span>
        <span class="s1">p.openElements.generateImpliedEndTags()</span><span class="s0">;</span>
        <span class="s1">p.openElements.popUntilNumberedHeaderPopped()</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">appletEndTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInScope(tn)) {</span>
        <span class="s1">p.openElements.generateImpliedEndTags()</span><span class="s0">;</span>
        <span class="s1">p.openElements.popUntilTagNamePopped(tn)</span><span class="s0">;</span>
        <span class="s1">p.activeFormattingElements.clearToLastMarker()</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">brEndTagInBody(p) {</span>
    <span class="s1">p._reconstructActiveFormattingElements()</span><span class="s0">;</span>
    <span class="s1">p._insertFakeElement(TAG_NAMES.BR</span><span class="s0">, </span><span class="s1">TAG_ID.BR)</span><span class="s0">;</span>
    <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">genericEndTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagName</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">tid = token.tagID</span><span class="s0">;</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = p.openElements.stackTop</span><span class="s0">; </span><span class="s1">i &gt; </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
        <span class="s0">const </span><span class="s1">element = p.openElements.items[i]</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">elementId = p.openElements.tagIDs[i]</span><span class="s0">;</span>
        <span class="s4">// Compare the tag name here, as the tag might not be a known tag with an ID.</span>
        <span class="s0">if </span><span class="s1">(tid === elementId &amp;&amp; (tid !== TAG_ID.UNKNOWN || p.treeAdapter.getTagName(element) === tn)) {</span>
            <span class="s1">p.openElements.generateImpliedEndTagsWithExclusion(tid)</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(p.openElements.stackTop &gt;= i)</span>
                <span class="s1">p.openElements.shortenToLength(i)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(p._isSpecialElement(element</span><span class="s0">, </span><span class="s1">elementId)) {</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.A:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.B:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.I:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.S:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.U:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.EM:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BIG:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CODE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FONT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOBR:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SMALL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.STRIKE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.STRONG: {</span>
            <span class="s1">callAdoptionAgency(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.P: {</span>
            <span class="s1">pEndTagInBody(p)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.UL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.OL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DIR:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DIV:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NAV:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.PRE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.MAIN:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.MENU:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.ASIDE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BUTTON:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CENTER:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FIGURE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FOOTER:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HEADER:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HGROUP:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DIALOG:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.ADDRESS:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.ARTICLE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DETAILS:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SECTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SUMMARY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.LISTING:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FIELDSET:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BLOCKQUOTE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FIGCAPTION: {</span>
            <span class="s1">addressEndTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.LI: {</span>
            <span class="s1">liEndTagInBody(p)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.DT: {</span>
            <span class="s1">ddEndTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H1:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H2:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H3:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H4:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H5:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.H6: {</span>
            <span class="s1">numberedHeaderEndTagInBody(p)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BR: {</span>
            <span class="s1">brEndTagInBody(p)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BODY: {</span>
            <span class="s1">bodyEndTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">htmlEndTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FORM: {</span>
            <span class="s1">formEndTagInBody(p)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.APPLET:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.OBJECT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.MARQUEE: {</span>
            <span class="s1">appletEndTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">templateEndTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">genericEndTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">eofInBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.tmplInsertionModeStack.length &gt; </span><span class="s3">0</span><span class="s1">) {</span>
        <span class="s1">eofInTemplate(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">stopParsing(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;text&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">endTagInText(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">var </span><span class="s1">_a</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(token.tagID === TAG_ID.SCRIPT) {</span>
        <span class="s1">(_a = p.scriptHandler) === </span><span class="s0">null </span><span class="s1">|| _a === </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">: _a.call(p</span><span class="s0">, </span><span class="s1">p.openElements.current)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = p.originalInsertionMode</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">eofInText(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._err(token</span><span class="s0">, </span><span class="s1">ERR.eofInElementThatCanContainOnlyText)</span><span class="s0">;</span>
    <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = p.originalInsertionMode</span><span class="s0">;</span>
    <span class="s1">p.onEof(token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in table&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">characterInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(TABLE_STRUCTURE_TAGS.has(p.openElements.currentTagId)) {</span>
        <span class="s1">p.pendingCharacterTokens.length = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s1">p.hasNonWhitespacePendingCharacterToken = </span><span class="s0">false;</span>
        <span class="s1">p.originalInsertionMode = p.insertionMode</span><span class="s0">;</span>
        <span class="s1">p.insertionMode = InsertionMode.IN_TABLE_TEXT</span><span class="s0">;</span>
        <span class="s0">switch </span><span class="s1">(token.type) {</span>
            <span class="s0">case </span><span class="s1">TokenType.CHARACTER: {</span>
                <span class="s1">characterInTableText(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">TokenType.WHITESPACE_CHARACTER: {</span>
                <span class="s1">whitespaceCharacterInTableText(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s1">}</span>
            <span class="s4">// Ignore null</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">tokenInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">captionStartTagInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.openElements.clearBackToTableContext()</span><span class="s0">;</span>
    <span class="s1">p.activeFormattingElements.insertMarker()</span><span class="s0">;</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_CAPTION</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">colgroupStartTagInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.openElements.clearBackToTableContext()</span><span class="s0">;</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_COLUMN_GROUP</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">colStartTagInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.openElements.clearBackToTableContext()</span><span class="s0">;</span>
    <span class="s1">p._insertFakeElement(TAG_NAMES.COLGROUP</span><span class="s0">, </span><span class="s1">TAG_ID.COLGROUP)</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_COLUMN_GROUP</span><span class="s0">;</span>
    <span class="s1">startTagInColumnGroup(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tbodyStartTagInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.openElements.clearBackToTableContext()</span><span class="s0">;</span>
    <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_TABLE_BODY</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tdStartTagInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.openElements.clearBackToTableContext()</span><span class="s0">;</span>
    <span class="s1">p._insertFakeElement(TAG_NAMES.TBODY</span><span class="s0">, </span><span class="s1">TAG_ID.TBODY)</span><span class="s0">;</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_TABLE_BODY</span><span class="s0">;</span>
    <span class="s1">startTagInTableBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tableStartTagInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(TAG_ID.TABLE)) {</span>
        <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.TABLE)</span><span class="s0">;</span>
        <span class="s1">p._resetInsertionMode()</span><span class="s0">;</span>
        <span class="s1">p._processStartTag(token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">inputStartTagInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(isHiddenInput(token)) {</span>
        <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">tokenInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">formStartTagInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(!p.formElement &amp;&amp; p.openElements.tmplCount === </span><span class="s3">0</span><span class="s1">) {</span>
        <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
        <span class="s1">p.formElement = p.openElements.current</span><span class="s0">;</span>
        <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">startTagInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TH:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TR: {</span>
            <span class="s1">tdStartTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.STYLE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SCRIPT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL: {</span>
            <span class="s1">colStartTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FORM: {</span>
            <span class="s1">formStartTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TABLE: {</span>
            <span class="s1">tableStartTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TFOOT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.THEAD: {</span>
            <span class="s1">tbodyStartTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.INPUT: {</span>
            <span class="s1">inputStartTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CAPTION: {</span>
            <span class="s1">captionStartTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP: {</span>
            <span class="s1">colgroupStartTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">tokenInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TABLE: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(TAG_ID.TABLE)) {</span>
                <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.TABLE)</span><span class="s0">;</span>
                <span class="s1">p._resetInsertionMode()</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">templateEndTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CAPTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TFOOT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TH:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.THEAD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TR: {</span>
            <span class="s4">// Ignore token</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">tokenInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">savedFosterParentingState = p.fosterParentingEnabled</span><span class="s0">;</span>
    <span class="s1">p.fosterParentingEnabled = </span><span class="s0">true;</span>
    <span class="s4">// Process token in `In Body` mode</span>
    <span class="s1">modeInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">p.fosterParentingEnabled = savedFosterParentingState</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in table text&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">whitespaceCharacterInTableText(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.pendingCharacterTokens.push(token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">characterInTableText(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.pendingCharacterTokens.push(token)</span><span class="s0">;</span>
    <span class="s1">p.hasNonWhitespacePendingCharacterToken = </span><span class="s0">true;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenInTableText(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(p.hasNonWhitespacePendingCharacterToken) {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">; </span><span class="s1">i &lt; p.pendingCharacterTokens.length</span><span class="s0">; </span><span class="s1">i++) {</span>
            <span class="s1">tokenInTable(p</span><span class="s0">, </span><span class="s1">p.pendingCharacterTokens[i])</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">; </span><span class="s1">i &lt; p.pendingCharacterTokens.length</span><span class="s0">; </span><span class="s1">i++) {</span>
            <span class="s1">p._insertCharacters(p.pendingCharacterTokens[i])</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">p.insertionMode = p.originalInsertionMode</span><span class="s0">;</span>
    <span class="s1">p._processToken(token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in caption&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">const </span><span class="s1">TABLE_VOID_ELEMENTS = </span><span class="s0">new </span><span class="s1">Set([TAG_ID.CAPTION</span><span class="s0">, </span><span class="s1">TAG_ID.COL</span><span class="s0">, </span><span class="s1">TAG_ID.COLGROUP</span><span class="s0">, </span><span class="s1">TAG_ID.TBODY</span><span class="s0">, </span><span class="s1">TAG_ID.TD</span><span class="s0">, </span><span class="s1">TAG_ID.TFOOT</span><span class="s0">, </span><span class="s1">TAG_ID.TH</span><span class="s0">, </span><span class="s1">TAG_ID.THEAD</span><span class="s0">, </span><span class="s1">TAG_ID.TR])</span><span class="s0">;</span>
<span class="s0">function </span><span class="s1">startTagInCaption(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(TABLE_VOID_ELEMENTS.has(tn)) {</span>
        <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(TAG_ID.CAPTION)) {</span>
            <span class="s1">p.openElements.generateImpliedEndTags()</span><span class="s0">;</span>
            <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.CAPTION)</span><span class="s0">;</span>
            <span class="s1">p.activeFormattingElements.clearToLastMarker()</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_TABLE</span><span class="s0">;</span>
            <span class="s1">startTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInCaption(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">switch </span><span class="s1">(tn) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CAPTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TABLE: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(TAG_ID.CAPTION)) {</span>
                <span class="s1">p.openElements.generateImpliedEndTags()</span><span class="s0">;</span>
                <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.CAPTION)</span><span class="s0">;</span>
                <span class="s1">p.activeFormattingElements.clearToLastMarker()</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_TABLE</span><span class="s0">;</span>
                <span class="s0">if </span><span class="s1">(tn === TAG_ID.TABLE) {</span>
                    <span class="s1">endTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TFOOT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TH:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.THEAD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TR: {</span>
            <span class="s4">// Ignore token</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">endTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in column group&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagInColumnGroup(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL: {</span>
            <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">tokenInColumnGroup(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInColumnGroup(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.currentTagId === TAG_ID.COLGROUP) {</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_TABLE</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">templateEndTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL: {</span>
            <span class="s4">// Ignore token</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">tokenInColumnGroup(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenInColumnGroup(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.currentTagId === TAG_ID.COLGROUP) {</span>
        <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
        <span class="s1">p.insertionMode = InsertionMode.IN_TABLE</span><span class="s0">;</span>
        <span class="s1">p._processToken(token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in table body&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagInTableBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TR: {</span>
            <span class="s1">p.openElements.clearBackToTableBodyContext()</span><span class="s0">;</span>
            <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_ROW</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TH:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TD: {</span>
            <span class="s1">p.openElements.clearBackToTableBodyContext()</span><span class="s0">;</span>
            <span class="s1">p._insertFakeElement(TAG_NAMES.TR</span><span class="s0">, </span><span class="s1">TAG_ID.TR)</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_ROW</span><span class="s0">;</span>
            <span class="s1">startTagInRow(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CAPTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TFOOT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.THEAD: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasTableBodyContextInTableScope()) {</span>
                <span class="s1">p.openElements.clearBackToTableBodyContext()</span><span class="s0">;</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_TABLE</span><span class="s0">;</span>
                <span class="s1">startTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">startTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInTableBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TFOOT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.THEAD: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(tn)) {</span>
                <span class="s1">p.openElements.clearBackToTableBodyContext()</span><span class="s0">;</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_TABLE</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TABLE: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasTableBodyContextInTableScope()) {</span>
                <span class="s1">p.openElements.clearBackToTableBodyContext()</span><span class="s0">;</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_TABLE</span><span class="s0">;</span>
                <span class="s1">endTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CAPTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TH:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TR: {</span>
            <span class="s4">// Ignore token</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">endTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in row&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagInRow(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TH:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TD: {</span>
            <span class="s1">p.openElements.clearBackToTableRowContext()</span><span class="s0">;</span>
            <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_CELL</span><span class="s0">;</span>
            <span class="s1">p.activeFormattingElements.insertMarker()</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CAPTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TFOOT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.THEAD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TR: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(TAG_ID.TR)) {</span>
                <span class="s1">p.openElements.clearBackToTableRowContext()</span><span class="s0">;</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_TABLE_BODY</span><span class="s0">;</span>
                <span class="s1">startTagInTableBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">startTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInRow(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TR: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(TAG_ID.TR)) {</span>
                <span class="s1">p.openElements.clearBackToTableRowContext()</span><span class="s0">;</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_TABLE_BODY</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TABLE: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(TAG_ID.TR)) {</span>
                <span class="s1">p.openElements.clearBackToTableRowContext()</span><span class="s0">;</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_TABLE_BODY</span><span class="s0">;</span>
                <span class="s1">endTagInTableBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TFOOT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.THEAD: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(token.tagID) || p.openElements.hasInTableScope(TAG_ID.TR)) {</span>
                <span class="s1">p.openElements.clearBackToTableRowContext()</span><span class="s0">;</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_TABLE_BODY</span><span class="s0">;</span>
                <span class="s1">endTagInTableBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CAPTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TH: {</span>
            <span class="s4">// Ignore end tag</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">endTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in cell&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagInCell(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(TABLE_VOID_ELEMENTS.has(tn)) {</span>
        <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(TAG_ID.TD) || p.openElements.hasInTableScope(TAG_ID.TH)) {</span>
            <span class="s1">p._closeTableCell()</span><span class="s0">;</span>
            <span class="s1">startTagInRow(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInCell(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">switch </span><span class="s1">(tn) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TH: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(tn)) {</span>
                <span class="s1">p.openElements.generateImpliedEndTags()</span><span class="s0">;</span>
                <span class="s1">p.openElements.popUntilTagNamePopped(tn)</span><span class="s0">;</span>
                <span class="s1">p.activeFormattingElements.clearToLastMarker()</span><span class="s0">;</span>
                <span class="s1">p.insertionMode = InsertionMode.IN_ROW</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TABLE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TFOOT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.THEAD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TR: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(tn)) {</span>
                <span class="s1">p._closeTableCell()</span><span class="s0">;</span>
                <span class="s1">endTagInRow(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CAPTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s4">// Ignore token</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">endTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in select&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagInSelect(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.OPTION: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.currentTagId === TAG_ID.OPTION) {</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.OPTGROUP: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.currentTagId === TAG_ID.OPTION) {</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(p.openElements.currentTagId === TAG_ID.OPTGROUP) {</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.INPUT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.KEYGEN:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEXTAREA:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SELECT: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInSelectScope(TAG_ID.SELECT)) {</span>
                <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.SELECT)</span><span class="s0">;</span>
                <span class="s1">p._resetInsertionMode()</span><span class="s0">;</span>
                <span class="s0">if </span><span class="s1">(token.tagID !== TAG_ID.SELECT) {</span>
                    <span class="s1">p._processStartTag(token)</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SCRIPT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s4">// Do nothing</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInSelect(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.OPTGROUP: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.stackTop &gt; </span><span class="s3">0 </span><span class="s1">&amp;&amp;</span>
                <span class="s1">p.openElements.currentTagId === TAG_ID.OPTION &amp;&amp;</span>
                <span class="s1">p.openElements.tagIDs[p.openElements.stackTop - </span><span class="s3">1</span><span class="s1">] === TAG_ID.OPTGROUP) {</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(p.openElements.currentTagId === TAG_ID.OPTGROUP) {</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.OPTION: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.currentTagId === TAG_ID.OPTION) {</span>
                <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SELECT: {</span>
            <span class="s0">if </span><span class="s1">(p.openElements.hasInSelectScope(TAG_ID.SELECT)) {</span>
                <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.SELECT)</span><span class="s0">;</span>
                <span class="s1">p._resetInsertionMode()</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE: {</span>
            <span class="s1">templateEndTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s4">// Do nothing</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in select in table&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagInSelectInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(tn === TAG_ID.CAPTION ||</span>
        <span class="s1">tn === TAG_ID.TABLE ||</span>
        <span class="s1">tn === TAG_ID.TBODY ||</span>
        <span class="s1">tn === TAG_ID.TFOOT ||</span>
        <span class="s1">tn === TAG_ID.THEAD ||</span>
        <span class="s1">tn === TAG_ID.TR ||</span>
        <span class="s1">tn === TAG_ID.TD ||</span>
        <span class="s1">tn === TAG_ID.TH) {</span>
        <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.SELECT)</span><span class="s0">;</span>
        <span class="s1">p._resetInsertionMode()</span><span class="s0">;</span>
        <span class="s1">p._processStartTag(token)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">startTagInSelect(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInSelectInTable(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">const </span><span class="s1">tn = token.tagID</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(tn === TAG_ID.CAPTION ||</span>
        <span class="s1">tn === TAG_ID.TABLE ||</span>
        <span class="s1">tn === TAG_ID.TBODY ||</span>
        <span class="s1">tn === TAG_ID.TFOOT ||</span>
        <span class="s1">tn === TAG_ID.THEAD ||</span>
        <span class="s1">tn === TAG_ID.TR ||</span>
        <span class="s1">tn === TAG_ID.TD ||</span>
        <span class="s1">tn === TAG_ID.TH) {</span>
        <span class="s0">if </span><span class="s1">(p.openElements.hasInTableScope(tn)) {</span>
            <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.SELECT)</span><span class="s0">;</span>
            <span class="s1">p._resetInsertionMode()</span><span class="s0">;</span>
            <span class="s1">p.onEndTag(token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">endTagInSelect(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in template&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagInTemplate(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s4">// First, handle tags that can start without a mode change</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BASE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BASEFONT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.BGSOUND:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.LINK:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.META:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOFRAMES:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.SCRIPT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.STYLE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TEMPLATE:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TITLE: {</span>
            <span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s4">// Re-process the token in the appropriate mode</span>
        <span class="s0">case </span><span class="s1">TAG_ID.CAPTION:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COLGROUP:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TBODY:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TFOOT:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.THEAD: {</span>
            <span class="s1">p.tmplInsertionModeStack[</span><span class="s3">0</span><span class="s1">] = InsertionMode.IN_TABLE</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_TABLE</span><span class="s0">;</span>
            <span class="s1">startTagInTable(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.COL: {</span>
            <span class="s1">p.tmplInsertionModeStack[</span><span class="s3">0</span><span class="s1">] = InsertionMode.IN_COLUMN_GROUP</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_COLUMN_GROUP</span><span class="s0">;</span>
            <span class="s1">startTagInColumnGroup(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TR: {</span>
            <span class="s1">p.tmplInsertionModeStack[</span><span class="s3">0</span><span class="s1">] = InsertionMode.IN_TABLE_BODY</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_TABLE_BODY</span><span class="s0">;</span>
            <span class="s1">startTagInTableBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TD:</span>
        <span class="s0">case </span><span class="s1">TAG_ID.TH: {</span>
            <span class="s1">p.tmplInsertionModeStack[</span><span class="s3">0</span><span class="s1">] = InsertionMode.IN_ROW</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_ROW</span><span class="s0">;</span>
            <span class="s1">startTagInRow(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">default</span><span class="s1">: {</span>
            <span class="s1">p.tmplInsertionModeStack[</span><span class="s3">0</span><span class="s1">] = InsertionMode.IN_BODY</span><span class="s0">;</span>
            <span class="s1">p.insertionMode = InsertionMode.IN_BODY</span><span class="s0">;</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInTemplate(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(token.tagID === TAG_ID.TEMPLATE) {</span>
        <span class="s1">templateEndTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">eofInTemplate(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(p.openElements.tmplCount &gt; </span><span class="s3">0</span><span class="s1">) {</span>
        <span class="s1">p.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE)</span><span class="s0">;</span>
        <span class="s1">p.activeFormattingElements.clearToLastMarker()</span><span class="s0">;</span>
        <span class="s1">p.tmplInsertionModeStack.shift()</span><span class="s0">;</span>
        <span class="s1">p._resetInsertionMode()</span><span class="s0">;</span>
        <span class="s1">p.onEof(token)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">stopParsing(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;after body&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagAfterBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(token.tagID === TAG_ID.HTML) {</span>
        <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">tokenAfterBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagAfterBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">var </span><span class="s1">_a</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(token.tagID === TAG_ID.HTML) {</span>
        <span class="s0">if </span><span class="s1">(!p.fragmentContext) {</span>
            <span class="s1">p.insertionMode = InsertionMode.AFTER_AFTER_BODY</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s4">//NOTE: &lt;html&gt; is never popped from the stack, so we need to updated</span>
        <span class="s4">//the end location explicitly.</span>
        <span class="s0">if </span><span class="s1">(p.options.sourceCodeLocationInfo &amp;&amp; p.openElements.tagIDs[</span><span class="s3">0</span><span class="s1">] === TAG_ID.HTML) {</span>
            <span class="s1">p._setEndLocation(p.openElements.items[</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s4">// Update the body element, if it doesn't have an end tag</span>
            <span class="s0">const </span><span class="s1">bodyElement = p.openElements.items[</span><span class="s3">1</span><span class="s1">]</span><span class="s0">;</span>
            <span class="s0">if </span><span class="s1">(bodyElement &amp;&amp; !((_a = p.treeAdapter.getNodeSourceCodeLocation(bodyElement)) === </span><span class="s0">null </span><span class="s1">|| _a === </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">? </span><span class="s0">void </span><span class="s3">0 </span><span class="s1">: _a.endTag)) {</span>
                <span class="s1">p._setEndLocation(bodyElement</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">tokenAfterBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenAfterBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_BODY</span><span class="s0">;</span>
    <span class="s1">modeInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;in frameset&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagInFrameset(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FRAMESET: {</span>
            <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.FRAME: {</span>
            <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">NS.HTML)</span><span class="s0">;</span>
            <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOFRAMES: {</span>
            <span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s4">// Do nothing</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInFrameset(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(token.tagID === TAG_ID.FRAMESET &amp;&amp; !p.openElements.isRootHtmlElementCurrent()) {</span>
        <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(!p.fragmentContext &amp;&amp; p.openElements.currentTagId !== TAG_ID.FRAMESET) {</span>
            <span class="s1">p.insertionMode = InsertionMode.AFTER_FRAMESET</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;after frameset&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagAfterFrameset(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOFRAMES: {</span>
            <span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s4">// Do nothing</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagAfterFrameset(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(token.tagID === TAG_ID.HTML) {</span>
        <span class="s1">p.insertionMode = InsertionMode.AFTER_AFTER_FRAMESET</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The &quot;after after body&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagAfterAfterBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(token.tagID === TAG_ID.HTML) {</span>
        <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s1">tokenAfterAfterBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">tokenAfterAfterBody(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p.insertionMode = InsertionMode.IN_BODY</span><span class="s0">;</span>
    <span class="s1">modeInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s4">// The &quot;after after frameset&quot; insertion mode</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">startTagAfterAfterFrameset(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">switch </span><span class="s1">(token.tagID) {</span>
        <span class="s0">case </span><span class="s1">TAG_ID.HTML: {</span>
            <span class="s1">startTagInBody(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">case </span><span class="s1">TAG_ID.NOFRAMES: {</span>
            <span class="s1">startTagInHead(p</span><span class="s0">, </span><span class="s1">token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s4">// Do nothing</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s4">// The rules for parsing tokens in foreign content</span>
<span class="s4">//------------------------------------------------------------------</span>
<span class="s0">function </span><span class="s1">nullCharacterInForeignContent(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">token.chars = REPLACEMENT_CHARACTER</span><span class="s0">;</span>
    <span class="s1">p._insertCharacters(token)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">characterInForeignContent(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s1">p._insertCharacters(token)</span><span class="s0">;</span>
    <span class="s1">p.framesetOk = </span><span class="s0">false;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">popUntilHtmlOrIntegrationPoint(p) {</span>
    <span class="s0">while </span><span class="s1">(p.treeAdapter.getNamespaceURI(p.openElements.current) !== NS.HTML &amp;&amp;</span>
        <span class="s1">!p._isIntegrationPoint(p.openElements.currentTagId</span><span class="s0">, </span><span class="s1">p.openElements.current)) {</span>
        <span class="s1">p.openElements.pop()</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">startTagInForeignContent(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(causesExit(token)) {</span>
        <span class="s1">popUntilHtmlOrIntegrationPoint(p)</span><span class="s0">;</span>
        <span class="s1">p._startTagOutsideForeignContent(token)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">else </span><span class="s1">{</span>
        <span class="s0">const </span><span class="s1">current = p._getAdjustedCurrentElement()</span><span class="s0">;</span>
        <span class="s0">const </span><span class="s1">currentNs = p.treeAdapter.getNamespaceURI(current)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(currentNs === NS.MATHML) {</span>
            <span class="s1">adjustTokenMathMLAttrs(token)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if </span><span class="s1">(currentNs === NS.SVG) {</span>
            <span class="s1">adjustTokenSVGTagName(token)</span><span class="s0">;</span>
            <span class="s1">adjustTokenSVGAttrs(token)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">adjustTokenXMLAttrs(token)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(token.selfClosing) {</span>
            <span class="s1">p._appendElement(token</span><span class="s0">, </span><span class="s1">currentNs)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s1">p._insertElement(token</span><span class="s0">, </span><span class="s1">currentNs)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">token.ackSelfClosing = </span><span class="s0">true;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">endTagInForeignContent(p</span><span class="s0">, </span><span class="s1">token) {</span>
    <span class="s0">if </span><span class="s1">(token.tagID === TAG_ID.P || token.tagID === TAG_ID.BR) {</span>
        <span class="s1">popUntilHtmlOrIntegrationPoint(p)</span><span class="s0">;</span>
        <span class="s1">p._endTagOutsideForeignContent(token)</span><span class="s0">;</span>
        <span class="s0">return;</span>
    <span class="s1">}</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">i = p.openElements.stackTop</span><span class="s0">; </span><span class="s1">i &gt; </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--) {</span>
        <span class="s0">const </span><span class="s1">element = p.openElements.items[i]</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(p.treeAdapter.getNamespaceURI(element) === NS.HTML) {</span>
            <span class="s1">p._endTagOutsideForeignContent(token)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">const </span><span class="s1">tagName = p.treeAdapter.getTagName(element)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(tagName.toLowerCase() === token.tagName) {</span>
            <span class="s4">//NOTE: update the token tag name for `_setEndLocation`.</span>
            <span class="s1">token.tagName = tagName</span><span class="s0">;</span>
            <span class="s1">p.openElements.shortenToLength(i)</span><span class="s0">;</span>
            <span class="s0">break;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s0">function </span><span class="s1">getEscaper(regex</span><span class="s0">, </span><span class="s1">map) {</span>
    <span class="s0">return function </span><span class="s1">escape(data) {</span>
        <span class="s0">let </span><span class="s1">match</span><span class="s0">;</span>
        <span class="s0">let </span><span class="s1">lastIdx = </span><span class="s3">0</span><span class="s0">;</span>
        <span class="s0">let </span><span class="s1">result = </span><span class="s2">&quot;&quot;</span><span class="s0">;</span>
        <span class="s0">while </span><span class="s1">((match = regex.exec(data))) {</span>
            <span class="s0">if </span><span class="s1">(lastIdx !== match.index) {</span>
                <span class="s1">result += data.substring(lastIdx</span><span class="s0">, </span><span class="s1">match.index)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s4">// We know that this chararcter will be in the map.</span>
            <span class="s1">result += map.get(match[</span><span class="s3">0</span><span class="s1">].charCodeAt(</span><span class="s3">0</span><span class="s1">))</span><span class="s0">;</span>
            <span class="s4">// Every match will be of length 1</span>
            <span class="s1">lastIdx = match.index + </span><span class="s3">1</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">return </span><span class="s1">result + data.substring(lastIdx)</span><span class="s0">;</span>
    <span class="s1">}</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s5">/**</span>
 <span class="s5">* Encodes all characters that have to be escaped in HTML attributes,</span>
 <span class="s5">* following {</span><span class="s6">@link </span><span class="s5">https://html.spec.whatwg.org/multipage/parsing.html#escapingString}.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">data String to escape.</span>
 <span class="s5">*/</span>
<span class="s0">const </span><span class="s1">escapeAttribute = getEscaper(</span><span class="s3">/[&quot;&amp;\u00A0]/g</span><span class="s0">, new </span><span class="s1">Map([</span>
    <span class="s1">[</span><span class="s3">34</span><span class="s0">, </span><span class="s2">&quot;&amp;quot;&quot;</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">38</span><span class="s0">, </span><span class="s2">&quot;&amp;amp;&quot;</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">160</span><span class="s0">, </span><span class="s2">&quot;&amp;nbsp;&quot;</span><span class="s1">]</span><span class="s0">,</span>
<span class="s1">]))</span><span class="s0">;</span>
<span class="s5">/**</span>
 <span class="s5">* Encodes all characters that have to be escaped in HTML text,</span>
 <span class="s5">* following {</span><span class="s6">@link </span><span class="s5">https://html.spec.whatwg.org/multipage/parsing.html#escapingString}.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">data String to escape.</span>
 <span class="s5">*/</span>
<span class="s0">const </span><span class="s1">escapeText = getEscaper(</span><span class="s3">/[&amp;&lt;&gt;\u00A0]/g</span><span class="s0">, new </span><span class="s1">Map([</span>
    <span class="s1">[</span><span class="s3">38</span><span class="s0">, </span><span class="s2">&quot;&amp;amp;&quot;</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">60</span><span class="s0">, </span><span class="s2">&quot;&amp;lt;&quot;</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">62</span><span class="s0">, </span><span class="s2">&quot;&amp;gt;&quot;</span><span class="s1">]</span><span class="s0">,</span>
    <span class="s1">[</span><span class="s3">160</span><span class="s0">, </span><span class="s2">&quot;&amp;nbsp;&quot;</span><span class="s1">]</span><span class="s0">,</span>
<span class="s1">]))</span><span class="s0">;</span>

<span class="s4">// Sets</span>
<span class="s0">const </span><span class="s1">VOID_ELEMENTS = </span><span class="s0">new </span><span class="s1">Set([</span>
    <span class="s1">TAG_NAMES.AREA</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.BASE</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.BASEFONT</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.BGSOUND</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.BR</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.COL</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.EMBED</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.FRAME</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.HR</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.IMG</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.INPUT</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.KEYGEN</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.LINK</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.META</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.PARAM</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.SOURCE</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.TRACK</span><span class="s0">,</span>
    <span class="s1">TAG_NAMES.WBR</span><span class="s0">,</span>
<span class="s1">])</span><span class="s0">;</span>
<span class="s0">function </span><span class="s1">isVoidElement(node</span><span class="s0">, </span><span class="s1">options) {</span>
    <span class="s0">return </span><span class="s1">(options.treeAdapter.isElementNode(node) &amp;&amp;</span>
        <span class="s1">options.treeAdapter.getNamespaceURI(node) === NS.HTML &amp;&amp;</span>
        <span class="s1">VOID_ELEMENTS.has(options.treeAdapter.getTagName(node)))</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">const </span><span class="s1">defaultOpts = { treeAdapter: defaultTreeAdapter</span><span class="s0">, </span><span class="s1">scriptingEnabled: </span><span class="s0">true </span><span class="s1">}</span><span class="s0">;</span>
<span class="s5">/**</span>
 <span class="s5">* Serializes an AST node to an HTML string.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@example</span>
 <span class="s5">*</span>
 <span class="s5">* ```js</span>
 <span class="s5">* const parse5 = require('parse5');</span>
 <span class="s5">*</span>
 <span class="s5">* const document = parse5.parse('&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hi there!&lt;/body&gt;&lt;/html&gt;');</span>
 <span class="s5">*</span>
 <span class="s5">* // Serializes a document.</span>
 <span class="s5">* const html = parse5.serialize(document);</span>
 <span class="s5">*</span>
 <span class="s5">* // Serializes the &lt;html&gt; element content.</span>
 <span class="s5">* const str = parse5.serialize(document.childNodes[1]);</span>
 <span class="s5">*</span>
 <span class="s5">* console.log(str); //&gt; '&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hi there!&lt;/body&gt;'</span>
 <span class="s5">* ```</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">node Node to serialize.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">options Serialization options.</span>
 <span class="s5">*/</span>
<span class="s0">function </span><span class="s1">serialize(node</span><span class="s0">, </span><span class="s1">options) {</span>
    <span class="s0">const </span><span class="s1">opts = { ...defaultOpts</span><span class="s0">, </span><span class="s1">...options }</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(isVoidElement(node</span><span class="s0">, </span><span class="s1">opts)) {</span>
        <span class="s0">return </span><span class="s2">''</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">return </span><span class="s1">serializeChildNodes(node</span><span class="s0">, </span><span class="s1">opts)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s5">/**</span>
 <span class="s5">* Serializes an AST element node to an HTML string, including the element node.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@example</span>
 <span class="s5">*</span>
 <span class="s5">* ```js</span>
 <span class="s5">* const parse5 = require('parse5');</span>
 <span class="s5">*</span>
 <span class="s5">* const document = parse5.parseFragment('&lt;div&gt;Hello, &lt;b&gt;world&lt;/b&gt;!&lt;/div&gt;');</span>
 <span class="s5">*</span>
 <span class="s5">* // Serializes the &lt;div&gt; element.</span>
 <span class="s5">* const html = parse5.serializeOuter(document.childNodes[0]);</span>
 <span class="s5">*</span>
 <span class="s5">* console.log(str); //&gt; '&lt;div&gt;Hello, &lt;b&gt;world&lt;/b&gt;!&lt;/div&gt;'</span>
 <span class="s5">* ```</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">node Node to serialize.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">options Serialization options.</span>
 <span class="s5">*/</span>
<span class="s0">function </span><span class="s1">serializeOuter(node</span><span class="s0">, </span><span class="s1">options) {</span>
    <span class="s0">const </span><span class="s1">opts = { ...defaultOpts</span><span class="s0">, </span><span class="s1">...options }</span><span class="s0">;</span>
    <span class="s0">return </span><span class="s1">serializeNode(node</span><span class="s0">, </span><span class="s1">opts)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">serializeChildNodes(parentNode</span><span class="s0">, </span><span class="s1">options) {</span>
    <span class="s0">let </span><span class="s1">html = </span><span class="s2">''</span><span class="s0">;</span>
    <span class="s4">// Get container of the child nodes</span>
    <span class="s0">const </span><span class="s1">container = options.treeAdapter.isElementNode(parentNode) &amp;&amp;</span>
        <span class="s1">options.treeAdapter.getTagName(parentNode) === TAG_NAMES.TEMPLATE &amp;&amp;</span>
        <span class="s1">options.treeAdapter.getNamespaceURI(parentNode) === NS.HTML</span>
        <span class="s1">? options.treeAdapter.getTemplateContent(parentNode)</span>
        <span class="s1">: parentNode</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">childNodes = options.treeAdapter.getChildNodes(container)</span><span class="s0">;</span>
    <span class="s0">if </span><span class="s1">(childNodes) {</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">const </span><span class="s1">currentNode of childNodes) {</span>
            <span class="s1">html += serializeNode(currentNode</span><span class="s0">, </span><span class="s1">options)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">return </span><span class="s1">html</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">serializeNode(node</span><span class="s0">, </span><span class="s1">options) {</span>
    <span class="s0">if </span><span class="s1">(options.treeAdapter.isElementNode(node)) {</span>
        <span class="s0">return </span><span class="s1">serializeElement(node</span><span class="s0">, </span><span class="s1">options)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">if </span><span class="s1">(options.treeAdapter.isTextNode(node)) {</span>
        <span class="s0">return </span><span class="s1">serializeTextNode(node</span><span class="s0">, </span><span class="s1">options)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">if </span><span class="s1">(options.treeAdapter.isCommentNode(node)) {</span>
        <span class="s0">return </span><span class="s1">serializeCommentNode(node</span><span class="s0">, </span><span class="s1">options)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">if </span><span class="s1">(options.treeAdapter.isDocumentTypeNode(node)) {</span>
        <span class="s0">return </span><span class="s1">serializeDocumentTypeNode(node</span><span class="s0">, </span><span class="s1">options)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s4">// Return an empty string for unknown nodes</span>
    <span class="s0">return </span><span class="s2">''</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">serializeElement(node</span><span class="s0">, </span><span class="s1">options) {</span>
    <span class="s0">const </span><span class="s1">tn = options.treeAdapter.getTagName(node)</span><span class="s0">;</span>
    <span class="s0">return </span><span class="s2">`&lt;</span><span class="s1">${tn}${serializeAttributes(node</span><span class="s0">, </span><span class="s1">options)}</span><span class="s2">&gt;</span><span class="s1">${isVoidElement(node</span><span class="s0">, </span><span class="s1">options) ? </span><span class="s2">'' </span><span class="s1">: </span><span class="s2">`</span><span class="s1">${serializeChildNodes(node</span><span class="s0">, </span><span class="s1">options)}</span><span class="s2">&lt;/</span><span class="s1">${tn}</span><span class="s2">&gt;`</span><span class="s1">}</span><span class="s2">`</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">serializeAttributes(node</span><span class="s0">, </span><span class="s1">{ treeAdapter }) {</span>
    <span class="s0">let </span><span class="s1">html = </span><span class="s2">''</span><span class="s0">;</span>
    <span class="s0">for </span><span class="s1">(</span><span class="s0">const </span><span class="s1">attr of treeAdapter.getAttrList(node)) {</span>
        <span class="s1">html += </span><span class="s2">' '</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(!attr.namespace) {</span>
            <span class="s1">html += attr.name</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else</span>
            <span class="s0">switch </span><span class="s1">(attr.namespace) {</span>
                <span class="s0">case </span><span class="s1">NS.XML: {</span>
                    <span class="s1">html += </span><span class="s2">`xml:</span><span class="s1">${attr.name}</span><span class="s2">`</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">NS.XMLNS: {</span>
                    <span class="s0">if </span><span class="s1">(attr.name !== </span><span class="s2">'xmlns'</span><span class="s1">) {</span>
                        <span class="s1">html += </span><span class="s2">'xmlns:'</span><span class="s0">;</span>
                    <span class="s1">}</span>
                    <span class="s1">html += attr.name</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">case </span><span class="s1">NS.XLINK: {</span>
                    <span class="s1">html += </span><span class="s2">`xlink:</span><span class="s1">${attr.name}</span><span class="s2">`</span><span class="s0">;</span>
                    <span class="s0">break;</span>
                <span class="s1">}</span>
                <span class="s0">default</span><span class="s1">: {</span>
                    <span class="s1">html += </span><span class="s2">`</span><span class="s1">${attr.prefix}</span><span class="s2">:</span><span class="s1">${attr.name}</span><span class="s2">`</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">html += </span><span class="s2">`=&quot;</span><span class="s1">${escapeAttribute(attr.value)}</span><span class="s2">&quot;`</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">return </span><span class="s1">html</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">serializeTextNode(node</span><span class="s0">, </span><span class="s1">options) {</span>
    <span class="s0">const </span><span class="s1">{ treeAdapter } = options</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">content = treeAdapter.getTextNodeContent(node)</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">parent = treeAdapter.getParentNode(node)</span><span class="s0">;</span>
    <span class="s0">const </span><span class="s1">parentTn = parent &amp;&amp; treeAdapter.isElementNode(parent) &amp;&amp; treeAdapter.getTagName(parent)</span><span class="s0">;</span>
    <span class="s0">return </span><span class="s1">parentTn &amp;&amp;</span>
        <span class="s1">treeAdapter.getNamespaceURI(parent) === NS.HTML &amp;&amp;</span>
        <span class="s1">hasUnescapedText(parentTn</span><span class="s0">, </span><span class="s1">options.scriptingEnabled)</span>
        <span class="s1">? content</span>
        <span class="s1">: escapeText(content)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">serializeCommentNode(node</span><span class="s0">, </span><span class="s1">{ treeAdapter }) {</span>
    <span class="s0">return </span><span class="s2">`&lt;!--</span><span class="s1">${treeAdapter.getCommentNodeContent(node)}</span><span class="s2">--&gt;`</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">serializeDocumentTypeNode(node</span><span class="s0">, </span><span class="s1">{ treeAdapter }) {</span>
    <span class="s0">return </span><span class="s2">`&lt;!DOCTYPE </span><span class="s1">${treeAdapter.getDocumentTypeNodeName(node)}</span><span class="s2">&gt;`</span><span class="s0">;</span>
<span class="s1">}</span>

<span class="s4">// Shorthands</span>
<span class="s5">/**</span>
 <span class="s5">* Parses an HTML string.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">html Input HTML string.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">options Parsing options.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">Document</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@example</span>
 <span class="s5">*</span>
 <span class="s5">* ```js</span>
 <span class="s5">* const parse5 = require('parse5');</span>
 <span class="s5">*</span>
 <span class="s5">* const document = parse5.parse('&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hi there!&lt;/body&gt;&lt;/html&gt;');</span>
 <span class="s5">*</span>
 <span class="s5">* console.log(document.childNodes[1].tagName); //&gt; 'html'</span>
 <span class="s5">*```</span>
 <span class="s5">*/</span>
<span class="s0">function </span><span class="s1">parse(html</span><span class="s0">, </span><span class="s1">options) {</span>
    <span class="s0">return </span><span class="s1">Parser.parse(html</span><span class="s0">, </span><span class="s1">options)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">function </span><span class="s1">parseFragment(fragmentContext</span><span class="s0">, </span><span class="s1">html</span><span class="s0">, </span><span class="s1">options) {</span>
    <span class="s0">if </span><span class="s1">(</span><span class="s0">typeof </span><span class="s1">fragmentContext === </span><span class="s2">'string'</span><span class="s1">) {</span>
        <span class="s1">options = html</span><span class="s0">;</span>
        <span class="s1">html = fragmentContext</span><span class="s0">;</span>
        <span class="s1">fragmentContext = </span><span class="s0">null;</span>
    <span class="s1">}</span>
    <span class="s0">const </span><span class="s1">parser = Parser.getFragmentParser(fragmentContext</span><span class="s0">, </span><span class="s1">options)</span><span class="s0">;</span>
    <span class="s1">parser.tokenizer.write(html</span><span class="s0">, true</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s0">return </span><span class="s1">parser.getFragment()</span><span class="s0">;</span>
<span class="s1">}</span>

<span class="s0">export </span><span class="s1">{ ERR as ErrorCodes</span><span class="s0">, </span><span class="s1">Parser</span><span class="s0">, </span><span class="s1">token as Token</span><span class="s0">, </span><span class="s1">Tokenizer</span><span class="s0">, </span><span class="s1">TokenizerMode</span><span class="s0">, </span><span class="s1">defaultTreeAdapter</span><span class="s0">, </span><span class="s1">foreignContent</span><span class="s0">, </span><span class="s1">html</span><span class="s0">, </span><span class="s1">parse</span><span class="s0">, </span><span class="s1">parseFragment</span><span class="s0">, </span><span class="s1">serialize</span><span class="s0">, </span><span class="s1">serializeOuter }</span><span class="s0">;</span>
</pre>
</body>
</html>